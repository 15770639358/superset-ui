(window.webpackJsonp=window.webpackJsonp||[]).push([[36],{2290:function(module,exports,__webpack_require__){eval("var api = __webpack_require__(358);\n            var content = __webpack_require__(2291);\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.i, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjI5MC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8vVXNlcnMvZXJpa19yaXR0ZXIvcmVwb3MvZ2l0aHViLmNvbS9hcGFjaGUtc3VwZXJzZXQvc3VwZXJzZXQtdWkvcGx1Z2lucy9sZWdhY3ktcGx1Z2luLWNoYXJ0LXJvc2Uvc3JjL1Jvc2UuY3NzP2E3NjIiXSwic291cmNlc0NvbnRlbnQiOlsidmFyIGFwaSA9IHJlcXVpcmUoXCIhLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvaW5qZWN0U3R5bGVzSW50b1N0eWxlVGFnLmpzXCIpO1xuICAgICAgICAgICAgdmFyIGNvbnRlbnQgPSByZXF1aXJlKFwiISEuLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L2Nqcy5qcz8/cmVmLS02LTEhLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Bvc3Rjc3MtbG9hZGVyL3NyYy9pbmRleC5qcz8/cG9zdGNzcyEuL1Jvc2UuY3NzXCIpO1xuXG4gICAgICAgICAgICBjb250ZW50ID0gY29udGVudC5fX2VzTW9kdWxlID8gY29udGVudC5kZWZhdWx0IDogY29udGVudDtcblxuICAgICAgICAgICAgaWYgKHR5cGVvZiBjb250ZW50ID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICBjb250ZW50ID0gW1ttb2R1bGUuaWQsIGNvbnRlbnQsICcnXV07XG4gICAgICAgICAgICB9XG5cbnZhciBvcHRpb25zID0ge307XG5cbm9wdGlvbnMuaW5zZXJ0ID0gXCJoZWFkXCI7XG5vcHRpb25zLnNpbmdsZXRvbiA9IGZhbHNlO1xuXG52YXIgdXBkYXRlID0gYXBpKGNvbnRlbnQsIG9wdGlvbnMpO1xuXG5cblxubW9kdWxlLmV4cG9ydHMgPSBjb250ZW50LmxvY2FscyB8fCB7fTsiXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///2290\n")},2291:function(module,exports,__webpack_require__){eval('// Imports\nvar ___CSS_LOADER_API_IMPORT___ = __webpack_require__(359);\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.i, "/**\\n * Licensed to the Apache Software Foundation (ASF) under one\\n * or more contributor license agreements.  See the NOTICE file\\n * distributed with this work for additional information\\n * regarding copyright ownership.  The ASF licenses this file\\n * to you under the Apache License, Version 2.0 (the\\n * \\"License\\"); you may not use this file except in compliance\\n * with the License.  You may obtain a copy of the License at\\n *\\n *   http://www.apache.org/licenses/LICENSE-2.0\\n *\\n * Unless required by applicable law or agreed to in writing,\\n * software distributed under the License is distributed on an\\n * \\"AS IS\\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\\n * KIND, either express or implied.  See the License for the\\n * specific language governing permissions and limitations\\n * under the License.\\n */\\n\\n.superset-legacy-chart-rose path {\\n  transition: fill-opacity 180ms linear;\\n  stroke: #fff;\\n  stroke-width: 1px;\\n  stroke-opacity: 1;\\n  fill-opacity: 0.75;\\n}\\n\\n.superset-legacy-chart-rose text {\\n  font: 400 12px Arial, sans-serif;\\n  pointer-events: none;\\n}\\n\\n.superset-legacy-chart-rose .clickable path {\\n  cursor: pointer;\\n}\\n\\n.superset-legacy-chart-rose .hover path {\\n  fill-opacity: 1;\\n}\\n\\n.nv-legend .nv-series {\\n  cursor: pointer;\\n}\\n", ""]);\n// Exports\nmodule.exports = exports;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjI5MS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8vVXNlcnMvZXJpa19yaXR0ZXIvcmVwb3MvZ2l0aHViLmNvbS9hcGFjaGUtc3VwZXJzZXQvc3VwZXJzZXQtdWkvcGx1Z2lucy9sZWdhY3ktcGx1Z2luLWNoYXJ0LXJvc2Uvc3JjL1Jvc2UuY3NzP2E0YWYiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gSW1wb3J0c1xudmFyIF9fX0NTU19MT0FERVJfQVBJX0lNUE9SVF9fXyA9IHJlcXVpcmUoXCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L3J1bnRpbWUvYXBpLmpzXCIpO1xuZXhwb3J0cyA9IF9fX0NTU19MT0FERVJfQVBJX0lNUE9SVF9fXyhmYWxzZSk7XG4vLyBNb2R1bGVcbmV4cG9ydHMucHVzaChbbW9kdWxlLmlkLCBcIi8qKlxcbiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRhdGlvbiAoQVNGKSB1bmRlciBvbmVcXG4gKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxpY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGVcXG4gKiBkaXN0cmlidXRlZCB3aXRoIHRoaXMgd29yayBmb3IgYWRkaXRpb25hbCBpbmZvcm1hdGlvblxcbiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGVcXG4gKiB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlXFxuICogXFxcIkxpY2Vuc2VcXFwiKTsgeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZVxcbiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcXG4gKlxcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXFxuICpcXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsXFxuICogc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW5cXG4gKiBcXFwiQVMgSVNcXFwiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTllcXG4gKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZvciB0aGVcXG4gKiBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zXFxuICogdW5kZXIgdGhlIExpY2Vuc2UuXFxuICovXFxuXFxuLnN1cGVyc2V0LWxlZ2FjeS1jaGFydC1yb3NlIHBhdGgge1xcbiAgdHJhbnNpdGlvbjogZmlsbC1vcGFjaXR5IDE4MG1zIGxpbmVhcjtcXG4gIHN0cm9rZTogI2ZmZjtcXG4gIHN0cm9rZS13aWR0aDogMXB4O1xcbiAgc3Ryb2tlLW9wYWNpdHk6IDE7XFxuICBmaWxsLW9wYWNpdHk6IDAuNzU7XFxufVxcblxcbi5zdXBlcnNldC1sZWdhY3ktY2hhcnQtcm9zZSB0ZXh0IHtcXG4gIGZvbnQ6IDQwMCAxMnB4IEFyaWFsLCBzYW5zLXNlcmlmO1xcbiAgcG9pbnRlci1ldmVudHM6IG5vbmU7XFxufVxcblxcbi5zdXBlcnNldC1sZWdhY3ktY2hhcnQtcm9zZSAuY2xpY2thYmxlIHBhdGgge1xcbiAgY3Vyc29yOiBwb2ludGVyO1xcbn1cXG5cXG4uc3VwZXJzZXQtbGVnYWN5LWNoYXJ0LXJvc2UgLmhvdmVyIHBhdGgge1xcbiAgZmlsbC1vcGFjaXR5OiAxO1xcbn1cXG5cXG4ubnYtbGVnZW5kIC5udi1zZXJpZXMge1xcbiAgY3Vyc29yOiBwb2ludGVyO1xcbn1cXG5cIiwgXCJcIl0pO1xuLy8gRXhwb3J0c1xubW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzO1xuIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///2291\n')},2499:function(module,__webpack_exports__,__webpack_require__){"use strict";eval('// ESM COMPAT FLAG\n__webpack_require__.r(__webpack_exports__);\n\n// EXTERNAL MODULE: ../superset-ui-core/src/chart/components/reactify.tsx\nvar reactify = __webpack_require__(1021);\n\n// EXTERNAL MODULE: /Users/erik_ritter/repos/github.com/apache-superset/superset-ui/node_modules/core-js/modules/web.dom-collections.iterator.js\nvar web_dom_collections_iterator = __webpack_require__(27);\n\n// EXTERNAL MODULE: /Users/erik_ritter/repos/github.com/apache-superset/superset-ui/node_modules/d3/d3.js\nvar d3 = __webpack_require__(159);\nvar d3_default = /*#__PURE__*/__webpack_require__.n(d3);\n\n// EXTERNAL MODULE: /Users/erik_ritter/repos/github.com/apache-superset/superset-ui/node_modules/prop-types/index.js\nvar prop_types = __webpack_require__(53);\nvar prop_types_default = /*#__PURE__*/__webpack_require__.n(prop_types);\n\n// EXTERNAL MODULE: /Users/erik_ritter/repos/github.com/apache-superset/superset-ui/node_modules/nvd3/build/nv.d3.js\nvar nv_d3 = __webpack_require__(2289);\nvar nv_d3_default = /*#__PURE__*/__webpack_require__.n(nv_d3);\n\n// EXTERNAL MODULE: ../superset-ui-core/src/number-format/NumberFormatterRegistrySingleton.ts\nvar NumberFormatterRegistrySingleton = __webpack_require__(156);\n\n// EXTERNAL MODULE: ../superset-ui-core/src/time-format/TimeFormatterRegistrySingleton.ts + 5 modules\nvar TimeFormatterRegistrySingleton = __webpack_require__(138);\n\n// EXTERNAL MODULE: ../superset-ui-core/src/color/index.ts + 3 modules\nvar color = __webpack_require__(842);\n\n// EXTERNAL MODULE: /Users/erik_ritter/repos/github.com/apache-superset/superset-ui/plugins/legacy-plugin-chart-rose/src/Rose.css\nvar Rose = __webpack_require__(2290);\n\n// CONCATENATED MODULE: /Users/erik_ritter/repos/github.com/apache-superset/superset-ui/plugins/legacy-plugin-chart-rose/src/Rose.js\nfunction ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable});keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1,source;i<arguments.length;i++){source=null!=arguments[i]?arguments[i]:{};if(i%2){ownKeys(Object(source),!0).forEach(function(key){_defineProperty(target,key,source[key])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0})}else{obj[key]=value}return obj}/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * "License"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */ /* eslint no-use-before-define: ["error", { "functions": false }] */ /* eslint-disable no-restricted-syntax */ /* eslint-disable react/sort-prop-types */const propTypes={// Data is an object hashed by numeric value, perhaps timestamp\ndata:prop_types_default.a.objectOf(prop_types_default.a.arrayOf(prop_types_default.a.shape({key:prop_types_default.a.arrayOf(prop_types_default.a.string),name:prop_types_default.a.arrayOf(prop_types_default.a.string),time:prop_types_default.a.number,value:prop_types_default.a.number}))),width:prop_types_default.a.number,height:prop_types_default.a.number,dateTimeFormat:prop_types_default.a.string,numberFormat:prop_types_default.a.string,useRichTooltip:prop_types_default.a.bool,useAreaProportions:prop_types_default.a.bool};function copyArc(d){return{startAngle:d.startAngle,endAngle:d.endAngle,innerRadius:d.innerRadius,outerRadius:d.outerRadius}}function sortValues(a,b){if(a.value===b.value){return a.name>b.name?1:-1}return b.value-a.value}function Rose_Rose(element,props){const{data,width,height,colorScheme,dateTimeFormat,numberFormat,useRichTooltip,useAreaProportions}=props,div=d3_default.a.select(element);div.classed("superset-legacy-chart-rose",!0);const datum=data,times=Object.keys(datum).map(t=>parseInt(t,10)).sort((a,b)=>a-b),numGrains=times.length,numGroups=datum[times[0]].length,format=Object(NumberFormatterRegistrySingleton["c" /* getNumberFormatter */])(numberFormat),timeFormat=Object(TimeFormatterRegistrySingleton["d" /* getTimeFormatter */])(dateTimeFormat),colorFn=color["b" /* CategoricalColorNamespace */].getScale(colorScheme);d3_default.a.select(".nvtooltip").remove();div.selectAll("*").remove();const arc=d3_default.a.svg.arc(),legend=nv_d3_default.a.models.legend(),tooltip=nv_d3_default.a.models.tooltip(),state={disabled:datum[times[0]].map(()=>!1)},svg=div.append("svg").attr("width",width).attr("height",height),g=svg.append("g").attr("class","rose").append("g"),legendWrap=g.append("g").attr("class","legendWrap");function legendData(adatum){return adatum[times[0]].map((v,i)=>({disabled:state.disabled[i],key:v.name}))}function tooltipData(d,i,adatum){const timeIndex=Math.floor(d.arcId/numGroups),series=useRichTooltip?adatum[times[timeIndex]].filter(v=>!state.disabled[v.id%numGroups]).map(v=>({key:v.name,value:v.value,color:colorFn(v.name),highlight:v.id===d.arcId})):[{key:d.name,value:d.val,color:colorFn(d.name)}];return{key:"Date",value:d.time,series}}legend.width(width).color(d=>colorFn(d.key));legendWrap.datum(legendData(datum)).call(legend);tooltip.headerFormatter(timeFormat).valueFormatter(format);// Compute max radius, which the largest value will occupy\nconst roseHeight=height-legend.height(),margin={top:legend.height()},maxRadius=Math.min(width,roseHeight)/2-35,labelThreshold=.05,gro=8,mini=.075,centerTranslate=`translate(${width/2},${roseHeight/2+margin.top})`,roseWrap=g.append("g").attr("transform",centerTranslate).attr("class","roseWrap"),labelsWrap=g.append("g").attr("transform",centerTranslate).attr("class","labelsWrap"),groupLabelsWrap=g.append("g").attr("transform",centerTranslate).attr("class","groupLabelsWrap");// Compute inner and outer angles for each data point\nfunction computeArcStates(adatum){// Find the max sum of values across all time\nlet maxSum=0,grain=0;const sums=[];for(const t of times){const sum=datum[t].reduce((a,v,i)=>a+(state.disabled[i]?0:v.value),0);maxSum=sum>maxSum?sum:maxSum;sums[grain]=sum;grain+=1}// Compute angle occupied by each time grain\nconst dtheta=2*Math.PI/numGrains,angles=[];for(let i=0;i<=numGrains;i+=1){angles.push(dtheta*i-Math.PI/2)}// Compute proportion\nconst P=maxRadius/maxSum,computeOuterRadius=(value,innerRadius)=>useAreaProportions?Math.sqrt(P*maxRadius*value+innerRadius*innerRadius):P*value+innerRadius,arcSt={data:[],extend:{},push:{},pieStart:{},pie:{},pieOver:{},mini:{},labels:[],groupLabels:[]};let arcId=0;for(let i=0;i<numGrains;i+=1){const t=times[i],startAngle=angles[i],endAngle=angles[i+1],G=2*Math.PI/sums[i];let innerRadius=0,outerRadius,pieStartAngle=0,pieEndAngle;for(const v of adatum[t]){const val=state.disabled[arcId%numGroups]?0:v.value,{name,time}=v;v.id=arcId;outerRadius=computeOuterRadius(val,innerRadius);arcSt.data.push({startAngle,endAngle,innerRadius,outerRadius,name,arcId,val,time});arcSt.extend[arcId]={startAngle,endAngle,innerRadius,name,outerRadius:outerRadius+gro};arcSt.push[arcId]={startAngle,endAngle,innerRadius:innerRadius+gro,outerRadius:outerRadius+gro};arcSt.pieStart[arcId]={startAngle,endAngle,innerRadius:mini*maxRadius,outerRadius:maxRadius};arcSt.mini[arcId]={startAngle,endAngle,innerRadius:innerRadius*mini,outerRadius:outerRadius*mini};arcId+=1;innerRadius=outerRadius}const labelArc=_objectSpread({},arcSt.data[i*numGroups]);labelArc.outerRadius=maxRadius+20;labelArc.innerRadius=maxRadius+15;arcSt.labels.push(labelArc);for(const v of adatum[t].concat().sort(sortValues)){const val=state.disabled[v.id%numGroups]?0:v.value;pieEndAngle=G*val+pieStartAngle;arcSt.pie[v.id]={startAngle:pieStartAngle,endAngle:pieEndAngle,innerRadius:maxRadius*mini,outerRadius:maxRadius,percent:v.value/sums[i]};arcSt.pieOver[v.id]={startAngle:pieStartAngle,endAngle:pieEndAngle,innerRadius:maxRadius*mini,outerRadius:maxRadius+gro};pieStartAngle=pieEndAngle}}arcSt.groupLabels=arcSt.data.slice(0,numGroups);return arcSt}let arcSt=computeArcStates(datum);function tween(target,resFunc){return function(d){const interpolate=d3_default.a.interpolate(copyArc(d),copyArc(target));return t=>resFunc(Object.assign(d,interpolate(t)))}}function arcTween(target){return tween(target,d=>arc(d))}function translateTween(target){return tween(target,d=>`translate(${arc.centroid(d)})`)}// Grab the ID range of segments stand between\n// this segment and the edge of the circle\nconst segmentsToEdgeCache={};function getSegmentsToEdge(arcId){if(segmentsToEdgeCache[arcId]){return segmentsToEdgeCache[arcId]}const timeIndex=Math.floor(arcId/numGroups);segmentsToEdgeCache[arcId]=[arcId+1,numGroups*(timeIndex+1)-1];return segmentsToEdgeCache[arcId]}// Get the IDs of all segments in a timeIndex\nconst segmentsInTimeCache={};function getSegmentsInTime(arcId){if(segmentsInTimeCache[arcId]){return segmentsInTimeCache[arcId]}const timeIndex=Math.floor(arcId/numGroups);segmentsInTimeCache[arcId]=[timeIndex*numGroups,(timeIndex+1)*numGroups-1];return segmentsInTimeCache[arcId]}let clickId=-1,inTransition=!1;const ae=roseWrap.selectAll("g").data(JSON.parse(JSON.stringify(arcSt.data)))// deep copy data state\n.enter().append("g").attr("class","segment").classed("clickable",!0).on("mouseover",mouseover).on("mouseout",mouseout).on("mousemove",function(){tooltip()}).on("click",click),labels=labelsWrap.selectAll("g").data(JSON.parse(JSON.stringify(arcSt.labels))).enter().append("g").attr("class","roseLabel").attr("transform",d=>`translate(${arc.centroid(d)})`);labels.append("text").style("text-anchor","middle").style("fill","#000").text(d=>timeFormat(d.time));const groupLabels=groupLabelsWrap.selectAll("g").data(JSON.parse(JSON.stringify(arcSt.groupLabels))).enter().append("g");groupLabels.style("opacity",0).attr("class","roseGroupLabels").append("text").style("text-anchor","middle").style("fill","#000").text(d=>d.name);const arcs=ae.append("path").attr("class","arc").attr("fill",d=>colorFn(d.name)).attr("d",arc);function mouseover(b,i){tooltip.data(tooltipData(b,i,datum)).hidden(!1);const $this=d3_default.a.select(this);$this.classed("hover",!0);if(0>clickId&&!inTransition){$this.select("path").interrupt().transition().duration(180).attrTween("d",arcTween(arcSt.extend[i]));const edge=getSegmentsToEdge(i);arcs.filter(d=>edge[0]<=d.arcId&&d.arcId<=edge[1]).interrupt().transition().duration(180).attrTween("d",d=>arcTween(arcSt.push[d.arcId])(d))}else if(!inTransition){const segments=getSegmentsInTime(clickId);if(segments[0]<=b.arcId&&b.arcId<=segments[1]){$this.select("path").interrupt().transition().duration(180).attrTween("d",arcTween(arcSt.pieOver[i]))}}}function mouseout(b,i){tooltip.hidden(!0);const $this=d3_default.a.select(this);$this.classed("hover",!1);if(0>clickId&&!inTransition){$this.select("path").interrupt().transition().duration(180).attrTween("d",arcTween(arcSt.data[i]));const edge=getSegmentsToEdge(i);arcs.filter(d=>edge[0]<=d.arcId&&d.arcId<=edge[1]).interrupt().transition().duration(180).attrTween("d",d=>arcTween(arcSt.data[d.arcId])(d))}else if(!inTransition){const segments=getSegmentsInTime(clickId);if(segments[0]<=b.arcId&&b.arcId<=segments[1]){$this.select("path").interrupt().transition().duration(180).attrTween("d",arcTween(arcSt.pie[i]))}}}function click(b,i){if(inTransition){return}const delay=d3_default.a.event.altKey?3750:375,segments=getSegmentsInTime(i);if(0>clickId){inTransition=!0;clickId=i;labels.interrupt().transition().duration(delay).attrTween("transform",d=>translateTween({outerRadius:0,innerRadius:0,startAngle:d.startAngle,endAngle:d.endAngle})(d)).style("opacity",0);groupLabels.attr("transform",`translate(${arc.centroid({outerRadius:maxRadius+20,innerRadius:maxRadius+15,startAngle:arcSt.data[i].startAngle,endAngle:arcSt.data[i].endAngle})})`).interrupt().transition().delay(delay).duration(delay).attrTween("transform",d=>translateTween({outerRadius:maxRadius+20,innerRadius:maxRadius+15,startAngle:arcSt.pie[segments[0]+d.arcId].startAngle,endAngle:arcSt.pie[segments[0]+d.arcId].endAngle})(d)).style("opacity",d=>state.disabled[d.arcId]||arcSt.pie[segments[0]+d.arcId].percent<labelThreshold?0:1);ae.classed("clickable",d=>segments[0]>d.arcId||d.arcId>segments[1]);arcs.filter(d=>segments[0]<=d.arcId&&d.arcId<=segments[1]).interrupt().transition().duration(delay).attrTween("d",d=>arcTween(arcSt.pieStart[d.arcId])(d)).transition().duration(delay).attrTween("d",d=>arcTween(arcSt.pie[d.arcId])(d)).each("end",()=>{inTransition=!1});arcs.filter(d=>segments[0]>d.arcId||d.arcId>segments[1]).interrupt().transition().duration(delay).attrTween("d",d=>arcTween(arcSt.mini[d.arcId])(d))}else if(clickId<segments[0]||segments[1]<clickId){inTransition=!0;const clickSegments=getSegmentsInTime(clickId);labels.interrupt().transition().delay(delay).duration(delay).attrTween("transform",d=>translateTween(arcSt.labels[d.arcId/numGroups])(d)).style("opacity",1);groupLabels.interrupt().transition().duration(delay).attrTween("transform",translateTween({outerRadius:maxRadius+20,innerRadius:maxRadius+15,startAngle:arcSt.data[clickId].startAngle,endAngle:arcSt.data[clickId].endAngle})).style("opacity",0);ae.classed("clickable",!0);arcs.filter(d=>clickSegments[0]<=d.arcId&&d.arcId<=clickSegments[1]).interrupt().transition().duration(delay).attrTween("d",d=>arcTween(arcSt.pieStart[d.arcId])(d)).transition().duration(delay).attrTween("d",d=>arcTween(arcSt.data[d.arcId])(d)).each("end",()=>{clickId=-1;inTransition=!1});arcs.filter(d=>clickSegments[0]>d.arcId||d.arcId>clickSegments[1]).interrupt().transition().delay(delay).duration(delay).attrTween("d",d=>arcTween(arcSt.data[d.arcId])(d))}}function updateActive(){const delay=d3_default.a.event.altKey?3e3:300;legendWrap.datum(legendData(datum)).call(legend);const nArcSt=computeArcStates(datum);inTransition=!0;if(0>clickId){arcs.style("opacity",1).interrupt().transition().duration(delay).attrTween("d",d=>arcTween(nArcSt.data[d.arcId])(d)).each("end",()=>{inTransition=!1;arcSt=nArcSt}).transition().duration(0).style("opacity",d=>state.disabled[d.arcId%numGroups]?0:1)}else{const segments=getSegmentsInTime(clickId);arcs.style("opacity",1).interrupt().transition().duration(delay).attrTween("d",d=>segments[0]<=d.arcId&&d.arcId<=segments[1]?arcTween(nArcSt.pie[d.arcId])(d):arcTween(nArcSt.mini[d.arcId])(d)).each("end",()=>{inTransition=!1;arcSt=nArcSt}).transition().duration(0).style("opacity",d=>state.disabled[d.arcId%numGroups]?0:1);groupLabels.interrupt().transition().duration(delay).attrTween("transform",d=>translateTween({outerRadius:maxRadius+20,innerRadius:maxRadius+15,startAngle:nArcSt.pie[segments[0]+d.arcId].startAngle,endAngle:nArcSt.pie[segments[0]+d.arcId].endAngle})(d)).style("opacity",d=>state.disabled[d.arcId]||arcSt.pie[segments[0]+d.arcId].percent<labelThreshold?0:1)}}legend.dispatch.on("stateChange",newState=>{if(state.disabled!==newState.disabled){state.disabled=newState.disabled;updateActive()}})}Rose_Rose.displayName="Rose";Rose_Rose.propTypes=propTypes;/* harmony default export */ var src_Rose = (Rose_Rose);\n// CONCATENATED MODULE: /Users/erik_ritter/repos/github.com/apache-superset/superset-ui/plugins/legacy-plugin-chart-rose/src/ReactRose.js\n/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * "License"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n *//* harmony default export */ var ReactRose = __webpack_exports__["default"] = (Object(reactify["a" /* default */])(src_Rose));//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjQ5OS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8vVXNlcnMvZXJpa19yaXR0ZXIvcmVwb3MvZ2l0aHViLmNvbS9hcGFjaGUtc3VwZXJzZXQvc3VwZXJzZXQtdWkvcGx1Z2lucy9sZWdhY3ktcGx1Z2luLWNoYXJ0LXJvc2Uvc3JjL1Jvc2UuanM/M2U2ZCIsIndlYnBhY2s6Ly8vL1VzZXJzL2VyaWtfcml0dGVyL3JlcG9zL2dpdGh1Yi5jb20vYXBhY2hlLXN1cGVyc2V0L3N1cGVyc2V0LXVpL3BsdWdpbnMvbGVnYWN5LXBsdWdpbi1jaGFydC1yb3NlL3NyYy9SZWFjdFJvc2UuanM/M2ZlZSJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRhdGlvbiAoQVNGKSB1bmRlciBvbmVcbiAqIG9yIG1vcmUgY29udHJpYnV0b3IgbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZVxuICogZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3JtYXRpb25cbiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGVcbiAqIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGVcbiAqIFwiTGljZW5zZVwiKTsgeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZVxuICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLFxuICogc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW5cbiAqIFwiQVMgSVNcIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZXG4gKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZvciB0aGVcbiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnNcbiAqIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKiBlc2xpbnQgbm8tdXNlLWJlZm9yZS1kZWZpbmU6IFtcImVycm9yXCIsIHsgXCJmdW5jdGlvbnNcIjogZmFsc2UgfV0gKi9cbi8qIGVzbGludC1kaXNhYmxlIG5vLXJlc3RyaWN0ZWQtc3ludGF4ICovXG4vKiBlc2xpbnQtZGlzYWJsZSByZWFjdC9zb3J0LXByb3AtdHlwZXMgKi9cbmltcG9ydCBkMyBmcm9tICdkMyc7XG5pbXBvcnQgUHJvcFR5cGVzIGZyb20gJ3Byb3AtdHlwZXMnO1xuaW1wb3J0IG52IGZyb20gJ252ZDMnO1xuaW1wb3J0IHsgZ2V0VGltZUZvcm1hdHRlciwgZ2V0TnVtYmVyRm9ybWF0dGVyLCBDYXRlZ29yaWNhbENvbG9yTmFtZXNwYWNlIH0gZnJvbSAnQHN1cGVyc2V0LXVpL2NvcmUnO1xuaW1wb3J0ICcuL1Jvc2UuY3NzJztcblxuY29uc3QgcHJvcFR5cGVzID0ge1xuICAvLyBEYXRhIGlzIGFuIG9iamVjdCBoYXNoZWQgYnkgbnVtZXJpYyB2YWx1ZSwgcGVyaGFwcyB0aW1lc3RhbXBcbiAgZGF0YTogUHJvcFR5cGVzLm9iamVjdE9mKFxuICAgIFByb3BUeXBlcy5hcnJheU9mKFxuICAgICAgUHJvcFR5cGVzLnNoYXBlKHtcbiAgICAgICAga2V5OiBQcm9wVHlwZXMuYXJyYXlPZihQcm9wVHlwZXMuc3RyaW5nKSxcbiAgICAgICAgbmFtZTogUHJvcFR5cGVzLmFycmF5T2YoUHJvcFR5cGVzLnN0cmluZyksXG4gICAgICAgIHRpbWU6IFByb3BUeXBlcy5udW1iZXIsXG4gICAgICAgIHZhbHVlOiBQcm9wVHlwZXMubnVtYmVyLFxuICAgICAgfSksXG4gICAgKSxcbiAgKSxcbiAgd2lkdGg6IFByb3BUeXBlcy5udW1iZXIsXG4gIGhlaWdodDogUHJvcFR5cGVzLm51bWJlcixcbiAgZGF0ZVRpbWVGb3JtYXQ6IFByb3BUeXBlcy5zdHJpbmcsXG4gIG51bWJlckZvcm1hdDogUHJvcFR5cGVzLnN0cmluZyxcbiAgdXNlUmljaFRvb2x0aXA6IFByb3BUeXBlcy5ib29sLFxuICB1c2VBcmVhUHJvcG9ydGlvbnM6IFByb3BUeXBlcy5ib29sLFxufTtcblxuZnVuY3Rpb24gY29weUFyYyhkKSB7XG4gIHJldHVybiB7XG4gICAgc3RhcnRBbmdsZTogZC5zdGFydEFuZ2xlLFxuICAgIGVuZEFuZ2xlOiBkLmVuZEFuZ2xlLFxuICAgIGlubmVyUmFkaXVzOiBkLmlubmVyUmFkaXVzLFxuICAgIG91dGVyUmFkaXVzOiBkLm91dGVyUmFkaXVzLFxuICB9O1xufVxuXG5mdW5jdGlvbiBzb3J0VmFsdWVzKGEsIGIpIHtcbiAgaWYgKGEudmFsdWUgPT09IGIudmFsdWUpIHtcbiAgICByZXR1cm4gYS5uYW1lID4gYi5uYW1lID8gMSA6IC0xO1xuICB9XG5cbiAgcmV0dXJuIGIudmFsdWUgLSBhLnZhbHVlO1xufVxuXG5mdW5jdGlvbiBSb3NlKGVsZW1lbnQsIHByb3BzKSB7XG4gIGNvbnN0IHtcbiAgICBkYXRhLFxuICAgIHdpZHRoLFxuICAgIGhlaWdodCxcbiAgICBjb2xvclNjaGVtZSxcbiAgICBkYXRlVGltZUZvcm1hdCxcbiAgICBudW1iZXJGb3JtYXQsXG4gICAgdXNlUmljaFRvb2x0aXAsXG4gICAgdXNlQXJlYVByb3BvcnRpb25zLFxuICB9ID0gcHJvcHM7XG5cbiAgY29uc3QgZGl2ID0gZDMuc2VsZWN0KGVsZW1lbnQpO1xuICBkaXYuY2xhc3NlZCgnc3VwZXJzZXQtbGVnYWN5LWNoYXJ0LXJvc2UnLCB0cnVlKTtcblxuICBjb25zdCBkYXR1bSA9IGRhdGE7XG4gIGNvbnN0IHRpbWVzID0gT2JqZWN0LmtleXMoZGF0dW0pXG4gICAgLm1hcCh0ID0+IHBhcnNlSW50KHQsIDEwKSlcbiAgICAuc29ydCgoYSwgYikgPT4gYSAtIGIpO1xuICBjb25zdCBudW1HcmFpbnMgPSB0aW1lcy5sZW5ndGg7XG4gIGNvbnN0IG51bUdyb3VwcyA9IGRhdHVtW3RpbWVzWzBdXS5sZW5ndGg7XG4gIGNvbnN0IGZvcm1hdCA9IGdldE51bWJlckZvcm1hdHRlcihudW1iZXJGb3JtYXQpO1xuICBjb25zdCB0aW1lRm9ybWF0ID0gZ2V0VGltZUZvcm1hdHRlcihkYXRlVGltZUZvcm1hdCk7XG4gIGNvbnN0IGNvbG9yRm4gPSBDYXRlZ29yaWNhbENvbG9yTmFtZXNwYWNlLmdldFNjYWxlKGNvbG9yU2NoZW1lKTtcblxuICBkMy5zZWxlY3QoJy5udnRvb2x0aXAnKS5yZW1vdmUoKTtcbiAgZGl2LnNlbGVjdEFsbCgnKicpLnJlbW92ZSgpO1xuXG4gIGNvbnN0IGFyYyA9IGQzLnN2Zy5hcmMoKTtcbiAgY29uc3QgbGVnZW5kID0gbnYubW9kZWxzLmxlZ2VuZCgpO1xuICBjb25zdCB0b29sdGlwID0gbnYubW9kZWxzLnRvb2x0aXAoKTtcbiAgY29uc3Qgc3RhdGUgPSB7IGRpc2FibGVkOiBkYXR1bVt0aW1lc1swXV0ubWFwKCgpID0+IGZhbHNlKSB9O1xuXG4gIGNvbnN0IHN2ZyA9IGRpdi5hcHBlbmQoJ3N2ZycpLmF0dHIoJ3dpZHRoJywgd2lkdGgpLmF0dHIoJ2hlaWdodCcsIGhlaWdodCk7XG5cbiAgY29uc3QgZyA9IHN2Zy5hcHBlbmQoJ2cnKS5hdHRyKCdjbGFzcycsICdyb3NlJykuYXBwZW5kKCdnJyk7XG5cbiAgY29uc3QgbGVnZW5kV3JhcCA9IGcuYXBwZW5kKCdnJykuYXR0cignY2xhc3MnLCAnbGVnZW5kV3JhcCcpO1xuXG4gIGZ1bmN0aW9uIGxlZ2VuZERhdGEoYWRhdHVtKSB7XG4gICAgcmV0dXJuIGFkYXR1bVt0aW1lc1swXV0ubWFwKCh2LCBpKSA9PiAoe1xuICAgICAgZGlzYWJsZWQ6IHN0YXRlLmRpc2FibGVkW2ldLFxuICAgICAga2V5OiB2Lm5hbWUsXG4gICAgfSkpO1xuICB9XG5cbiAgZnVuY3Rpb24gdG9vbHRpcERhdGEoZCwgaSwgYWRhdHVtKSB7XG4gICAgY29uc3QgdGltZUluZGV4ID0gTWF0aC5mbG9vcihkLmFyY0lkIC8gbnVtR3JvdXBzKTtcbiAgICBjb25zdCBzZXJpZXMgPSB1c2VSaWNoVG9vbHRpcFxuICAgICAgPyBhZGF0dW1bdGltZXNbdGltZUluZGV4XV1cbiAgICAgICAgICAuZmlsdGVyKHYgPT4gIXN0YXRlLmRpc2FibGVkW3YuaWQgJSBudW1Hcm91cHNdKVxuICAgICAgICAgIC5tYXAodiA9PiAoe1xuICAgICAgICAgICAga2V5OiB2Lm5hbWUsXG4gICAgICAgICAgICB2YWx1ZTogdi52YWx1ZSxcbiAgICAgICAgICAgIGNvbG9yOiBjb2xvckZuKHYubmFtZSksXG4gICAgICAgICAgICBoaWdobGlnaHQ6IHYuaWQgPT09IGQuYXJjSWQsXG4gICAgICAgICAgfSkpXG4gICAgICA6IFt7IGtleTogZC5uYW1lLCB2YWx1ZTogZC52YWwsIGNvbG9yOiBjb2xvckZuKGQubmFtZSkgfV07XG5cbiAgICByZXR1cm4ge1xuICAgICAga2V5OiAnRGF0ZScsXG4gICAgICB2YWx1ZTogZC50aW1lLFxuICAgICAgc2VyaWVzLFxuICAgIH07XG4gIH1cblxuICBsZWdlbmQud2lkdGgod2lkdGgpLmNvbG9yKGQgPT4gY29sb3JGbihkLmtleSkpO1xuICBsZWdlbmRXcmFwLmRhdHVtKGxlZ2VuZERhdGEoZGF0dW0pKS5jYWxsKGxlZ2VuZCk7XG5cbiAgdG9vbHRpcC5oZWFkZXJGb3JtYXR0ZXIodGltZUZvcm1hdCkudmFsdWVGb3JtYXR0ZXIoZm9ybWF0KTtcblxuICAvLyBDb21wdXRlIG1heCByYWRpdXMsIHdoaWNoIHRoZSBsYXJnZXN0IHZhbHVlIHdpbGwgb2NjdXB5XG4gIGNvbnN0IHJvc2VIZWlnaHQgPSBoZWlnaHQgLSBsZWdlbmQuaGVpZ2h0KCk7XG4gIGNvbnN0IG1hcmdpbiA9IHsgdG9wOiBsZWdlbmQuaGVpZ2h0KCkgfTtcbiAgY29uc3QgZWRnZU1hcmdpbiA9IDM1OyAvLyBzcGFjZSBiZXR3ZWVuIG91dGVybW9zdCByYWRpdXMgYW5kIHNsaWNlIGVkZ2VcbiAgY29uc3QgbWF4UmFkaXVzID0gTWF0aC5taW4od2lkdGgsIHJvc2VIZWlnaHQpIC8gMiAtIGVkZ2VNYXJnaW47XG4gIGNvbnN0IGxhYmVsVGhyZXNob2xkID0gMC4wNTtcbiAgY29uc3QgZ3JvID0gODsgLy8gbW91c2VvdmVyIHJhZGl1cyBncm93dGggaW4gcGl4ZWxzXG4gIGNvbnN0IG1pbmkgPSAwLjA3NTtcblxuICBjb25zdCBjZW50ZXJUcmFuc2xhdGUgPSBgdHJhbnNsYXRlKCR7d2lkdGggLyAyfSwke3Jvc2VIZWlnaHQgLyAyICsgbWFyZ2luLnRvcH0pYDtcbiAgY29uc3Qgcm9zZVdyYXAgPSBnLmFwcGVuZCgnZycpLmF0dHIoJ3RyYW5zZm9ybScsIGNlbnRlclRyYW5zbGF0ZSkuYXR0cignY2xhc3MnLCAncm9zZVdyYXAnKTtcblxuICBjb25zdCBsYWJlbHNXcmFwID0gZy5hcHBlbmQoJ2cnKS5hdHRyKCd0cmFuc2Zvcm0nLCBjZW50ZXJUcmFuc2xhdGUpLmF0dHIoJ2NsYXNzJywgJ2xhYmVsc1dyYXAnKTtcblxuICBjb25zdCBncm91cExhYmVsc1dyYXAgPSBnXG4gICAgLmFwcGVuZCgnZycpXG4gICAgLmF0dHIoJ3RyYW5zZm9ybScsIGNlbnRlclRyYW5zbGF0ZSlcbiAgICAuYXR0cignY2xhc3MnLCAnZ3JvdXBMYWJlbHNXcmFwJyk7XG5cbiAgLy8gQ29tcHV0ZSBpbm5lciBhbmQgb3V0ZXIgYW5nbGVzIGZvciBlYWNoIGRhdGEgcG9pbnRcbiAgZnVuY3Rpb24gY29tcHV0ZUFyY1N0YXRlcyhhZGF0dW0pIHtcbiAgICAvLyBGaW5kIHRoZSBtYXggc3VtIG9mIHZhbHVlcyBhY3Jvc3MgYWxsIHRpbWVcbiAgICBsZXQgbWF4U3VtID0gMDtcbiAgICBsZXQgZ3JhaW4gPSAwO1xuICAgIGNvbnN0IHN1bXMgPSBbXTtcbiAgICBmb3IgKGNvbnN0IHQgb2YgdGltZXMpIHtcbiAgICAgIGNvbnN0IHN1bSA9IGRhdHVtW3RdLnJlZHVjZSgoYSwgdiwgaSkgPT4gYSArIChzdGF0ZS5kaXNhYmxlZFtpXSA/IDAgOiB2LnZhbHVlKSwgMCk7XG4gICAgICBtYXhTdW0gPSBzdW0gPiBtYXhTdW0gPyBzdW0gOiBtYXhTdW07XG4gICAgICBzdW1zW2dyYWluXSA9IHN1bTtcbiAgICAgIGdyYWluICs9IDE7XG4gICAgfVxuXG4gICAgLy8gQ29tcHV0ZSBhbmdsZSBvY2N1cGllZCBieSBlYWNoIHRpbWUgZ3JhaW5cbiAgICBjb25zdCBkdGhldGEgPSAoTWF0aC5QSSAqIDIpIC8gbnVtR3JhaW5zO1xuICAgIGNvbnN0IGFuZ2xlcyA9IFtdO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDw9IG51bUdyYWluczsgaSArPSAxKSB7XG4gICAgICBhbmdsZXMucHVzaChkdGhldGEgKiBpIC0gTWF0aC5QSSAvIDIpO1xuICAgIH1cblxuICAgIC8vIENvbXB1dGUgcHJvcG9ydGlvblxuICAgIGNvbnN0IFAgPSBtYXhSYWRpdXMgLyBtYXhTdW07XG4gICAgY29uc3QgUSA9IFAgKiBtYXhSYWRpdXM7XG4gICAgY29uc3QgY29tcHV0ZU91dGVyUmFkaXVzID0gKHZhbHVlLCBpbm5lclJhZGl1cykgPT5cbiAgICAgIHVzZUFyZWFQcm9wb3J0aW9uc1xuICAgICAgICA/IE1hdGguc3FydChRICogdmFsdWUgKyBpbm5lclJhZGl1cyAqIGlubmVyUmFkaXVzKVxuICAgICAgICA6IFAgKiB2YWx1ZSArIGlubmVyUmFkaXVzO1xuXG4gICAgY29uc3QgYXJjU3QgPSB7XG4gICAgICBkYXRhOiBbXSxcbiAgICAgIGV4dGVuZDoge30sXG4gICAgICBwdXNoOiB7fSxcbiAgICAgIHBpZVN0YXJ0OiB7fSxcbiAgICAgIHBpZToge30sXG4gICAgICBwaWVPdmVyOiB7fSxcbiAgICAgIG1pbmk6IHt9LFxuICAgICAgbGFiZWxzOiBbXSxcbiAgICAgIGdyb3VwTGFiZWxzOiBbXSxcbiAgICB9O1xuICAgIGxldCBhcmNJZCA9IDA7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBudW1HcmFpbnM7IGkgKz0gMSkge1xuICAgICAgY29uc3QgdCA9IHRpbWVzW2ldO1xuICAgICAgY29uc3Qgc3RhcnRBbmdsZSA9IGFuZ2xlc1tpXTtcbiAgICAgIGNvbnN0IGVuZEFuZ2xlID0gYW5nbGVzW2kgKyAxXTtcbiAgICAgIGNvbnN0IEcgPSAoMiAqIE1hdGguUEkpIC8gc3Vtc1tpXTtcbiAgICAgIGxldCBpbm5lclJhZGl1cyA9IDA7XG4gICAgICBsZXQgb3V0ZXJSYWRpdXM7XG4gICAgICBsZXQgcGllU3RhcnRBbmdsZSA9IDA7XG4gICAgICBsZXQgcGllRW5kQW5nbGU7XG4gICAgICBmb3IgKGNvbnN0IHYgb2YgYWRhdHVtW3RdKSB7XG4gICAgICAgIGNvbnN0IHZhbCA9IHN0YXRlLmRpc2FibGVkW2FyY0lkICUgbnVtR3JvdXBzXSA/IDAgOiB2LnZhbHVlO1xuICAgICAgICBjb25zdCB7IG5hbWUsIHRpbWUgfSA9IHY7XG4gICAgICAgIHYuaWQgPSBhcmNJZDtcbiAgICAgICAgb3V0ZXJSYWRpdXMgPSBjb21wdXRlT3V0ZXJSYWRpdXModmFsLCBpbm5lclJhZGl1cyk7XG4gICAgICAgIGFyY1N0LmRhdGEucHVzaCh7IHN0YXJ0QW5nbGUsIGVuZEFuZ2xlLCBpbm5lclJhZGl1cywgb3V0ZXJSYWRpdXMsIG5hbWUsIGFyY0lkLCB2YWwsIHRpbWUgfSk7XG4gICAgICAgIGFyY1N0LmV4dGVuZFthcmNJZF0gPSB7XG4gICAgICAgICAgc3RhcnRBbmdsZSxcbiAgICAgICAgICBlbmRBbmdsZSxcbiAgICAgICAgICBpbm5lclJhZGl1cyxcbiAgICAgICAgICBuYW1lLFxuICAgICAgICAgIG91dGVyUmFkaXVzOiBvdXRlclJhZGl1cyArIGdybyxcbiAgICAgICAgfTtcbiAgICAgICAgYXJjU3QucHVzaFthcmNJZF0gPSB7XG4gICAgICAgICAgc3RhcnRBbmdsZSxcbiAgICAgICAgICBlbmRBbmdsZSxcbiAgICAgICAgICBpbm5lclJhZGl1czogaW5uZXJSYWRpdXMgKyBncm8sXG4gICAgICAgICAgb3V0ZXJSYWRpdXM6IG91dGVyUmFkaXVzICsgZ3JvLFxuICAgICAgICB9O1xuICAgICAgICBhcmNTdC5waWVTdGFydFthcmNJZF0gPSB7XG4gICAgICAgICAgc3RhcnRBbmdsZSxcbiAgICAgICAgICBlbmRBbmdsZSxcbiAgICAgICAgICBpbm5lclJhZGl1czogbWluaSAqIG1heFJhZGl1cyxcbiAgICAgICAgICBvdXRlclJhZGl1czogbWF4UmFkaXVzLFxuICAgICAgICB9O1xuICAgICAgICBhcmNTdC5taW5pW2FyY0lkXSA9IHtcbiAgICAgICAgICBzdGFydEFuZ2xlLFxuICAgICAgICAgIGVuZEFuZ2xlLFxuICAgICAgICAgIGlubmVyUmFkaXVzOiBpbm5lclJhZGl1cyAqIG1pbmksXG4gICAgICAgICAgb3V0ZXJSYWRpdXM6IG91dGVyUmFkaXVzICogbWluaSxcbiAgICAgICAgfTtcbiAgICAgICAgYXJjSWQgKz0gMTtcbiAgICAgICAgaW5uZXJSYWRpdXMgPSBvdXRlclJhZGl1cztcbiAgICAgIH1cbiAgICAgIGNvbnN0IGxhYmVsQXJjID0geyAuLi5hcmNTdC5kYXRhW2kgKiBudW1Hcm91cHNdIH07XG4gICAgICBsYWJlbEFyYy5vdXRlclJhZGl1cyA9IG1heFJhZGl1cyArIDIwO1xuICAgICAgbGFiZWxBcmMuaW5uZXJSYWRpdXMgPSBtYXhSYWRpdXMgKyAxNTtcbiAgICAgIGFyY1N0LmxhYmVscy5wdXNoKGxhYmVsQXJjKTtcbiAgICAgIGZvciAoY29uc3QgdiBvZiBhZGF0dW1bdF0uY29uY2F0KCkuc29ydChzb3J0VmFsdWVzKSkge1xuICAgICAgICBjb25zdCB2YWwgPSBzdGF0ZS5kaXNhYmxlZFt2LmlkICUgbnVtR3JvdXBzXSA/IDAgOiB2LnZhbHVlO1xuICAgICAgICBwaWVFbmRBbmdsZSA9IEcgKiB2YWwgKyBwaWVTdGFydEFuZ2xlO1xuICAgICAgICBhcmNTdC5waWVbdi5pZF0gPSB7XG4gICAgICAgICAgc3RhcnRBbmdsZTogcGllU3RhcnRBbmdsZSxcbiAgICAgICAgICBlbmRBbmdsZTogcGllRW5kQW5nbGUsXG4gICAgICAgICAgaW5uZXJSYWRpdXM6IG1heFJhZGl1cyAqIG1pbmksXG4gICAgICAgICAgb3V0ZXJSYWRpdXM6IG1heFJhZGl1cyxcbiAgICAgICAgICBwZXJjZW50OiB2LnZhbHVlIC8gc3Vtc1tpXSxcbiAgICAgICAgfTtcbiAgICAgICAgYXJjU3QucGllT3Zlclt2LmlkXSA9IHtcbiAgICAgICAgICBzdGFydEFuZ2xlOiBwaWVTdGFydEFuZ2xlLFxuICAgICAgICAgIGVuZEFuZ2xlOiBwaWVFbmRBbmdsZSxcbiAgICAgICAgICBpbm5lclJhZGl1czogbWF4UmFkaXVzICogbWluaSxcbiAgICAgICAgICBvdXRlclJhZGl1czogbWF4UmFkaXVzICsgZ3JvLFxuICAgICAgICB9O1xuICAgICAgICBwaWVTdGFydEFuZ2xlID0gcGllRW5kQW5nbGU7XG4gICAgICB9XG4gICAgfVxuICAgIGFyY1N0Lmdyb3VwTGFiZWxzID0gYXJjU3QuZGF0YS5zbGljZSgwLCBudW1Hcm91cHMpO1xuXG4gICAgcmV0dXJuIGFyY1N0O1xuICB9XG5cbiAgbGV0IGFyY1N0ID0gY29tcHV0ZUFyY1N0YXRlcyhkYXR1bSk7XG5cbiAgZnVuY3Rpb24gdHdlZW4odGFyZ2V0LCByZXNGdW5jKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIGRvVHdlZW4oZCkge1xuICAgICAgY29uc3QgaW50ZXJwb2xhdGUgPSBkMy5pbnRlcnBvbGF0ZShjb3B5QXJjKGQpLCBjb3B5QXJjKHRhcmdldCkpO1xuXG4gICAgICByZXR1cm4gdCA9PiByZXNGdW5jKE9iamVjdC5hc3NpZ24oZCwgaW50ZXJwb2xhdGUodCkpKTtcbiAgICB9O1xuICB9XG5cbiAgZnVuY3Rpb24gYXJjVHdlZW4odGFyZ2V0KSB7XG4gICAgcmV0dXJuIHR3ZWVuKHRhcmdldCwgZCA9PiBhcmMoZCkpO1xuICB9XG5cbiAgZnVuY3Rpb24gdHJhbnNsYXRlVHdlZW4odGFyZ2V0KSB7XG4gICAgcmV0dXJuIHR3ZWVuKHRhcmdldCwgZCA9PiBgdHJhbnNsYXRlKCR7YXJjLmNlbnRyb2lkKGQpfSlgKTtcbiAgfVxuXG4gIC8vIEdyYWIgdGhlIElEIHJhbmdlIG9mIHNlZ21lbnRzIHN0YW5kIGJldHdlZW5cbiAgLy8gdGhpcyBzZWdtZW50IGFuZCB0aGUgZWRnZSBvZiB0aGUgY2lyY2xlXG4gIGNvbnN0IHNlZ21lbnRzVG9FZGdlQ2FjaGUgPSB7fTtcbiAgZnVuY3Rpb24gZ2V0U2VnbWVudHNUb0VkZ2UoYXJjSWQpIHtcbiAgICBpZiAoc2VnbWVudHNUb0VkZ2VDYWNoZVthcmNJZF0pIHtcbiAgICAgIHJldHVybiBzZWdtZW50c1RvRWRnZUNhY2hlW2FyY0lkXTtcbiAgICB9XG4gICAgY29uc3QgdGltZUluZGV4ID0gTWF0aC5mbG9vcihhcmNJZCAvIG51bUdyb3Vwcyk7XG4gICAgc2VnbWVudHNUb0VkZ2VDYWNoZVthcmNJZF0gPSBbYXJjSWQgKyAxLCBudW1Hcm91cHMgKiAodGltZUluZGV4ICsgMSkgLSAxXTtcblxuICAgIHJldHVybiBzZWdtZW50c1RvRWRnZUNhY2hlW2FyY0lkXTtcbiAgfVxuXG4gIC8vIEdldCB0aGUgSURzIG9mIGFsbCBzZWdtZW50cyBpbiBhIHRpbWVJbmRleFxuICBjb25zdCBzZWdtZW50c0luVGltZUNhY2hlID0ge307XG4gIGZ1bmN0aW9uIGdldFNlZ21lbnRzSW5UaW1lKGFyY0lkKSB7XG4gICAgaWYgKHNlZ21lbnRzSW5UaW1lQ2FjaGVbYXJjSWRdKSB7XG4gICAgICByZXR1cm4gc2VnbWVudHNJblRpbWVDYWNoZVthcmNJZF07XG4gICAgfVxuICAgIGNvbnN0IHRpbWVJbmRleCA9IE1hdGguZmxvb3IoYXJjSWQgLyBudW1Hcm91cHMpO1xuICAgIHNlZ21lbnRzSW5UaW1lQ2FjaGVbYXJjSWRdID0gW3RpbWVJbmRleCAqIG51bUdyb3VwcywgKHRpbWVJbmRleCArIDEpICogbnVtR3JvdXBzIC0gMV07XG5cbiAgICByZXR1cm4gc2VnbWVudHNJblRpbWVDYWNoZVthcmNJZF07XG4gIH1cblxuICBsZXQgY2xpY2tJZCA9IC0xO1xuICBsZXQgaW5UcmFuc2l0aW9uID0gZmFsc2U7XG4gIGNvbnN0IGFlID0gcm9zZVdyYXBcbiAgICAuc2VsZWN0QWxsKCdnJylcbiAgICAuZGF0YShKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGFyY1N0LmRhdGEpKSkgLy8gZGVlcCBjb3B5IGRhdGEgc3RhdGVcbiAgICAuZW50ZXIoKVxuICAgIC5hcHBlbmQoJ2cnKVxuICAgIC5hdHRyKCdjbGFzcycsICdzZWdtZW50JylcbiAgICAuY2xhc3NlZCgnY2xpY2thYmxlJywgdHJ1ZSlcbiAgICAub24oJ21vdXNlb3ZlcicsIG1vdXNlb3ZlcilcbiAgICAub24oJ21vdXNlb3V0JywgbW91c2VvdXQpXG4gICAgLm9uKCdtb3VzZW1vdmUnLCBtb3VzZW1vdmUpXG4gICAgLm9uKCdjbGljaycsIGNsaWNrKTtcblxuICBjb25zdCBsYWJlbHMgPSBsYWJlbHNXcmFwXG4gICAgLnNlbGVjdEFsbCgnZycpXG4gICAgLmRhdGEoSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShhcmNTdC5sYWJlbHMpKSlcbiAgICAuZW50ZXIoKVxuICAgIC5hcHBlbmQoJ2cnKVxuICAgIC5hdHRyKCdjbGFzcycsICdyb3NlTGFiZWwnKVxuICAgIC5hdHRyKCd0cmFuc2Zvcm0nLCBkID0+IGB0cmFuc2xhdGUoJHthcmMuY2VudHJvaWQoZCl9KWApO1xuXG4gIGxhYmVsc1xuICAgIC5hcHBlbmQoJ3RleHQnKVxuICAgIC5zdHlsZSgndGV4dC1hbmNob3InLCAnbWlkZGxlJylcbiAgICAuc3R5bGUoJ2ZpbGwnLCAnIzAwMCcpXG4gICAgLnRleHQoZCA9PiB0aW1lRm9ybWF0KGQudGltZSkpO1xuXG4gIGNvbnN0IGdyb3VwTGFiZWxzID0gZ3JvdXBMYWJlbHNXcmFwXG4gICAgLnNlbGVjdEFsbCgnZycpXG4gICAgLmRhdGEoSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShhcmNTdC5ncm91cExhYmVscykpKVxuICAgIC5lbnRlcigpXG4gICAgLmFwcGVuZCgnZycpO1xuXG4gIGdyb3VwTGFiZWxzXG4gICAgLnN0eWxlKCdvcGFjaXR5JywgMClcbiAgICAuYXR0cignY2xhc3MnLCAncm9zZUdyb3VwTGFiZWxzJylcbiAgICAuYXBwZW5kKCd0ZXh0JylcbiAgICAuc3R5bGUoJ3RleHQtYW5jaG9yJywgJ21pZGRsZScpXG4gICAgLnN0eWxlKCdmaWxsJywgJyMwMDAnKVxuICAgIC50ZXh0KGQgPT4gZC5uYW1lKTtcblxuICBjb25zdCBhcmNzID0gYWVcbiAgICAuYXBwZW5kKCdwYXRoJylcbiAgICAuYXR0cignY2xhc3MnLCAnYXJjJylcbiAgICAuYXR0cignZmlsbCcsIGQgPT4gY29sb3JGbihkLm5hbWUpKVxuICAgIC5hdHRyKCdkJywgYXJjKTtcblxuICBmdW5jdGlvbiBtb3VzZW1vdmUoKSB7XG4gICAgdG9vbHRpcCgpO1xuICB9XG5cbiAgZnVuY3Rpb24gbW91c2VvdmVyKGIsIGkpIHtcbiAgICB0b29sdGlwLmRhdGEodG9vbHRpcERhdGEoYiwgaSwgZGF0dW0pKS5oaWRkZW4oZmFsc2UpO1xuICAgIGNvbnN0ICR0aGlzID0gZDMuc2VsZWN0KHRoaXMpO1xuICAgICR0aGlzLmNsYXNzZWQoJ2hvdmVyJywgdHJ1ZSk7XG4gICAgaWYgKGNsaWNrSWQgPCAwICYmICFpblRyYW5zaXRpb24pIHtcbiAgICAgICR0aGlzXG4gICAgICAgIC5zZWxlY3QoJ3BhdGgnKVxuICAgICAgICAuaW50ZXJydXB0KClcbiAgICAgICAgLnRyYW5zaXRpb24oKVxuICAgICAgICAuZHVyYXRpb24oMTgwKVxuICAgICAgICAuYXR0clR3ZWVuKCdkJywgYXJjVHdlZW4oYXJjU3QuZXh0ZW5kW2ldKSk7XG4gICAgICBjb25zdCBlZGdlID0gZ2V0U2VnbWVudHNUb0VkZ2UoaSk7XG4gICAgICBhcmNzXG4gICAgICAgIC5maWx0ZXIoZCA9PiBlZGdlWzBdIDw9IGQuYXJjSWQgJiYgZC5hcmNJZCA8PSBlZGdlWzFdKVxuICAgICAgICAuaW50ZXJydXB0KClcbiAgICAgICAgLnRyYW5zaXRpb24oKVxuICAgICAgICAuZHVyYXRpb24oMTgwKVxuICAgICAgICAuYXR0clR3ZWVuKCdkJywgZCA9PiBhcmNUd2VlbihhcmNTdC5wdXNoW2QuYXJjSWRdKShkKSk7XG4gICAgfSBlbHNlIGlmICghaW5UcmFuc2l0aW9uKSB7XG4gICAgICBjb25zdCBzZWdtZW50cyA9IGdldFNlZ21lbnRzSW5UaW1lKGNsaWNrSWQpO1xuICAgICAgaWYgKHNlZ21lbnRzWzBdIDw9IGIuYXJjSWQgJiYgYi5hcmNJZCA8PSBzZWdtZW50c1sxXSkge1xuICAgICAgICAkdGhpc1xuICAgICAgICAgIC5zZWxlY3QoJ3BhdGgnKVxuICAgICAgICAgIC5pbnRlcnJ1cHQoKVxuICAgICAgICAgIC50cmFuc2l0aW9uKClcbiAgICAgICAgICAuZHVyYXRpb24oMTgwKVxuICAgICAgICAgIC5hdHRyVHdlZW4oJ2QnLCBhcmNUd2VlbihhcmNTdC5waWVPdmVyW2ldKSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gbW91c2VvdXQoYiwgaSkge1xuICAgIHRvb2x0aXAuaGlkZGVuKHRydWUpO1xuICAgIGNvbnN0ICR0aGlzID0gZDMuc2VsZWN0KHRoaXMpO1xuICAgICR0aGlzLmNsYXNzZWQoJ2hvdmVyJywgZmFsc2UpO1xuICAgIGlmIChjbGlja0lkIDwgMCAmJiAhaW5UcmFuc2l0aW9uKSB7XG4gICAgICAkdGhpc1xuICAgICAgICAuc2VsZWN0KCdwYXRoJylcbiAgICAgICAgLmludGVycnVwdCgpXG4gICAgICAgIC50cmFuc2l0aW9uKClcbiAgICAgICAgLmR1cmF0aW9uKDE4MClcbiAgICAgICAgLmF0dHJUd2VlbignZCcsIGFyY1R3ZWVuKGFyY1N0LmRhdGFbaV0pKTtcbiAgICAgIGNvbnN0IGVkZ2UgPSBnZXRTZWdtZW50c1RvRWRnZShpKTtcbiAgICAgIGFyY3NcbiAgICAgICAgLmZpbHRlcihkID0+IGVkZ2VbMF0gPD0gZC5hcmNJZCAmJiBkLmFyY0lkIDw9IGVkZ2VbMV0pXG4gICAgICAgIC5pbnRlcnJ1cHQoKVxuICAgICAgICAudHJhbnNpdGlvbigpXG4gICAgICAgIC5kdXJhdGlvbigxODApXG4gICAgICAgIC5hdHRyVHdlZW4oJ2QnLCBkID0+IGFyY1R3ZWVuKGFyY1N0LmRhdGFbZC5hcmNJZF0pKGQpKTtcbiAgICB9IGVsc2UgaWYgKCFpblRyYW5zaXRpb24pIHtcbiAgICAgIGNvbnN0IHNlZ21lbnRzID0gZ2V0U2VnbWVudHNJblRpbWUoY2xpY2tJZCk7XG4gICAgICBpZiAoc2VnbWVudHNbMF0gPD0gYi5hcmNJZCAmJiBiLmFyY0lkIDw9IHNlZ21lbnRzWzFdKSB7XG4gICAgICAgICR0aGlzXG4gICAgICAgICAgLnNlbGVjdCgncGF0aCcpXG4gICAgICAgICAgLmludGVycnVwdCgpXG4gICAgICAgICAgLnRyYW5zaXRpb24oKVxuICAgICAgICAgIC5kdXJhdGlvbigxODApXG4gICAgICAgICAgLmF0dHJUd2VlbignZCcsIGFyY1R3ZWVuKGFyY1N0LnBpZVtpXSkpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGNsaWNrKGIsIGkpIHtcbiAgICBpZiAoaW5UcmFuc2l0aW9uKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IGRlbGF5ID0gZDMuZXZlbnQuYWx0S2V5ID8gMzc1MCA6IDM3NTtcbiAgICBjb25zdCBzZWdtZW50cyA9IGdldFNlZ21lbnRzSW5UaW1lKGkpO1xuICAgIGlmIChjbGlja0lkIDwgMCkge1xuICAgICAgaW5UcmFuc2l0aW9uID0gdHJ1ZTtcbiAgICAgIGNsaWNrSWQgPSBpO1xuICAgICAgbGFiZWxzXG4gICAgICAgIC5pbnRlcnJ1cHQoKVxuICAgICAgICAudHJhbnNpdGlvbigpXG4gICAgICAgIC5kdXJhdGlvbihkZWxheSlcbiAgICAgICAgLmF0dHJUd2VlbigndHJhbnNmb3JtJywgZCA9PlxuICAgICAgICAgIHRyYW5zbGF0ZVR3ZWVuKHtcbiAgICAgICAgICAgIG91dGVyUmFkaXVzOiAwLFxuICAgICAgICAgICAgaW5uZXJSYWRpdXM6IDAsXG4gICAgICAgICAgICBzdGFydEFuZ2xlOiBkLnN0YXJ0QW5nbGUsXG4gICAgICAgICAgICBlbmRBbmdsZTogZC5lbmRBbmdsZSxcbiAgICAgICAgICB9KShkKSxcbiAgICAgICAgKVxuICAgICAgICAuc3R5bGUoJ29wYWNpdHknLCAwKTtcbiAgICAgIGdyb3VwTGFiZWxzXG4gICAgICAgIC5hdHRyKFxuICAgICAgICAgICd0cmFuc2Zvcm0nLFxuICAgICAgICAgIGB0cmFuc2xhdGUoJHthcmMuY2VudHJvaWQoe1xuICAgICAgICAgICAgb3V0ZXJSYWRpdXM6IG1heFJhZGl1cyArIDIwLFxuICAgICAgICAgICAgaW5uZXJSYWRpdXM6IG1heFJhZGl1cyArIDE1LFxuICAgICAgICAgICAgc3RhcnRBbmdsZTogYXJjU3QuZGF0YVtpXS5zdGFydEFuZ2xlLFxuICAgICAgICAgICAgZW5kQW5nbGU6IGFyY1N0LmRhdGFbaV0uZW5kQW5nbGUsXG4gICAgICAgICAgfSl9KWAsXG4gICAgICAgIClcbiAgICAgICAgLmludGVycnVwdCgpXG4gICAgICAgIC50cmFuc2l0aW9uKClcbiAgICAgICAgLmRlbGF5KGRlbGF5KVxuICAgICAgICAuZHVyYXRpb24oZGVsYXkpXG4gICAgICAgIC5hdHRyVHdlZW4oJ3RyYW5zZm9ybScsIGQgPT5cbiAgICAgICAgICB0cmFuc2xhdGVUd2Vlbih7XG4gICAgICAgICAgICBvdXRlclJhZGl1czogbWF4UmFkaXVzICsgMjAsXG4gICAgICAgICAgICBpbm5lclJhZGl1czogbWF4UmFkaXVzICsgMTUsXG4gICAgICAgICAgICBzdGFydEFuZ2xlOiBhcmNTdC5waWVbc2VnbWVudHNbMF0gKyBkLmFyY0lkXS5zdGFydEFuZ2xlLFxuICAgICAgICAgICAgZW5kQW5nbGU6IGFyY1N0LnBpZVtzZWdtZW50c1swXSArIGQuYXJjSWRdLmVuZEFuZ2xlLFxuICAgICAgICAgIH0pKGQpLFxuICAgICAgICApXG4gICAgICAgIC5zdHlsZSgnb3BhY2l0eScsIGQgPT5cbiAgICAgICAgICBzdGF0ZS5kaXNhYmxlZFtkLmFyY0lkXSB8fCBhcmNTdC5waWVbc2VnbWVudHNbMF0gKyBkLmFyY0lkXS5wZXJjZW50IDwgbGFiZWxUaHJlc2hvbGRcbiAgICAgICAgICAgID8gMFxuICAgICAgICAgICAgOiAxLFxuICAgICAgICApO1xuICAgICAgYWUuY2xhc3NlZCgnY2xpY2thYmxlJywgZCA9PiBzZWdtZW50c1swXSA+IGQuYXJjSWQgfHwgZC5hcmNJZCA+IHNlZ21lbnRzWzFdKTtcbiAgICAgIGFyY3NcbiAgICAgICAgLmZpbHRlcihkID0+IHNlZ21lbnRzWzBdIDw9IGQuYXJjSWQgJiYgZC5hcmNJZCA8PSBzZWdtZW50c1sxXSlcbiAgICAgICAgLmludGVycnVwdCgpXG4gICAgICAgIC50cmFuc2l0aW9uKClcbiAgICAgICAgLmR1cmF0aW9uKGRlbGF5KVxuICAgICAgICAuYXR0clR3ZWVuKCdkJywgZCA9PiBhcmNUd2VlbihhcmNTdC5waWVTdGFydFtkLmFyY0lkXSkoZCkpXG4gICAgICAgIC50cmFuc2l0aW9uKClcbiAgICAgICAgLmR1cmF0aW9uKGRlbGF5KVxuICAgICAgICAuYXR0clR3ZWVuKCdkJywgZCA9PiBhcmNUd2VlbihhcmNTdC5waWVbZC5hcmNJZF0pKGQpKVxuICAgICAgICAuZWFjaCgnZW5kJywgKCkgPT4ge1xuICAgICAgICAgIGluVHJhbnNpdGlvbiA9IGZhbHNlO1xuICAgICAgICB9KTtcbiAgICAgIGFyY3NcbiAgICAgICAgLmZpbHRlcihkID0+IHNlZ21lbnRzWzBdID4gZC5hcmNJZCB8fCBkLmFyY0lkID4gc2VnbWVudHNbMV0pXG4gICAgICAgIC5pbnRlcnJ1cHQoKVxuICAgICAgICAudHJhbnNpdGlvbigpXG4gICAgICAgIC5kdXJhdGlvbihkZWxheSlcbiAgICAgICAgLmF0dHJUd2VlbignZCcsIGQgPT4gYXJjVHdlZW4oYXJjU3QubWluaVtkLmFyY0lkXSkoZCkpO1xuICAgIH0gZWxzZSBpZiAoY2xpY2tJZCA8IHNlZ21lbnRzWzBdIHx8IHNlZ21lbnRzWzFdIDwgY2xpY2tJZCkge1xuICAgICAgaW5UcmFuc2l0aW9uID0gdHJ1ZTtcbiAgICAgIGNvbnN0IGNsaWNrU2VnbWVudHMgPSBnZXRTZWdtZW50c0luVGltZShjbGlja0lkKTtcbiAgICAgIGxhYmVsc1xuICAgICAgICAuaW50ZXJydXB0KClcbiAgICAgICAgLnRyYW5zaXRpb24oKVxuICAgICAgICAuZGVsYXkoZGVsYXkpXG4gICAgICAgIC5kdXJhdGlvbihkZWxheSlcbiAgICAgICAgLmF0dHJUd2VlbigndHJhbnNmb3JtJywgZCA9PiB0cmFuc2xhdGVUd2VlbihhcmNTdC5sYWJlbHNbZC5hcmNJZCAvIG51bUdyb3Vwc10pKGQpKVxuICAgICAgICAuc3R5bGUoJ29wYWNpdHknLCAxKTtcbiAgICAgIGdyb3VwTGFiZWxzXG4gICAgICAgIC5pbnRlcnJ1cHQoKVxuICAgICAgICAudHJhbnNpdGlvbigpXG4gICAgICAgIC5kdXJhdGlvbihkZWxheSlcbiAgICAgICAgLmF0dHJUd2VlbihcbiAgICAgICAgICAndHJhbnNmb3JtJyxcbiAgICAgICAgICB0cmFuc2xhdGVUd2Vlbih7XG4gICAgICAgICAgICBvdXRlclJhZGl1czogbWF4UmFkaXVzICsgMjAsXG4gICAgICAgICAgICBpbm5lclJhZGl1czogbWF4UmFkaXVzICsgMTUsXG4gICAgICAgICAgICBzdGFydEFuZ2xlOiBhcmNTdC5kYXRhW2NsaWNrSWRdLnN0YXJ0QW5nbGUsXG4gICAgICAgICAgICBlbmRBbmdsZTogYXJjU3QuZGF0YVtjbGlja0lkXS5lbmRBbmdsZSxcbiAgICAgICAgICB9KSxcbiAgICAgICAgKVxuICAgICAgICAuc3R5bGUoJ29wYWNpdHknLCAwKTtcbiAgICAgIGFlLmNsYXNzZWQoJ2NsaWNrYWJsZScsIHRydWUpO1xuICAgICAgYXJjc1xuICAgICAgICAuZmlsdGVyKGQgPT4gY2xpY2tTZWdtZW50c1swXSA8PSBkLmFyY0lkICYmIGQuYXJjSWQgPD0gY2xpY2tTZWdtZW50c1sxXSlcbiAgICAgICAgLmludGVycnVwdCgpXG4gICAgICAgIC50cmFuc2l0aW9uKClcbiAgICAgICAgLmR1cmF0aW9uKGRlbGF5KVxuICAgICAgICAuYXR0clR3ZWVuKCdkJywgZCA9PiBhcmNUd2VlbihhcmNTdC5waWVTdGFydFtkLmFyY0lkXSkoZCkpXG4gICAgICAgIC50cmFuc2l0aW9uKClcbiAgICAgICAgLmR1cmF0aW9uKGRlbGF5KVxuICAgICAgICAuYXR0clR3ZWVuKCdkJywgZCA9PiBhcmNUd2VlbihhcmNTdC5kYXRhW2QuYXJjSWRdKShkKSlcbiAgICAgICAgLmVhY2goJ2VuZCcsICgpID0+IHtcbiAgICAgICAgICBjbGlja0lkID0gLTE7XG4gICAgICAgICAgaW5UcmFuc2l0aW9uID0gZmFsc2U7XG4gICAgICAgIH0pO1xuICAgICAgYXJjc1xuICAgICAgICAuZmlsdGVyKGQgPT4gY2xpY2tTZWdtZW50c1swXSA+IGQuYXJjSWQgfHwgZC5hcmNJZCA+IGNsaWNrU2VnbWVudHNbMV0pXG4gICAgICAgIC5pbnRlcnJ1cHQoKVxuICAgICAgICAudHJhbnNpdGlvbigpXG4gICAgICAgIC5kZWxheShkZWxheSlcbiAgICAgICAgLmR1cmF0aW9uKGRlbGF5KVxuICAgICAgICAuYXR0clR3ZWVuKCdkJywgZCA9PiBhcmNUd2VlbihhcmNTdC5kYXRhW2QuYXJjSWRdKShkKSk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gdXBkYXRlQWN0aXZlKCkge1xuICAgIGNvbnN0IGRlbGF5ID0gZDMuZXZlbnQuYWx0S2V5ID8gMzAwMCA6IDMwMDtcbiAgICBsZWdlbmRXcmFwLmRhdHVtKGxlZ2VuZERhdGEoZGF0dW0pKS5jYWxsKGxlZ2VuZCk7XG4gICAgY29uc3QgbkFyY1N0ID0gY29tcHV0ZUFyY1N0YXRlcyhkYXR1bSk7XG4gICAgaW5UcmFuc2l0aW9uID0gdHJ1ZTtcbiAgICBpZiAoY2xpY2tJZCA8IDApIHtcbiAgICAgIGFyY3NcbiAgICAgICAgLnN0eWxlKCdvcGFjaXR5JywgMSlcbiAgICAgICAgLmludGVycnVwdCgpXG4gICAgICAgIC50cmFuc2l0aW9uKClcbiAgICAgICAgLmR1cmF0aW9uKGRlbGF5KVxuICAgICAgICAuYXR0clR3ZWVuKCdkJywgZCA9PiBhcmNUd2VlbihuQXJjU3QuZGF0YVtkLmFyY0lkXSkoZCkpXG4gICAgICAgIC5lYWNoKCdlbmQnLCAoKSA9PiB7XG4gICAgICAgICAgaW5UcmFuc2l0aW9uID0gZmFsc2U7XG4gICAgICAgICAgYXJjU3QgPSBuQXJjU3Q7XG4gICAgICAgIH0pXG4gICAgICAgIC50cmFuc2l0aW9uKClcbiAgICAgICAgLmR1cmF0aW9uKDApXG4gICAgICAgIC5zdHlsZSgnb3BhY2l0eScsIGQgPT4gKHN0YXRlLmRpc2FibGVkW2QuYXJjSWQgJSBudW1Hcm91cHNdID8gMCA6IDEpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3Qgc2VnbWVudHMgPSBnZXRTZWdtZW50c0luVGltZShjbGlja0lkKTtcbiAgICAgIGFyY3NcbiAgICAgICAgLnN0eWxlKCdvcGFjaXR5JywgMSlcbiAgICAgICAgLmludGVycnVwdCgpXG4gICAgICAgIC50cmFuc2l0aW9uKClcbiAgICAgICAgLmR1cmF0aW9uKGRlbGF5KVxuICAgICAgICAuYXR0clR3ZWVuKCdkJywgZCA9PlxuICAgICAgICAgIHNlZ21lbnRzWzBdIDw9IGQuYXJjSWQgJiYgZC5hcmNJZCA8PSBzZWdtZW50c1sxXVxuICAgICAgICAgICAgPyBhcmNUd2VlbihuQXJjU3QucGllW2QuYXJjSWRdKShkKVxuICAgICAgICAgICAgOiBhcmNUd2VlbihuQXJjU3QubWluaVtkLmFyY0lkXSkoZCksXG4gICAgICAgIClcbiAgICAgICAgLmVhY2goJ2VuZCcsICgpID0+IHtcbiAgICAgICAgICBpblRyYW5zaXRpb24gPSBmYWxzZTtcbiAgICAgICAgICBhcmNTdCA9IG5BcmNTdDtcbiAgICAgICAgfSlcbiAgICAgICAgLnRyYW5zaXRpb24oKVxuICAgICAgICAuZHVyYXRpb24oMClcbiAgICAgICAgLnN0eWxlKCdvcGFjaXR5JywgZCA9PiAoc3RhdGUuZGlzYWJsZWRbZC5hcmNJZCAlIG51bUdyb3Vwc10gPyAwIDogMSkpO1xuICAgICAgZ3JvdXBMYWJlbHNcbiAgICAgICAgLmludGVycnVwdCgpXG4gICAgICAgIC50cmFuc2l0aW9uKClcbiAgICAgICAgLmR1cmF0aW9uKGRlbGF5KVxuICAgICAgICAuYXR0clR3ZWVuKCd0cmFuc2Zvcm0nLCBkID0+XG4gICAgICAgICAgdHJhbnNsYXRlVHdlZW4oe1xuICAgICAgICAgICAgb3V0ZXJSYWRpdXM6IG1heFJhZGl1cyArIDIwLFxuICAgICAgICAgICAgaW5uZXJSYWRpdXM6IG1heFJhZGl1cyArIDE1LFxuICAgICAgICAgICAgc3RhcnRBbmdsZTogbkFyY1N0LnBpZVtzZWdtZW50c1swXSArIGQuYXJjSWRdLnN0YXJ0QW5nbGUsXG4gICAgICAgICAgICBlbmRBbmdsZTogbkFyY1N0LnBpZVtzZWdtZW50c1swXSArIGQuYXJjSWRdLmVuZEFuZ2xlLFxuICAgICAgICAgIH0pKGQpLFxuICAgICAgICApXG4gICAgICAgIC5zdHlsZSgnb3BhY2l0eScsIGQgPT5cbiAgICAgICAgICBzdGF0ZS5kaXNhYmxlZFtkLmFyY0lkXSB8fCBhcmNTdC5waWVbc2VnbWVudHNbMF0gKyBkLmFyY0lkXS5wZXJjZW50IDwgbGFiZWxUaHJlc2hvbGRcbiAgICAgICAgICAgID8gMFxuICAgICAgICAgICAgOiAxLFxuICAgICAgICApO1xuICAgIH1cbiAgfVxuXG4gIGxlZ2VuZC5kaXNwYXRjaC5vbignc3RhdGVDaGFuZ2UnLCBuZXdTdGF0ZSA9PiB7XG4gICAgaWYgKHN0YXRlLmRpc2FibGVkICE9PSBuZXdTdGF0ZS5kaXNhYmxlZCkge1xuICAgICAgc3RhdGUuZGlzYWJsZWQgPSBuZXdTdGF0ZS5kaXNhYmxlZDtcbiAgICAgIHVwZGF0ZUFjdGl2ZSgpO1xuICAgIH1cbiAgfSk7XG59XG5cblJvc2UuZGlzcGxheU5hbWUgPSAnUm9zZSc7XG5Sb3NlLnByb3BUeXBlcyA9IHByb3BUeXBlcztcblxuZXhwb3J0IGRlZmF1bHQgUm9zZTtcbiIsIi8qKlxuICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0aW9uIChBU0YpIHVuZGVyIG9uZVxuICogb3IgbW9yZSBjb250cmlidXRvciBsaWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlXG4gKiBkaXN0cmlidXRlZCB3aXRoIHRoaXMgd29yayBmb3IgYWRkaXRpb25hbCBpbmZvcm1hdGlvblxuICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUgQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZVxuICogdG8geW91IHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZVxuICogXCJMaWNlbnNlXCIpOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlXG4gKiB3aXRoIHRoZSBMaWNlbnNlLiAgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsXG4gKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhblxuICogXCJBUyBJU1wiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTllcbiAqIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuICBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZVxuICogc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9uc1xuICogdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbmltcG9ydCB7IHJlYWN0aWZ5IH0gZnJvbSAnQHN1cGVyc2V0LXVpL2NvcmUnO1xuaW1wb3J0IENvbXBvbmVudCBmcm9tICcuL1Jvc2UnO1xuXG5leHBvcnQgZGVmYXVsdCByZWFjdGlmeShDb21wb25lbnQpO1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBWUE7QUFtQ0E7QUEyRkE7QUFBQTtBQUFBO0FBQUE7QUFpSUE7QUFDQTtBQVlBO0FBYUE7O0FDdFRBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///2499\n')}}]);