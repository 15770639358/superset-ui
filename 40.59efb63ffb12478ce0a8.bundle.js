(window.webpackJsonp=window.webpackJsonp||[]).push([[40],{2330:function(module,exports,__webpack_require__){eval("var api = __webpack_require__(351);\n            var content = __webpack_require__(2331);\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.i, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjMzMC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8vVXNlcnMvZXJpa19yaXR0ZXIvcmVwb3MvZ2l0aHViLmNvbS9hcGFjaGUtc3VwZXJzZXQvc3VwZXJzZXQtdWkvcGx1Z2lucy9sZWdhY3ktcGx1Z2luLWNoYXJ0LXN1bmJ1cnN0L3NyYy9TdW5idXJzdC5jc3M/ZTczMCJdLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgYXBpID0gcmVxdWlyZShcIiEuLi8uLi8uLi9wYWNrYWdlcy9zdXBlcnNldC11aS1kZW1vL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL2luamVjdFN0eWxlc0ludG9TdHlsZVRhZy5qc1wiKTtcbiAgICAgICAgICAgIHZhciBjb250ZW50ID0gcmVxdWlyZShcIiEhLi4vLi4vLi4vcGFja2FnZXMvc3VwZXJzZXQtdWktZGVtby9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L2Nqcy5qcz8/cmVmLS02LTEhLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Bvc3Rjc3MtbG9hZGVyL3NyYy9pbmRleC5qcz8/cG9zdGNzcyEuL1N1bmJ1cnN0LmNzc1wiKTtcblxuICAgICAgICAgICAgY29udGVudCA9IGNvbnRlbnQuX19lc01vZHVsZSA/IGNvbnRlbnQuZGVmYXVsdCA6IGNvbnRlbnQ7XG5cbiAgICAgICAgICAgIGlmICh0eXBlb2YgY29udGVudCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgY29udGVudCA9IFtbbW9kdWxlLmlkLCBjb250ZW50LCAnJ11dO1xuICAgICAgICAgICAgfVxuXG52YXIgb3B0aW9ucyA9IHt9O1xuXG5vcHRpb25zLmluc2VydCA9IFwiaGVhZFwiO1xub3B0aW9ucy5zaW5nbGV0b24gPSBmYWxzZTtcblxudmFyIHVwZGF0ZSA9IGFwaShjb250ZW50LCBvcHRpb25zKTtcblxudmFyIGV4cG9ydGVkID0gY29udGVudC5sb2NhbHMgPyBjb250ZW50LmxvY2FscyA6IHt9O1xuXG5cblxubW9kdWxlLmV4cG9ydHMgPSBleHBvcnRlZDsiXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///2330\n")},2331:function(module,exports,__webpack_require__){eval('// Imports\nvar ___CSS_LOADER_API_IMPORT___ = __webpack_require__(352);\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.i, "/**\\n * Licensed to the Apache Software Foundation (ASF) under one\\n * or more contributor license agreements.  See the NOTICE file\\n * distributed with this work for additional information\\n * regarding copyright ownership.  The ASF licenses this file\\n * to you under the Apache License, Version 2.0 (the\\n * \\"License\\"); you may not use this file except in compliance\\n * with the License.  You may obtain a copy of the License at\\n *\\n *   http://www.apache.org/licenses/LICENSE-2.0\\n *\\n * Unless required by applicable law or agreed to in writing,\\n * software distributed under the License is distributed on an\\n * \\"AS IS\\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\\n * KIND, either express or implied.  See the License for the\\n * specific language governing permissions and limitations\\n * under the License.\\n */\\n.superset-legacy-chart-sunburst text {\\n  text-rendering: optimizeLegibility;\\n}\\n.superset-legacy-chart-sunburst path {\\n  stroke: #ddd;\\n  stroke-width: 0.5px;\\n}\\n.superset-legacy-chart-sunburst .center-label {\\n  text-anchor: middle;\\n  fill: #333;\\n  pointer-events: none;\\n}\\n.superset-legacy-chart-sunburst .path-abs-percent {\\n  font-size: 3em;\\n  font-weight: 700;\\n}\\n.superset-legacy-chart-sunburst .path-cond-percent {\\n  font-size: 2em;\\n}\\n.superset-legacy-chart-sunburst .path-metrics {\\n  color: #777;\\n}\\n.superset-legacy-chart-sunburst .path-ratio {\\n  color: #777;\\n}\\n\\n.superset-legacy-chart-sunburst .breadcrumbs text {\\n  font-weight: 600;\\n  font-size: 1.2em;\\n  text-anchor: middle;\\n  fill: #333;\\n}\\n\\n/* dashboard specific */\\n.dashboard-chart.sunburst {\\n  overflow: visible;\\n}\\n.superset-legacy-chart-sunburst svg {\\n  overflow: visible;\\n}\\n.superset-legacy-chart-sunburst.m text {\\n  font-size: 0.55em;\\n}\\n.superset-legacy-chart-sunburst.s text {\\n  font-size: 0.45em;\\n}\\n.superset-legacy-chart-sunburst.l text {\\n  font-size: 0.75em;\\n}\\n.superset-legacy-chart-sunburst .path-abs-percent {\\n  font-weight: 700;\\n}\\n", ""]);\n// Exports\nmodule.exports = exports;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjMzMS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8vVXNlcnMvZXJpa19yaXR0ZXIvcmVwb3MvZ2l0aHViLmNvbS9hcGFjaGUtc3VwZXJzZXQvc3VwZXJzZXQtdWkvcGx1Z2lucy9sZWdhY3ktcGx1Z2luLWNoYXJ0LXN1bmJ1cnN0L3NyYy9TdW5idXJzdC5jc3M/NWUxNCJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBJbXBvcnRzXG52YXIgX19fQ1NTX0xPQURFUl9BUElfSU1QT1JUX19fID0gcmVxdWlyZShcIi4uLy4uLy4uL3BhY2thZ2VzL3N1cGVyc2V0LXVpLWRlbW8vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9ydW50aW1lL2FwaS5qc1wiKTtcbmV4cG9ydHMgPSBfX19DU1NfTE9BREVSX0FQSV9JTVBPUlRfX18oZmFsc2UpO1xuLy8gTW9kdWxlXG5leHBvcnRzLnB1c2goW21vZHVsZS5pZCwgXCIvKipcXG4gKiBMaWNlbnNlZCB0byB0aGUgQXBhY2hlIFNvZnR3YXJlIEZvdW5kYXRpb24gKEFTRikgdW5kZXIgb25lXFxuICogb3IgbW9yZSBjb250cmlidXRvciBsaWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlXFxuICogZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3JtYXRpb25cXG4gKiByZWdhcmRpbmcgY29weXJpZ2h0IG93bmVyc2hpcC4gIFRoZSBBU0YgbGljZW5zZXMgdGhpcyBmaWxlXFxuICogdG8geW91IHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZVxcbiAqIFxcXCJMaWNlbnNlXFxcIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2VcXG4gKiB3aXRoIHRoZSBMaWNlbnNlLiAgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XFxuICpcXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxcbiAqXFxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLFxcbiAqIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuXFxuICogXFxcIkFTIElTXFxcIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZXFxuICogS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlXFxuICogc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9uc1xcbiAqIHVuZGVyIHRoZSBMaWNlbnNlLlxcbiAqL1xcbi5zdXBlcnNldC1sZWdhY3ktY2hhcnQtc3VuYnVyc3QgdGV4dCB7XFxuICB0ZXh0LXJlbmRlcmluZzogb3B0aW1pemVMZWdpYmlsaXR5O1xcbn1cXG4uc3VwZXJzZXQtbGVnYWN5LWNoYXJ0LXN1bmJ1cnN0IHBhdGgge1xcbiAgc3Ryb2tlOiAjZGRkO1xcbiAgc3Ryb2tlLXdpZHRoOiAwLjVweDtcXG59XFxuLnN1cGVyc2V0LWxlZ2FjeS1jaGFydC1zdW5idXJzdCAuY2VudGVyLWxhYmVsIHtcXG4gIHRleHQtYW5jaG9yOiBtaWRkbGU7XFxuICBmaWxsOiAjMzMzO1xcbiAgcG9pbnRlci1ldmVudHM6IG5vbmU7XFxufVxcbi5zdXBlcnNldC1sZWdhY3ktY2hhcnQtc3VuYnVyc3QgLnBhdGgtYWJzLXBlcmNlbnQge1xcbiAgZm9udC1zaXplOiAzZW07XFxuICBmb250LXdlaWdodDogNzAwO1xcbn1cXG4uc3VwZXJzZXQtbGVnYWN5LWNoYXJ0LXN1bmJ1cnN0IC5wYXRoLWNvbmQtcGVyY2VudCB7XFxuICBmb250LXNpemU6IDJlbTtcXG59XFxuLnN1cGVyc2V0LWxlZ2FjeS1jaGFydC1zdW5idXJzdCAucGF0aC1tZXRyaWNzIHtcXG4gIGNvbG9yOiAjNzc3O1xcbn1cXG4uc3VwZXJzZXQtbGVnYWN5LWNoYXJ0LXN1bmJ1cnN0IC5wYXRoLXJhdGlvIHtcXG4gIGNvbG9yOiAjNzc3O1xcbn1cXG5cXG4uc3VwZXJzZXQtbGVnYWN5LWNoYXJ0LXN1bmJ1cnN0IC5icmVhZGNydW1icyB0ZXh0IHtcXG4gIGZvbnQtd2VpZ2h0OiA2MDA7XFxuICBmb250LXNpemU6IDEuMmVtO1xcbiAgdGV4dC1hbmNob3I6IG1pZGRsZTtcXG4gIGZpbGw6ICMzMzM7XFxufVxcblxcbi8qIGRhc2hib2FyZCBzcGVjaWZpYyAqL1xcbi5kYXNoYm9hcmQtY2hhcnQuc3VuYnVyc3Qge1xcbiAgb3ZlcmZsb3c6IHZpc2libGU7XFxufVxcbi5zdXBlcnNldC1sZWdhY3ktY2hhcnQtc3VuYnVyc3Qgc3ZnIHtcXG4gIG92ZXJmbG93OiB2aXNpYmxlO1xcbn1cXG4uc3VwZXJzZXQtbGVnYWN5LWNoYXJ0LXN1bmJ1cnN0Lm0gdGV4dCB7XFxuICBmb250LXNpemU6IDAuNTVlbTtcXG59XFxuLnN1cGVyc2V0LWxlZ2FjeS1jaGFydC1zdW5idXJzdC5zIHRleHQge1xcbiAgZm9udC1zaXplOiAwLjQ1ZW07XFxufVxcbi5zdXBlcnNldC1sZWdhY3ktY2hhcnQtc3VuYnVyc3QubCB0ZXh0IHtcXG4gIGZvbnQtc2l6ZTogMC43NWVtO1xcbn1cXG4uc3VwZXJzZXQtbGVnYWN5LWNoYXJ0LXN1bmJ1cnN0IC5wYXRoLWFicy1wZXJjZW50IHtcXG4gIGZvbnQtd2VpZ2h0OiA3MDA7XFxufVxcblwiLCBcIlwiXSk7XG4vLyBFeHBvcnRzXG5tb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHM7XG4iXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///2331\n')},2514:function(module,__webpack_exports__,__webpack_require__){"use strict";eval('// ESM COMPAT FLAG\n__webpack_require__.r(__webpack_exports__);\n\n// EXTERNAL MODULE: ../superset-ui-core/src/chart/components/reactify.tsx\nvar reactify = __webpack_require__(1015);\n\n// EXTERNAL MODULE: /Users/erik_ritter/repos/github.com/apache-superset/superset-ui/node_modules/core-js/modules/es.string.replace.js\nvar es_string_replace = __webpack_require__(293);\n\n// EXTERNAL MODULE: /Users/erik_ritter/repos/github.com/apache-superset/superset-ui/node_modules/d3/d3.js\nvar d3 = __webpack_require__(154);\nvar d3_default = /*#__PURE__*/__webpack_require__.n(d3);\n\n// EXTERNAL MODULE: /Users/erik_ritter/repos/github.com/apache-superset/superset-ui/node_modules/prop-types/index.js\nvar prop_types = __webpack_require__(57);\nvar prop_types_default = /*#__PURE__*/__webpack_require__.n(prop_types);\n\n// EXTERNAL MODULE: ../superset-ui-core/src/color/index.ts + 3 modules\nvar color = __webpack_require__(826);\n\n// EXTERNAL MODULE: ../superset-ui-core/src/number-format/NumberFormatterRegistrySingleton.ts\nvar NumberFormatterRegistrySingleton = __webpack_require__(151);\n\n// EXTERNAL MODULE: ../superset-ui-core/src/number-format/NumberFormats.ts\nvar NumberFormats = __webpack_require__(136);\n\n// EXTERNAL MODULE: ../superset-ui-core/src/color/SequentialSchemeRegistrySingleton.ts\nvar SequentialSchemeRegistrySingleton = __webpack_require__(576);\n\n// CONCATENATED MODULE: /Users/erik_ritter/repos/github.com/apache-superset/superset-ui/plugins/legacy-plugin-chart-sunburst/src/utils/wrapSvgText.js\n/*\n  Utility function that takes a d3 svg:text selection and a max width, and splits the\n  text\'s text across multiple tspan lines such that any given line does not exceed max width\n\n  If text does not span multiple lines AND adjustedY is passed,\n  will set the text to the passed val\n*/function wrapSvgText(text,width,adjustedY){// ems\ntext.each(function(){const d3Text=d3_default.a.select(this),words=d3Text.text().split(/\\s+/);let line=[],lineNumber=0;const x=d3Text.attr("x"),y=d3Text.attr("y"),dy=parseFloat(d3Text.attr("dy"));let tspan=d3Text.text(null).append("tspan").attr("x",x).attr("y",y).attr("dy",`${dy}em`),didWrap=!1;words.forEach(word=>{line.push(word);tspan.text(line.join(" "));if(tspan.node().getComputedTextLength()>width){lineNumber+=1;line.pop();// remove word that pushes over the limit\ntspan.text(line.join(" "));line=[word];tspan=d3Text.append("tspan").attr("x",x).attr("y",y).attr("dy",`${lineNumber*1+dy}em`).text(word);didWrap=!0}});if(!didWrap&&"undefined"!=typeof adjustedY){tspan.attr("y",adjustedY)}})}\n// EXTERNAL MODULE: /Users/erik_ritter/repos/github.com/apache-superset/superset-ui/plugins/legacy-plugin-chart-sunburst/src/Sunburst.css\nvar Sunburst = __webpack_require__(2330);\n\n// CONCATENATED MODULE: /Users/erik_ritter/repos/github.com/apache-superset/superset-ui/plugins/legacy-plugin-chart-sunburst/src/Sunburst.js\n/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * "License"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */ /* eslint-disable no-param-reassign, react/sort-prop-types */const propTypes={// Each row is an array of [hierarchy-lvl1, hierarchy-lvl2, metric1, metric2]\n// hierarchy-lvls are string. metrics are number\ndata:prop_types_default.a.arrayOf(prop_types_default.a.array),width:prop_types_default.a.number,height:prop_types_default.a.number,colorScheme:prop_types_default.a.string,linearColorScheme:prop_types_default.a.string,numberFormat:prop_types_default.a.string,metrics:prop_types_default.a.arrayOf(prop_types_default.a.oneOfType([prop_types_default.a.string,prop_types_default.a.object// The metric object\n]))};function metricLabel(metric){return"string"==typeof metric||metric instanceof String?metric:metric.label}// Given a node in a partition layout, return an array of all of its ancestor\n// nodes, highest first, but excluding the root.\nfunction getAncestors(node){const path=[];let current=node;while(current.parent){path.unshift(current);current=current.parent}return path}function buildHierarchy(rows){const root={name:"root",children:[]};// each record [groupby1val, groupby2val, (<string> or 0)n, m1, m2]\nrows.forEach(row=>{const m1=+row[row.length-2],m2=+row[row.length-1],levels=row.slice(0,-2);if(Number.isNaN(m1)){// e.g. if this is a header row\nreturn}let currentNode=root;for(let level=0;level<levels.length;level+=1){const children=currentNode.children||[],nodeName=levels[level].toString(),isLeafNode=level>=levels.length-1||0===levels[level+1];let childNode;if(!isLeafNode){childNode=children.find(child=>child.name===nodeName&&child.level===level);if(!childNode){childNode={name:nodeName,children:[],level};children.push(childNode)}currentNode=childNode}else if(0!==nodeName){// Reached the end of the sequence; create a leaf node.\nchildNode={name:nodeName,m1,m2};children.push(childNode)}}});function recurse(node){if(node.children){let sums,m1=0,m2=0;for(let i=0;i<node.children.length;i+=1){sums=recurse(node.children[i]);m1+=sums[0];m2+=sums[1]}node.m1=m1;node.m2=m2}return[node.m1,node.m2]}recurse(root);return root}function getResponsiveContainerClass(width){if(500<width){return"l"}if(200<width&&500>=width){return"m"}return"s"}function getYOffset(width){if(500<width){return["0","20","40","60"]}if(200<width&&500>=width){return["0","15","30","45"]}return["0","10","20","30"]}// Modified from http://bl.ocks.org/kerryrodden/7090426\nfunction Sunburst_Sunburst(element,props){const container=d3_default.a.select(element),{data,width,height,colorScheme,linearColorScheme,metrics,numberFormat}=props,responsiveClass=getResponsiveContainerClass(width),isSmallWidth="s"===responsiveClass;container.attr("class",`superset-legacy-chart-sunburst ${responsiveClass}`);// vars with shared scope within this function\nconst margin={top:10,right:5,bottom:10,left:5},containerWidth=width,containerHeight=height,breadcrumbHeight=.085*containerHeight,visWidth=containerWidth-margin.left-margin.right,visHeight=containerHeight-margin.top-margin.bottom-breadcrumbHeight,radius=Math.min(visWidth,visHeight)/2;let colorByCategory=!0,maxBreadcrumbs,breadcrumbDims,totalSize,breadcrumbs,vis,arcs,gMiddleText;// color by category if primary/secondary metrics match\n// dom handles\nconst categoricalColorScale=color["b" /* CategoricalColorNamespace */].getScale(colorScheme);let linearColorScale;// Helper + path gen functions\nconst partition=d3_default.a.layout.partition().size([2*Math.PI,radius*radius]).value(d=>d.m1),arc=d3_default.a.svg.arc().startAngle(d=>d.x).endAngle(d=>d.x+d.dx).innerRadius(d=>Math.sqrt(d.y)).outerRadius(d=>Math.sqrt(d.y+d.dy)),formatNum=Object(NumberFormatterRegistrySingleton["c" /* getNumberFormatter */])(numberFormat||NumberFormats["a" /* default */].SI_3_DIGIT),formatPerc=Object(NumberFormatterRegistrySingleton["c" /* getNumberFormatter */])(NumberFormats["a" /* default */].PERCENT_3_POINT);container.select("svg").remove();const svg=container.append("svg:svg").attr("width",containerWidth).attr("height",containerHeight);function createBreadcrumbs(firstRowData){// -2 bc row contains 2x metrics, +extra for %label and buffer\nmaxBreadcrumbs=firstRowData.length-2+1;breadcrumbDims={width:visWidth/maxBreadcrumbs,height:.8*breadcrumbHeight,// more margin\nspacing:3,tipTailWidth:10};breadcrumbs=svg.append("svg:g").attr("class","breadcrumbs").attr("transform",`translate(${margin.left},${margin.top})`);breadcrumbs.append("svg:text").attr("class","end-label")}// Generate a string that describes the points of a breadcrumb polygon.\nfunction breadcrumbPoints(d,i){const points=[];if(isSmallWidth){points.push("0,0");points.push(`${width},0`);points.push(`${width},0`);points.push(`${width},${breadcrumbDims.height}`);points.push(`0,${breadcrumbDims.height}`);if(0<i){// Leftmost breadcrumb; don\'t include 6th vertex.\n// points.push(`${breadcrumbDims.tipTailWidth},${breadcrumbDims.height / 2}`);\n}}else{points.push("0,0");points.push(`${breadcrumbDims.width},0`);points.push(`${breadcrumbDims.width+breadcrumbDims.tipTailWidth},${breadcrumbDims.height/2}`);points.push(`${breadcrumbDims.width},${breadcrumbDims.height}`);points.push(`0,${breadcrumbDims.height}`);if(0<i){// Leftmost breadcrumb; don\'t include 6th vertex.\npoints.push(`${breadcrumbDims.tipTailWidth},${breadcrumbDims.height/2}`)}}return points.join(" ")}function updateBreadcrumbs(sequenceArray,percentageString){const breadcrumbWidth=isSmallWidth?width:breadcrumbDims.width,g=breadcrumbs.selectAll("g").data(sequenceArray,d=>d.name+d.depth),entering=g.enter().append("svg:g");entering.append("svg:polygon").attr("points",breadcrumbPoints).style("fill",d=>colorByCategory?categoricalColorScale(d.name):linearColorScale(d.m2/d.m1));entering.append("svg:text").attr("x",(breadcrumbWidth+breadcrumbDims.tipTailWidth)/2).attr("y",breadcrumbDims.height/4).attr("dy","0.35em").style("fill",d=>{// Make text white or black based on the lightness of the background\nconst col=d3_default.a.hsl(colorByCategory?categoricalColorScale(d.name):linearColorScale(d.m2/d.m1));return .5>col.l?"white":"black"}).attr("class","step-label").text(d=>d.name.replace(/_/g," ")).call(wrapSvgText,breadcrumbWidth,breadcrumbDims.height/2);// Set position for entering and updating nodes.\ng.attr("transform",(d,i)=>{if(isSmallWidth){return`translate(0, ${i*(breadcrumbDims.height+breadcrumbDims.spacing)})`}return`translate(${i*(breadcrumbDims.width+breadcrumbDims.spacing)}, 0)`});// Remove exiting nodes.\ng.exit().remove();// Now move and update the percentage at the end.\nbreadcrumbs.select(".end-label").attr("x",()=>{if(isSmallWidth){return(breadcrumbWidth+breadcrumbDims.tipTailWidth)/2}return(sequenceArray.length+.5)*(breadcrumbDims.width+breadcrumbDims.spacing)}).attr("y",()=>{if(isSmallWidth){return(sequenceArray.length+1)*breadcrumbDims.height}return breadcrumbDims.height/2}).attr("dy","0.35em").text(percentageString);// Make the breadcrumb trail visible, if it\'s hidden.\nbreadcrumbs.style("visibility",null)}// Fade all but the current sequence, and show it in the breadcrumb trail.\nfunction mouseenter(d){const sequenceArray=getAncestors(d),parentOfD=sequenceArray[sequenceArray.length-2]||null,absolutePercentage=(d.m1/totalSize).toPrecision(3),conditionalPercentage=parentOfD?(d.m1/parentOfD.m1).toPrecision(3):null,absolutePercString=formatPerc(absolutePercentage),conditionalPercString=parentOfD?formatPerc(conditionalPercentage):"",yOffsets=getYOffset(width);let offsetIndex=0;// If metrics match, assume we are coloring by category\nconst metricsMatch=1e-5>Math.abs(d.m1-d.m2);gMiddleText.selectAll("*").remove();offsetIndex+=1;gMiddleText.append("text").attr("class","path-abs-percent").attr("y",yOffsets[offsetIndex]).text(`${absolutePercString} of total`);if(conditionalPercString){offsetIndex+=1;gMiddleText.append("text").attr("class","path-cond-percent").attr("y",yOffsets[offsetIndex]).text(`${conditionalPercString} of parent`)}offsetIndex+=1;gMiddleText.append("text").attr("class","path-metrics").attr("y",yOffsets[offsetIndex]).text(`${metricLabel(metrics[0])}: ${formatNum(d.m1)}${metricsMatch?"":`, ${metricLabel(metrics[1])}: ${formatNum(d.m2)}`}`);offsetIndex+=1;gMiddleText.append("text").attr("class","path-ratio").attr("y",yOffsets[offsetIndex]).text(metricsMatch?"":`${metricLabel(metrics[1])}/${metricLabel(metrics[0])}: ${formatPerc(d.m2/d.m1)}`);// Reset and fade all the segments.\narcs.selectAll("path").style("stroke-width",null).style("stroke",null).style("opacity",.3);// Then highlight only those that are an ancestor of the current segment.\narcs.selectAll("path").filter(node=>sequenceArray.includes(node)).style("opacity",1).style("stroke","#aaa");updateBreadcrumbs(sequenceArray,absolutePercString)}// Restore everything to full opacity when moving off the visualization.\nfunction mouseleave(){// Hide the breadcrumb trail\nbreadcrumbs.style("visibility","hidden");gMiddleText.selectAll("*").remove();// Deactivate all segments during transition.\narcs.selectAll("path").on("mouseenter",null);// Transition each segment to full opacity and then reactivate it.\narcs.selectAll("path").transition().duration(200).style("opacity",1).style("stroke",null).style("stroke-width",null).each("end",function(){d3_default.a.select(this).on("mouseenter",mouseenter)})}// Main function to draw and set up the visualization, once we have the data.\nfunction createVisualization(rows){const root=buildHierarchy(rows);maxBreadcrumbs=rows[0].length-2;vis=svg.append("svg:g").attr("class","sunburst-vis").attr("transform","translate("+`${margin.left+visWidth/2},`+`${margin.top+(isSmallWidth?breadcrumbHeight*maxBreadcrumbs:breadcrumbHeight)+visHeight/2}`+")").on("mouseleave",mouseleave);arcs=vis.append("svg:g").attr("id","arcs");gMiddleText=vis.append("svg:g").attr("class","center-label");// Bounding circle underneath the sunburst, to make it easier to detect\n// when the mouse leaves the parent g.\narcs.append("svg:circle").attr("r",radius).style("opacity",0);// For efficiency, filter nodes to keep only those large enough to see.\nconst nodes=partition.nodes(root).filter(d=>.005<d.dx);// 0.005 radians = 0.29 degrees\nif(metrics[0]!==metrics[1]&&metrics[1]){colorByCategory=!1;const ext=d3_default.a.extent(nodes,d=>d.m2/d.m1);linearColorScale=Object(SequentialSchemeRegistrySingleton["a" /* default */])().get(linearColorScheme).createLinearScale(ext)}arcs.selectAll("path").data(nodes).enter().append("svg:path").attr("display",d=>d.depth?null:"none").attr("d",arc).attr("fill-rule","evenodd").style("fill",d=>colorByCategory?categoricalColorScale(d.name):linearColorScale(d.m2/d.m1)).style("opacity",1).on("mouseenter",mouseenter);// Get total size of the tree = value of root node from partition.\ntotalSize=root.value}createBreadcrumbs(data[0]);createVisualization(data)}Sunburst_Sunburst.displayName="Sunburst";Sunburst_Sunburst.propTypes=propTypes;/* harmony default export */ var src_Sunburst = (Sunburst_Sunburst);\n// CONCATENATED MODULE: /Users/erik_ritter/repos/github.com/apache-superset/superset-ui/plugins/legacy-plugin-chart-sunburst/src/ReactSunburst.js\n/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * "License"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n *//* harmony default export */ var ReactSunburst = __webpack_exports__["default"] = (Object(reactify["a" /* default */])(src_Sunburst));//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjUxNC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8vVXNlcnMvZXJpa19yaXR0ZXIvcmVwb3MvZ2l0aHViLmNvbS9hcGFjaGUtc3VwZXJzZXQvc3VwZXJzZXQtdWkvcGx1Z2lucy9sZWdhY3ktcGx1Z2luLWNoYXJ0LXN1bmJ1cnN0L3NyYy91dGlscy93cmFwU3ZnVGV4dC5qcz83OTRlIiwid2VicGFjazovLy8vVXNlcnMvZXJpa19yaXR0ZXIvcmVwb3MvZ2l0aHViLmNvbS9hcGFjaGUtc3VwZXJzZXQvc3VwZXJzZXQtdWkvcGx1Z2lucy9sZWdhY3ktcGx1Z2luLWNoYXJ0LXN1bmJ1cnN0L3NyYy9TdW5idXJzdC5qcz85NWFhIiwid2VicGFjazovLy8vVXNlcnMvZXJpa19yaXR0ZXIvcmVwb3MvZ2l0aHViLmNvbS9hcGFjaGUtc3VwZXJzZXQvc3VwZXJzZXQtdWkvcGx1Z2lucy9sZWdhY3ktcGx1Z2luLWNoYXJ0LXN1bmJ1cnN0L3NyYy9SZWFjdFN1bmJ1cnN0LmpzP2E5NWUiXSwic291cmNlc0NvbnRlbnQiOlsiLypcbiAgVXRpbGl0eSBmdW5jdGlvbiB0aGF0IHRha2VzIGEgZDMgc3ZnOnRleHQgc2VsZWN0aW9uIGFuZCBhIG1heCB3aWR0aCwgYW5kIHNwbGl0cyB0aGVcbiAgdGV4dCdzIHRleHQgYWNyb3NzIG11bHRpcGxlIHRzcGFuIGxpbmVzIHN1Y2ggdGhhdCBhbnkgZ2l2ZW4gbGluZSBkb2VzIG5vdCBleGNlZWQgbWF4IHdpZHRoXG5cbiAgSWYgdGV4dCBkb2VzIG5vdCBzcGFuIG11bHRpcGxlIGxpbmVzIEFORCBhZGp1c3RlZFkgaXMgcGFzc2VkLFxuICB3aWxsIHNldCB0aGUgdGV4dCB0byB0aGUgcGFzc2VkIHZhbFxuKi9cbmltcG9ydCBkMyBmcm9tICdkMyc7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHdyYXBTdmdUZXh0KHRleHQsIHdpZHRoLCBhZGp1c3RlZFkpIHtcbiAgY29uc3QgbGluZUhlaWdodCA9IDE7XG4gIC8vIGVtc1xuICB0ZXh0LmVhY2goZnVuY3Rpb24gZWFjaCgpIHtcbiAgICBjb25zdCBkM1RleHQgPSBkMy5zZWxlY3QodGhpcyk7XG4gICAgY29uc3Qgd29yZHMgPSBkM1RleHQudGV4dCgpLnNwbGl0KC9cXHMrLyk7XG4gICAgbGV0IGxpbmUgPSBbXTtcbiAgICBsZXQgbGluZU51bWJlciA9IDA7XG4gICAgY29uc3QgeCA9IGQzVGV4dC5hdHRyKCd4Jyk7XG4gICAgY29uc3QgeSA9IGQzVGV4dC5hdHRyKCd5Jyk7XG4gICAgY29uc3QgZHkgPSBwYXJzZUZsb2F0KGQzVGV4dC5hdHRyKCdkeScpKTtcbiAgICBsZXQgdHNwYW4gPSBkM1RleHQudGV4dChudWxsKS5hcHBlbmQoJ3RzcGFuJykuYXR0cigneCcsIHgpLmF0dHIoJ3knLCB5KS5hdHRyKCdkeScsIGAke2R5fWVtYCk7XG5cbiAgICBsZXQgZGlkV3JhcCA9IGZhbHNlO1xuICAgIHdvcmRzLmZvckVhY2god29yZCA9PiB7XG4gICAgICBsaW5lLnB1c2god29yZCk7XG4gICAgICB0c3Bhbi50ZXh0KGxpbmUuam9pbignICcpKTtcbiAgICAgIGlmICh0c3Bhbi5ub2RlKCkuZ2V0Q29tcHV0ZWRUZXh0TGVuZ3RoKCkgPiB3aWR0aCkge1xuICAgICAgICBsaW5lTnVtYmVyICs9IDE7XG4gICAgICAgIGxpbmUucG9wKCk7XG4gICAgICAgIC8vIHJlbW92ZSB3b3JkIHRoYXQgcHVzaGVzIG92ZXIgdGhlIGxpbWl0XG4gICAgICAgIHRzcGFuLnRleHQobGluZS5qb2luKCcgJykpO1xuICAgICAgICBsaW5lID0gW3dvcmRdO1xuICAgICAgICB0c3BhbiA9IGQzVGV4dFxuICAgICAgICAgIC5hcHBlbmQoJ3RzcGFuJylcbiAgICAgICAgICAuYXR0cigneCcsIHgpXG4gICAgICAgICAgLmF0dHIoJ3knLCB5KVxuICAgICAgICAgIC5hdHRyKCdkeScsIGAke2xpbmVOdW1iZXIgKiBsaW5lSGVpZ2h0ICsgZHl9ZW1gKVxuICAgICAgICAgIC50ZXh0KHdvcmQpO1xuICAgICAgICBkaWRXcmFwID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGlmICghZGlkV3JhcCAmJiB0eXBlb2YgYWRqdXN0ZWRZICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgdHNwYW4uYXR0cigneScsIGFkanVzdGVkWSk7XG4gICAgfVxuICB9KTtcbn1cbiIsIi8qKlxuICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0aW9uIChBU0YpIHVuZGVyIG9uZVxuICogb3IgbW9yZSBjb250cmlidXRvciBsaWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlXG4gKiBkaXN0cmlidXRlZCB3aXRoIHRoaXMgd29yayBmb3IgYWRkaXRpb25hbCBpbmZvcm1hdGlvblxuICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUgQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZVxuICogdG8geW91IHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZVxuICogXCJMaWNlbnNlXCIpOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlXG4gKiB3aXRoIHRoZSBMaWNlbnNlLiAgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsXG4gKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhblxuICogXCJBUyBJU1wiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTllcbiAqIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuICBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZVxuICogc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9uc1xuICogdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qIGVzbGludC1kaXNhYmxlIG5vLXBhcmFtLXJlYXNzaWduLCByZWFjdC9zb3J0LXByb3AtdHlwZXMgKi9cbmltcG9ydCBkMyBmcm9tICdkMyc7XG5pbXBvcnQgUHJvcFR5cGVzIGZyb20gJ3Byb3AtdHlwZXMnO1xuaW1wb3J0IHtcbiAgZ2V0TnVtYmVyRm9ybWF0dGVyLFxuICBOdW1iZXJGb3JtYXRzLFxuICBDYXRlZ29yaWNhbENvbG9yTmFtZXNwYWNlLFxuICBnZXRTZXF1ZW50aWFsU2NoZW1lUmVnaXN0cnksXG59IGZyb20gJ0BzdXBlcnNldC11aS9jb3JlJztcbmltcG9ydCB3cmFwU3ZnVGV4dCBmcm9tICcuL3V0aWxzL3dyYXBTdmdUZXh0JztcbmltcG9ydCAnLi9TdW5idXJzdC5jc3MnO1xuXG5jb25zdCBwcm9wVHlwZXMgPSB7XG4gIC8vIEVhY2ggcm93IGlzIGFuIGFycmF5IG9mIFtoaWVyYXJjaHktbHZsMSwgaGllcmFyY2h5LWx2bDIsIG1ldHJpYzEsIG1ldHJpYzJdXG4gIC8vIGhpZXJhcmNoeS1sdmxzIGFyZSBzdHJpbmcuIG1ldHJpY3MgYXJlIG51bWJlclxuICBkYXRhOiBQcm9wVHlwZXMuYXJyYXlPZihQcm9wVHlwZXMuYXJyYXkpLFxuICB3aWR0aDogUHJvcFR5cGVzLm51bWJlcixcbiAgaGVpZ2h0OiBQcm9wVHlwZXMubnVtYmVyLFxuICBjb2xvclNjaGVtZTogUHJvcFR5cGVzLnN0cmluZyxcbiAgbGluZWFyQ29sb3JTY2hlbWU6IFByb3BUeXBlcy5zdHJpbmcsXG4gIG51bWJlckZvcm1hdDogUHJvcFR5cGVzLnN0cmluZyxcbiAgbWV0cmljczogUHJvcFR5cGVzLmFycmF5T2YoXG4gICAgUHJvcFR5cGVzLm9uZU9mVHlwZShbXG4gICAgICBQcm9wVHlwZXMuc3RyaW5nLFxuICAgICAgUHJvcFR5cGVzLm9iamVjdCwgLy8gVGhlIG1ldHJpYyBvYmplY3RcbiAgICBdKSxcbiAgKSxcbn07XG5cbmZ1bmN0aW9uIG1ldHJpY0xhYmVsKG1ldHJpYykge1xuICByZXR1cm4gdHlwZW9mIG1ldHJpYyA9PT0gJ3N0cmluZycgfHwgbWV0cmljIGluc3RhbmNlb2YgU3RyaW5nID8gbWV0cmljIDogbWV0cmljLmxhYmVsO1xufVxuXG4vLyBHaXZlbiBhIG5vZGUgaW4gYSBwYXJ0aXRpb24gbGF5b3V0LCByZXR1cm4gYW4gYXJyYXkgb2YgYWxsIG9mIGl0cyBhbmNlc3RvclxuLy8gbm9kZXMsIGhpZ2hlc3QgZmlyc3QsIGJ1dCBleGNsdWRpbmcgdGhlIHJvb3QuXG5mdW5jdGlvbiBnZXRBbmNlc3RvcnMobm9kZSkge1xuICBjb25zdCBwYXRoID0gW107XG4gIGxldCBjdXJyZW50ID0gbm9kZTtcbiAgd2hpbGUgKGN1cnJlbnQucGFyZW50KSB7XG4gICAgcGF0aC51bnNoaWZ0KGN1cnJlbnQpO1xuICAgIGN1cnJlbnQgPSBjdXJyZW50LnBhcmVudDtcbiAgfVxuXG4gIHJldHVybiBwYXRoO1xufVxuXG5mdW5jdGlvbiBidWlsZEhpZXJhcmNoeShyb3dzKSB7XG4gIGNvbnN0IHJvb3QgPSB7XG4gICAgbmFtZTogJ3Jvb3QnLFxuICAgIGNoaWxkcmVuOiBbXSxcbiAgfTtcblxuICAvLyBlYWNoIHJlY29yZCBbZ3JvdXBieTF2YWwsIGdyb3VwYnkydmFsLCAoPHN0cmluZz4gb3IgMCluLCBtMSwgbTJdXG4gIHJvd3MuZm9yRWFjaChyb3cgPT4ge1xuICAgIGNvbnN0IG0xID0gTnVtYmVyKHJvd1tyb3cubGVuZ3RoIC0gMl0pO1xuICAgIGNvbnN0IG0yID0gTnVtYmVyKHJvd1tyb3cubGVuZ3RoIC0gMV0pO1xuICAgIGNvbnN0IGxldmVscyA9IHJvdy5zbGljZSgwLCAtMik7XG4gICAgaWYgKE51bWJlci5pc05hTihtMSkpIHtcbiAgICAgIC8vIGUuZy4gaWYgdGhpcyBpcyBhIGhlYWRlciByb3dcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgbGV0IGN1cnJlbnROb2RlID0gcm9vdDtcbiAgICBmb3IgKGxldCBsZXZlbCA9IDA7IGxldmVsIDwgbGV2ZWxzLmxlbmd0aDsgbGV2ZWwgKz0gMSkge1xuICAgICAgY29uc3QgY2hpbGRyZW4gPSBjdXJyZW50Tm9kZS5jaGlsZHJlbiB8fCBbXTtcbiAgICAgIGNvbnN0IG5vZGVOYW1lID0gbGV2ZWxzW2xldmVsXS50b1N0cmluZygpO1xuICAgICAgLy8gSWYgdGhlIG5leHQgbm9kZSBoYXMgdGhlIG5hbWUgJzAnLCBpdCB3aWxsXG4gICAgICBjb25zdCBpc0xlYWZOb2RlID0gbGV2ZWwgPj0gbGV2ZWxzLmxlbmd0aCAtIDEgfHwgbGV2ZWxzW2xldmVsICsgMV0gPT09IDA7XG4gICAgICBsZXQgY2hpbGROb2RlO1xuXG4gICAgICBpZiAoIWlzTGVhZk5vZGUpIHtcbiAgICAgICAgY2hpbGROb2RlID0gY2hpbGRyZW4uZmluZChjaGlsZCA9PiBjaGlsZC5uYW1lID09PSBub2RlTmFtZSAmJiBjaGlsZC5sZXZlbCA9PT0gbGV2ZWwpO1xuXG4gICAgICAgIGlmICghY2hpbGROb2RlKSB7XG4gICAgICAgICAgY2hpbGROb2RlID0ge1xuICAgICAgICAgICAgbmFtZTogbm9kZU5hbWUsXG4gICAgICAgICAgICBjaGlsZHJlbjogW10sXG4gICAgICAgICAgICBsZXZlbCxcbiAgICAgICAgICB9O1xuICAgICAgICAgIGNoaWxkcmVuLnB1c2goY2hpbGROb2RlKTtcbiAgICAgICAgfVxuICAgICAgICBjdXJyZW50Tm9kZSA9IGNoaWxkTm9kZTtcbiAgICAgIH0gZWxzZSBpZiAobm9kZU5hbWUgIT09IDApIHtcbiAgICAgICAgLy8gUmVhY2hlZCB0aGUgZW5kIG9mIHRoZSBzZXF1ZW5jZTsgY3JlYXRlIGEgbGVhZiBub2RlLlxuICAgICAgICBjaGlsZE5vZGUgPSB7XG4gICAgICAgICAgbmFtZTogbm9kZU5hbWUsXG4gICAgICAgICAgbTEsXG4gICAgICAgICAgbTIsXG4gICAgICAgIH07XG4gICAgICAgIGNoaWxkcmVuLnB1c2goY2hpbGROb2RlKTtcbiAgICAgIH1cbiAgICB9XG4gIH0pO1xuXG4gIGZ1bmN0aW9uIHJlY3Vyc2Uobm9kZSkge1xuICAgIGlmIChub2RlLmNoaWxkcmVuKSB7XG4gICAgICBsZXQgc3VtcztcbiAgICAgIGxldCBtMSA9IDA7XG4gICAgICBsZXQgbTIgPSAwO1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBub2RlLmNoaWxkcmVuLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgIHN1bXMgPSByZWN1cnNlKG5vZGUuY2hpbGRyZW5baV0pO1xuICAgICAgICBtMSArPSBzdW1zWzBdO1xuICAgICAgICBtMiArPSBzdW1zWzFdO1xuICAgICAgfVxuICAgICAgbm9kZS5tMSA9IG0xO1xuICAgICAgbm9kZS5tMiA9IG0yO1xuICAgIH1cblxuICAgIHJldHVybiBbbm9kZS5tMSwgbm9kZS5tMl07XG4gIH1cblxuICByZWN1cnNlKHJvb3QpO1xuXG4gIHJldHVybiByb290O1xufVxuXG5mdW5jdGlvbiBnZXRSZXNwb25zaXZlQ29udGFpbmVyQ2xhc3Mod2lkdGgpIHtcbiAgaWYgKHdpZHRoID4gNTAwKSB7XG4gICAgcmV0dXJuICdsJztcbiAgfVxuXG4gIGlmICh3aWR0aCA+IDIwMCAmJiB3aWR0aCA8PSA1MDApIHtcbiAgICByZXR1cm4gJ20nO1xuICB9XG5cbiAgcmV0dXJuICdzJztcbn1cblxuZnVuY3Rpb24gZ2V0WU9mZnNldCh3aWR0aCkge1xuICBpZiAod2lkdGggPiA1MDApIHtcbiAgICByZXR1cm4gWycwJywgJzIwJywgJzQwJywgJzYwJ107XG4gIH1cblxuICBpZiAod2lkdGggPiAyMDAgJiYgd2lkdGggPD0gNTAwKSB7XG4gICAgcmV0dXJuIFsnMCcsICcxNScsICczMCcsICc0NSddO1xuICB9XG5cbiAgcmV0dXJuIFsnMCcsICcxMCcsICcyMCcsICczMCddO1xufVxuXG4vLyBNb2RpZmllZCBmcm9tIGh0dHA6Ly9ibC5vY2tzLm9yZy9rZXJyeXJvZGRlbi83MDkwNDI2XG5mdW5jdGlvbiBTdW5idXJzdChlbGVtZW50LCBwcm9wcykge1xuICBjb25zdCBjb250YWluZXIgPSBkMy5zZWxlY3QoZWxlbWVudCk7XG4gIGNvbnN0IHsgZGF0YSwgd2lkdGgsIGhlaWdodCwgY29sb3JTY2hlbWUsIGxpbmVhckNvbG9yU2NoZW1lLCBtZXRyaWNzLCBudW1iZXJGb3JtYXQgfSA9IHByb3BzO1xuICBjb25zdCByZXNwb25zaXZlQ2xhc3MgPSBnZXRSZXNwb25zaXZlQ29udGFpbmVyQ2xhc3Mod2lkdGgpO1xuICBjb25zdCBpc1NtYWxsV2lkdGggPSByZXNwb25zaXZlQ2xhc3MgPT09ICdzJztcbiAgY29udGFpbmVyLmF0dHIoJ2NsYXNzJywgYHN1cGVyc2V0LWxlZ2FjeS1jaGFydC1zdW5idXJzdCAke3Jlc3BvbnNpdmVDbGFzc31gKTtcbiAgLy8gdmFycyB3aXRoIHNoYXJlZCBzY29wZSB3aXRoaW4gdGhpcyBmdW5jdGlvblxuICBjb25zdCBtYXJnaW4gPSB7IHRvcDogMTAsIHJpZ2h0OiA1LCBib3R0b206IDEwLCBsZWZ0OiA1IH07XG4gIGNvbnN0IGNvbnRhaW5lcldpZHRoID0gd2lkdGg7XG4gIGNvbnN0IGNvbnRhaW5lckhlaWdodCA9IGhlaWdodDtcbiAgY29uc3QgYnJlYWRjcnVtYkhlaWdodCA9IGNvbnRhaW5lckhlaWdodCAqIDAuMDg1O1xuICBjb25zdCB2aXNXaWR0aCA9IGNvbnRhaW5lcldpZHRoIC0gbWFyZ2luLmxlZnQgLSBtYXJnaW4ucmlnaHQ7XG4gIGNvbnN0IHZpc0hlaWdodCA9IGNvbnRhaW5lckhlaWdodCAtIG1hcmdpbi50b3AgLSBtYXJnaW4uYm90dG9tIC0gYnJlYWRjcnVtYkhlaWdodDtcbiAgY29uc3QgcmFkaXVzID0gTWF0aC5taW4odmlzV2lkdGgsIHZpc0hlaWdodCkgLyAyO1xuXG4gIGxldCBjb2xvckJ5Q2F0ZWdvcnkgPSB0cnVlOyAvLyBjb2xvciBieSBjYXRlZ29yeSBpZiBwcmltYXJ5L3NlY29uZGFyeSBtZXRyaWNzIG1hdGNoXG4gIGxldCBtYXhCcmVhZGNydW1icztcbiAgbGV0IGJyZWFkY3J1bWJEaW1zOyAvLyBzZXQgYmFzZWQgb24gZGF0YVxuICBsZXQgdG90YWxTaXplOyAvLyB0b3RhbCBzaXplIG9mIGFsbCBzZWdtZW50czsgc2V0IGFmdGVyIGxvYWRpbmcgdGhlIGRhdGEuXG4gIGxldCBicmVhZGNydW1icztcbiAgbGV0IHZpcztcbiAgbGV0IGFyY3M7XG4gIGxldCBnTWlkZGxlVGV4dDsgLy8gZG9tIGhhbmRsZXNcblxuICBjb25zdCBjYXRlZ29yaWNhbENvbG9yU2NhbGUgPSBDYXRlZ29yaWNhbENvbG9yTmFtZXNwYWNlLmdldFNjYWxlKGNvbG9yU2NoZW1lKTtcbiAgbGV0IGxpbmVhckNvbG9yU2NhbGU7XG5cbiAgLy8gSGVscGVyICsgcGF0aCBnZW4gZnVuY3Rpb25zXG4gIGNvbnN0IHBhcnRpdGlvbiA9IGQzLmxheW91dFxuICAgIC5wYXJ0aXRpb24oKVxuICAgIC5zaXplKFsyICogTWF0aC5QSSwgcmFkaXVzICogcmFkaXVzXSlcbiAgICAudmFsdWUoZCA9PiBkLm0xKTtcblxuICBjb25zdCBhcmMgPSBkMy5zdmdcbiAgICAuYXJjKClcbiAgICAuc3RhcnRBbmdsZShkID0+IGQueClcbiAgICAuZW5kQW5nbGUoZCA9PiBkLnggKyBkLmR4KVxuICAgIC5pbm5lclJhZGl1cyhkID0+IE1hdGguc3FydChkLnkpKVxuICAgIC5vdXRlclJhZGl1cyhkID0+IE1hdGguc3FydChkLnkgKyBkLmR5KSk7XG5cbiAgY29uc3QgZm9ybWF0TnVtID0gZ2V0TnVtYmVyRm9ybWF0dGVyKG51bWJlckZvcm1hdCB8fCBOdW1iZXJGb3JtYXRzLlNJXzNfRElHSVQpO1xuICBjb25zdCBmb3JtYXRQZXJjID0gZ2V0TnVtYmVyRm9ybWF0dGVyKE51bWJlckZvcm1hdHMuUEVSQ0VOVF8zX1BPSU5UKTtcblxuICBjb250YWluZXIuc2VsZWN0KCdzdmcnKS5yZW1vdmUoKTtcblxuICBjb25zdCBzdmcgPSBjb250YWluZXJcbiAgICAuYXBwZW5kKCdzdmc6c3ZnJylcbiAgICAuYXR0cignd2lkdGgnLCBjb250YWluZXJXaWR0aClcbiAgICAuYXR0cignaGVpZ2h0JywgY29udGFpbmVySGVpZ2h0KTtcblxuICBmdW5jdGlvbiBjcmVhdGVCcmVhZGNydW1icyhmaXJzdFJvd0RhdGEpIHtcbiAgICAvLyAtMiBiYyByb3cgY29udGFpbnMgMnggbWV0cmljcywgK2V4dHJhIGZvciAlbGFiZWwgYW5kIGJ1ZmZlclxuICAgIG1heEJyZWFkY3J1bWJzID0gZmlyc3RSb3dEYXRhLmxlbmd0aCAtIDIgKyAxO1xuICAgIGJyZWFkY3J1bWJEaW1zID0ge1xuICAgICAgd2lkdGg6IHZpc1dpZHRoIC8gbWF4QnJlYWRjcnVtYnMsXG4gICAgICBoZWlnaHQ6IGJyZWFkY3J1bWJIZWlnaHQgKiAwLjgsIC8vIG1vcmUgbWFyZ2luXG4gICAgICBzcGFjaW5nOiAzLFxuICAgICAgdGlwVGFpbFdpZHRoOiAxMCxcbiAgICB9O1xuXG4gICAgYnJlYWRjcnVtYnMgPSBzdmdcbiAgICAgIC5hcHBlbmQoJ3N2ZzpnJylcbiAgICAgIC5hdHRyKCdjbGFzcycsICdicmVhZGNydW1icycpXG4gICAgICAuYXR0cigndHJhbnNmb3JtJywgYHRyYW5zbGF0ZSgke21hcmdpbi5sZWZ0fSwke21hcmdpbi50b3B9KWApO1xuXG4gICAgYnJlYWRjcnVtYnMuYXBwZW5kKCdzdmc6dGV4dCcpLmF0dHIoJ2NsYXNzJywgJ2VuZC1sYWJlbCcpO1xuICB9XG5cbiAgLy8gR2VuZXJhdGUgYSBzdHJpbmcgdGhhdCBkZXNjcmliZXMgdGhlIHBvaW50cyBvZiBhIGJyZWFkY3J1bWIgcG9seWdvbi5cbiAgZnVuY3Rpb24gYnJlYWRjcnVtYlBvaW50cyhkLCBpKSB7XG4gICAgY29uc3QgcG9pbnRzID0gW107XG4gICAgaWYgKGlzU21hbGxXaWR0aCkge1xuICAgICAgcG9pbnRzLnB1c2goJzAsMCcpO1xuICAgICAgcG9pbnRzLnB1c2goYCR7d2lkdGh9LDBgKTtcbiAgICAgIHBvaW50cy5wdXNoKGAke3dpZHRofSwwYCk7XG4gICAgICBwb2ludHMucHVzaChgJHt3aWR0aH0sJHticmVhZGNydW1iRGltcy5oZWlnaHR9YCk7XG4gICAgICBwb2ludHMucHVzaChgMCwke2JyZWFkY3J1bWJEaW1zLmhlaWdodH1gKTtcbiAgICAgIGlmIChpID4gMCkge1xuICAgICAgICAvLyBMZWZ0bW9zdCBicmVhZGNydW1iOyBkb24ndCBpbmNsdWRlIDZ0aCB2ZXJ0ZXguXG4gICAgICAgIC8vIHBvaW50cy5wdXNoKGAke2JyZWFkY3J1bWJEaW1zLnRpcFRhaWxXaWR0aH0sJHticmVhZGNydW1iRGltcy5oZWlnaHQgLyAyfWApO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBwb2ludHMucHVzaCgnMCwwJyk7XG4gICAgICBwb2ludHMucHVzaChgJHticmVhZGNydW1iRGltcy53aWR0aH0sMGApO1xuICAgICAgcG9pbnRzLnB1c2goXG4gICAgICAgIGAke2JyZWFkY3J1bWJEaW1zLndpZHRoICsgYnJlYWRjcnVtYkRpbXMudGlwVGFpbFdpZHRofSwke2JyZWFkY3J1bWJEaW1zLmhlaWdodCAvIDJ9YCxcbiAgICAgICk7XG4gICAgICBwb2ludHMucHVzaChgJHticmVhZGNydW1iRGltcy53aWR0aH0sJHticmVhZGNydW1iRGltcy5oZWlnaHR9YCk7XG4gICAgICBwb2ludHMucHVzaChgMCwke2JyZWFkY3J1bWJEaW1zLmhlaWdodH1gKTtcbiAgICAgIGlmIChpID4gMCkge1xuICAgICAgICAvLyBMZWZ0bW9zdCBicmVhZGNydW1iOyBkb24ndCBpbmNsdWRlIDZ0aCB2ZXJ0ZXguXG4gICAgICAgIHBvaW50cy5wdXNoKGAke2JyZWFkY3J1bWJEaW1zLnRpcFRhaWxXaWR0aH0sJHticmVhZGNydW1iRGltcy5oZWlnaHQgLyAyfWApO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBwb2ludHMuam9pbignICcpO1xuICB9XG5cbiAgZnVuY3Rpb24gdXBkYXRlQnJlYWRjcnVtYnMoc2VxdWVuY2VBcnJheSwgcGVyY2VudGFnZVN0cmluZykge1xuICAgIGNvbnN0IGJyZWFkY3J1bWJXaWR0aCA9IGlzU21hbGxXaWR0aCA/IHdpZHRoIDogYnJlYWRjcnVtYkRpbXMud2lkdGg7XG4gICAgY29uc3QgZyA9IGJyZWFkY3J1bWJzLnNlbGVjdEFsbCgnZycpLmRhdGEoc2VxdWVuY2VBcnJheSwgZCA9PiBkLm5hbWUgKyBkLmRlcHRoKTtcblxuICAgIC8vIEFkZCBicmVhZGNydW1iIGFuZCBsYWJlbCBmb3IgZW50ZXJpbmcgbm9kZXMuXG4gICAgY29uc3QgZW50ZXJpbmcgPSBnLmVudGVyKCkuYXBwZW5kKCdzdmc6ZycpO1xuXG4gICAgZW50ZXJpbmdcbiAgICAgIC5hcHBlbmQoJ3N2Zzpwb2x5Z29uJylcbiAgICAgIC5hdHRyKCdwb2ludHMnLCBicmVhZGNydW1iUG9pbnRzKVxuICAgICAgLnN0eWxlKCdmaWxsJywgZCA9PlxuICAgICAgICBjb2xvckJ5Q2F0ZWdvcnkgPyBjYXRlZ29yaWNhbENvbG9yU2NhbGUoZC5uYW1lKSA6IGxpbmVhckNvbG9yU2NhbGUoZC5tMiAvIGQubTEpLFxuICAgICAgKTtcblxuICAgIGVudGVyaW5nXG4gICAgICAuYXBwZW5kKCdzdmc6dGV4dCcpXG4gICAgICAuYXR0cigneCcsIChicmVhZGNydW1iV2lkdGggKyBicmVhZGNydW1iRGltcy50aXBUYWlsV2lkdGgpIC8gMilcbiAgICAgIC5hdHRyKCd5JywgYnJlYWRjcnVtYkRpbXMuaGVpZ2h0IC8gNClcbiAgICAgIC5hdHRyKCdkeScsICcwLjM1ZW0nKVxuICAgICAgLnN0eWxlKCdmaWxsJywgZCA9PiB7XG4gICAgICAgIC8vIE1ha2UgdGV4dCB3aGl0ZSBvciBibGFjayBiYXNlZCBvbiB0aGUgbGlnaHRuZXNzIG9mIHRoZSBiYWNrZ3JvdW5kXG4gICAgICAgIGNvbnN0IGNvbCA9IGQzLmhzbChcbiAgICAgICAgICBjb2xvckJ5Q2F0ZWdvcnkgPyBjYXRlZ29yaWNhbENvbG9yU2NhbGUoZC5uYW1lKSA6IGxpbmVhckNvbG9yU2NhbGUoZC5tMiAvIGQubTEpLFxuICAgICAgICApO1xuXG4gICAgICAgIHJldHVybiBjb2wubCA8IDAuNSA/ICd3aGl0ZScgOiAnYmxhY2snO1xuICAgICAgfSlcbiAgICAgIC5hdHRyKCdjbGFzcycsICdzdGVwLWxhYmVsJylcbiAgICAgIC50ZXh0KGQgPT4gZC5uYW1lLnJlcGxhY2UoL18vZywgJyAnKSlcbiAgICAgIC5jYWxsKHdyYXBTdmdUZXh0LCBicmVhZGNydW1iV2lkdGgsIGJyZWFkY3J1bWJEaW1zLmhlaWdodCAvIDIpO1xuXG4gICAgLy8gU2V0IHBvc2l0aW9uIGZvciBlbnRlcmluZyBhbmQgdXBkYXRpbmcgbm9kZXMuXG4gICAgZy5hdHRyKCd0cmFuc2Zvcm0nLCAoZCwgaSkgPT4ge1xuICAgICAgaWYgKGlzU21hbGxXaWR0aCkge1xuICAgICAgICByZXR1cm4gYHRyYW5zbGF0ZSgwLCAke2kgKiAoYnJlYWRjcnVtYkRpbXMuaGVpZ2h0ICsgYnJlYWRjcnVtYkRpbXMuc3BhY2luZyl9KWA7XG4gICAgICB9XG4gICAgICByZXR1cm4gYHRyYW5zbGF0ZSgke2kgKiAoYnJlYWRjcnVtYkRpbXMud2lkdGggKyBicmVhZGNydW1iRGltcy5zcGFjaW5nKX0sIDApYDtcbiAgICB9KTtcblxuICAgIC8vIFJlbW92ZSBleGl0aW5nIG5vZGVzLlxuICAgIGcuZXhpdCgpLnJlbW92ZSgpO1xuXG4gICAgLy8gTm93IG1vdmUgYW5kIHVwZGF0ZSB0aGUgcGVyY2VudGFnZSBhdCB0aGUgZW5kLlxuICAgIGJyZWFkY3J1bWJzXG4gICAgICAuc2VsZWN0KCcuZW5kLWxhYmVsJylcbiAgICAgIC5hdHRyKCd4JywgKCkgPT4ge1xuICAgICAgICBpZiAoaXNTbWFsbFdpZHRoKSB7XG4gICAgICAgICAgcmV0dXJuIChicmVhZGNydW1iV2lkdGggKyBicmVhZGNydW1iRGltcy50aXBUYWlsV2lkdGgpIC8gMjtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiAoc2VxdWVuY2VBcnJheS5sZW5ndGggKyAwLjUpICogKGJyZWFkY3J1bWJEaW1zLndpZHRoICsgYnJlYWRjcnVtYkRpbXMuc3BhY2luZyk7XG4gICAgICB9KVxuICAgICAgLmF0dHIoJ3knLCAoKSA9PiB7XG4gICAgICAgIGlmIChpc1NtYWxsV2lkdGgpIHtcbiAgICAgICAgICByZXR1cm4gKHNlcXVlbmNlQXJyYXkubGVuZ3RoICsgMSkgKiBicmVhZGNydW1iRGltcy5oZWlnaHQ7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gYnJlYWRjcnVtYkRpbXMuaGVpZ2h0IC8gMjtcbiAgICAgIH0pXG4gICAgICAuYXR0cignZHknLCAnMC4zNWVtJylcbiAgICAgIC50ZXh0KHBlcmNlbnRhZ2VTdHJpbmcpO1xuXG4gICAgLy8gTWFrZSB0aGUgYnJlYWRjcnVtYiB0cmFpbCB2aXNpYmxlLCBpZiBpdCdzIGhpZGRlbi5cbiAgICBicmVhZGNydW1icy5zdHlsZSgndmlzaWJpbGl0eScsIG51bGwpO1xuICB9XG5cbiAgLy8gRmFkZSBhbGwgYnV0IHRoZSBjdXJyZW50IHNlcXVlbmNlLCBhbmQgc2hvdyBpdCBpbiB0aGUgYnJlYWRjcnVtYiB0cmFpbC5cbiAgZnVuY3Rpb24gbW91c2VlbnRlcihkKSB7XG4gICAgY29uc3Qgc2VxdWVuY2VBcnJheSA9IGdldEFuY2VzdG9ycyhkKTtcbiAgICBjb25zdCBwYXJlbnRPZkQgPSBzZXF1ZW5jZUFycmF5W3NlcXVlbmNlQXJyYXkubGVuZ3RoIC0gMl0gfHwgbnVsbDtcblxuICAgIGNvbnN0IGFic29sdXRlUGVyY2VudGFnZSA9IChkLm0xIC8gdG90YWxTaXplKS50b1ByZWNpc2lvbigzKTtcbiAgICBjb25zdCBjb25kaXRpb25hbFBlcmNlbnRhZ2UgPSBwYXJlbnRPZkQgPyAoZC5tMSAvIHBhcmVudE9mRC5tMSkudG9QcmVjaXNpb24oMykgOiBudWxsO1xuXG4gICAgY29uc3QgYWJzb2x1dGVQZXJjU3RyaW5nID0gZm9ybWF0UGVyYyhhYnNvbHV0ZVBlcmNlbnRhZ2UpO1xuICAgIGNvbnN0IGNvbmRpdGlvbmFsUGVyY1N0cmluZyA9IHBhcmVudE9mRCA/IGZvcm1hdFBlcmMoY29uZGl0aW9uYWxQZXJjZW50YWdlKSA6ICcnO1xuXG4gICAgLy8gMyBsZXZlbHMgb2YgdGV4dCBpZiBpbm5lci1tb3N0IGxldmVsLCA0IG90aGVyd2lzZVxuICAgIGNvbnN0IHlPZmZzZXRzID0gZ2V0WU9mZnNldCh3aWR0aCk7XG4gICAgbGV0IG9mZnNldEluZGV4ID0gMDtcblxuICAgIC8vIElmIG1ldHJpY3MgbWF0Y2gsIGFzc3VtZSB3ZSBhcmUgY29sb3JpbmcgYnkgY2F0ZWdvcnlcbiAgICBjb25zdCBtZXRyaWNzTWF0Y2ggPSBNYXRoLmFicyhkLm0xIC0gZC5tMikgPCAwLjAwMDAxO1xuXG4gICAgZ01pZGRsZVRleHQuc2VsZWN0QWxsKCcqJykucmVtb3ZlKCk7XG5cbiAgICBvZmZzZXRJbmRleCArPSAxO1xuICAgIGdNaWRkbGVUZXh0XG4gICAgICAuYXBwZW5kKCd0ZXh0JylcbiAgICAgIC5hdHRyKCdjbGFzcycsICdwYXRoLWFicy1wZXJjZW50JylcbiAgICAgIC5hdHRyKCd5JywgeU9mZnNldHNbb2Zmc2V0SW5kZXhdKVxuICAgICAgLnRleHQoYCR7YWJzb2x1dGVQZXJjU3RyaW5nfSBvZiB0b3RhbGApO1xuXG4gICAgaWYgKGNvbmRpdGlvbmFsUGVyY1N0cmluZykge1xuICAgICAgb2Zmc2V0SW5kZXggKz0gMTtcbiAgICAgIGdNaWRkbGVUZXh0XG4gICAgICAgIC5hcHBlbmQoJ3RleHQnKVxuICAgICAgICAuYXR0cignY2xhc3MnLCAncGF0aC1jb25kLXBlcmNlbnQnKVxuICAgICAgICAuYXR0cigneScsIHlPZmZzZXRzW29mZnNldEluZGV4XSlcbiAgICAgICAgLnRleHQoYCR7Y29uZGl0aW9uYWxQZXJjU3RyaW5nfSBvZiBwYXJlbnRgKTtcbiAgICB9XG5cbiAgICBvZmZzZXRJbmRleCArPSAxO1xuICAgIGdNaWRkbGVUZXh0XG4gICAgICAuYXBwZW5kKCd0ZXh0JylcbiAgICAgIC5hdHRyKCdjbGFzcycsICdwYXRoLW1ldHJpY3MnKVxuICAgICAgLmF0dHIoJ3knLCB5T2Zmc2V0c1tvZmZzZXRJbmRleF0pXG4gICAgICAudGV4dChcbiAgICAgICAgYCR7bWV0cmljTGFiZWwobWV0cmljc1swXSl9OiAke2Zvcm1hdE51bShkLm0xKX0ke1xuICAgICAgICAgIG1ldHJpY3NNYXRjaCA/ICcnIDogYCwgJHttZXRyaWNMYWJlbChtZXRyaWNzWzFdKX06ICR7Zm9ybWF0TnVtKGQubTIpfWBcbiAgICAgICAgfWAsXG4gICAgICApO1xuXG4gICAgb2Zmc2V0SW5kZXggKz0gMTtcbiAgICBnTWlkZGxlVGV4dFxuICAgICAgLmFwcGVuZCgndGV4dCcpXG4gICAgICAuYXR0cignY2xhc3MnLCAncGF0aC1yYXRpbycpXG4gICAgICAuYXR0cigneScsIHlPZmZzZXRzW29mZnNldEluZGV4XSlcbiAgICAgIC50ZXh0KFxuICAgICAgICBtZXRyaWNzTWF0Y2hcbiAgICAgICAgICA/ICcnXG4gICAgICAgICAgOiBgJHttZXRyaWNMYWJlbChtZXRyaWNzWzFdKX0vJHttZXRyaWNMYWJlbChtZXRyaWNzWzBdKX06ICR7Zm9ybWF0UGVyYyhkLm0yIC8gZC5tMSl9YCxcbiAgICAgICk7XG5cbiAgICAvLyBSZXNldCBhbmQgZmFkZSBhbGwgdGhlIHNlZ21lbnRzLlxuICAgIGFyY3Muc2VsZWN0QWxsKCdwYXRoJykuc3R5bGUoJ3N0cm9rZS13aWR0aCcsIG51bGwpLnN0eWxlKCdzdHJva2UnLCBudWxsKS5zdHlsZSgnb3BhY2l0eScsIDAuMyk7XG5cbiAgICAvLyBUaGVuIGhpZ2hsaWdodCBvbmx5IHRob3NlIHRoYXQgYXJlIGFuIGFuY2VzdG9yIG9mIHRoZSBjdXJyZW50IHNlZ21lbnQuXG4gICAgYXJjc1xuICAgICAgLnNlbGVjdEFsbCgncGF0aCcpXG4gICAgICAuZmlsdGVyKG5vZGUgPT4gc2VxdWVuY2VBcnJheS5pbmNsdWRlcyhub2RlKSlcbiAgICAgIC5zdHlsZSgnb3BhY2l0eScsIDEpXG4gICAgICAuc3R5bGUoJ3N0cm9rZScsICcjYWFhJyk7XG5cbiAgICB1cGRhdGVCcmVhZGNydW1icyhzZXF1ZW5jZUFycmF5LCBhYnNvbHV0ZVBlcmNTdHJpbmcpO1xuICB9XG5cbiAgLy8gUmVzdG9yZSBldmVyeXRoaW5nIHRvIGZ1bGwgb3BhY2l0eSB3aGVuIG1vdmluZyBvZmYgdGhlIHZpc3VhbGl6YXRpb24uXG4gIGZ1bmN0aW9uIG1vdXNlbGVhdmUoKSB7XG4gICAgLy8gSGlkZSB0aGUgYnJlYWRjcnVtYiB0cmFpbFxuICAgIGJyZWFkY3J1bWJzLnN0eWxlKCd2aXNpYmlsaXR5JywgJ2hpZGRlbicpO1xuXG4gICAgZ01pZGRsZVRleHQuc2VsZWN0QWxsKCcqJykucmVtb3ZlKCk7XG5cbiAgICAvLyBEZWFjdGl2YXRlIGFsbCBzZWdtZW50cyBkdXJpbmcgdHJhbnNpdGlvbi5cbiAgICBhcmNzLnNlbGVjdEFsbCgncGF0aCcpLm9uKCdtb3VzZWVudGVyJywgbnVsbCk7XG5cbiAgICAvLyBUcmFuc2l0aW9uIGVhY2ggc2VnbWVudCB0byBmdWxsIG9wYWNpdHkgYW5kIHRoZW4gcmVhY3RpdmF0ZSBpdC5cbiAgICBhcmNzXG4gICAgICAuc2VsZWN0QWxsKCdwYXRoJylcbiAgICAgIC50cmFuc2l0aW9uKClcbiAgICAgIC5kdXJhdGlvbigyMDApXG4gICAgICAuc3R5bGUoJ29wYWNpdHknLCAxKVxuICAgICAgLnN0eWxlKCdzdHJva2UnLCBudWxsKVxuICAgICAgLnN0eWxlKCdzdHJva2Utd2lkdGgnLCBudWxsKVxuICAgICAgLmVhY2goJ2VuZCcsIGZ1bmN0aW9uIGVuZCgpIHtcbiAgICAgICAgZDMuc2VsZWN0KHRoaXMpLm9uKCdtb3VzZWVudGVyJywgbW91c2VlbnRlcik7XG4gICAgICB9KTtcbiAgfVxuXG4gIC8vIE1haW4gZnVuY3Rpb24gdG8gZHJhdyBhbmQgc2V0IHVwIHRoZSB2aXN1YWxpemF0aW9uLCBvbmNlIHdlIGhhdmUgdGhlIGRhdGEuXG4gIGZ1bmN0aW9uIGNyZWF0ZVZpc3VhbGl6YXRpb24ocm93cykge1xuICAgIGNvbnN0IHJvb3QgPSBidWlsZEhpZXJhcmNoeShyb3dzKTtcbiAgICBtYXhCcmVhZGNydW1icyA9IHJvd3NbMF0ubGVuZ3RoIC0gMjtcbiAgICB2aXMgPSBzdmdcbiAgICAgIC5hcHBlbmQoJ3N2ZzpnJylcbiAgICAgIC5hdHRyKCdjbGFzcycsICdzdW5idXJzdC12aXMnKVxuICAgICAgLmF0dHIoXG4gICAgICAgICd0cmFuc2Zvcm0nLFxuICAgICAgICAndHJhbnNsYXRlKCcgK1xuICAgICAgICAgIGAke21hcmdpbi5sZWZ0ICsgdmlzV2lkdGggLyAyfSxgICtcbiAgICAgICAgICBgJHtcbiAgICAgICAgICAgIG1hcmdpbi50b3AgK1xuICAgICAgICAgICAgKGlzU21hbGxXaWR0aCA/IGJyZWFkY3J1bWJIZWlnaHQgKiBtYXhCcmVhZGNydW1icyA6IGJyZWFkY3J1bWJIZWlnaHQpICtcbiAgICAgICAgICAgIHZpc0hlaWdodCAvIDJcbiAgICAgICAgICB9YCArXG4gICAgICAgICAgJyknLFxuICAgICAgKVxuICAgICAgLm9uKCdtb3VzZWxlYXZlJywgbW91c2VsZWF2ZSk7XG5cbiAgICBhcmNzID0gdmlzLmFwcGVuZCgnc3ZnOmcnKS5hdHRyKCdpZCcsICdhcmNzJyk7XG5cbiAgICBnTWlkZGxlVGV4dCA9IHZpcy5hcHBlbmQoJ3N2ZzpnJykuYXR0cignY2xhc3MnLCAnY2VudGVyLWxhYmVsJyk7XG5cbiAgICAvLyBCb3VuZGluZyBjaXJjbGUgdW5kZXJuZWF0aCB0aGUgc3VuYnVyc3QsIHRvIG1ha2UgaXQgZWFzaWVyIHRvIGRldGVjdFxuICAgIC8vIHdoZW4gdGhlIG1vdXNlIGxlYXZlcyB0aGUgcGFyZW50IGcuXG4gICAgYXJjcy5hcHBlbmQoJ3N2ZzpjaXJjbGUnKS5hdHRyKCdyJywgcmFkaXVzKS5zdHlsZSgnb3BhY2l0eScsIDApO1xuXG4gICAgLy8gRm9yIGVmZmljaWVuY3ksIGZpbHRlciBub2RlcyB0byBrZWVwIG9ubHkgdGhvc2UgbGFyZ2UgZW5vdWdoIHRvIHNlZS5cbiAgICBjb25zdCBub2RlcyA9IHBhcnRpdGlvbi5ub2Rlcyhyb290KS5maWx0ZXIoZCA9PiBkLmR4ID4gMC4wMDUpOyAvLyAwLjAwNSByYWRpYW5zID0gMC4yOSBkZWdyZWVzXG5cbiAgICBpZiAobWV0cmljc1swXSAhPT0gbWV0cmljc1sxXSAmJiBtZXRyaWNzWzFdKSB7XG4gICAgICBjb2xvckJ5Q2F0ZWdvcnkgPSBmYWxzZTtcbiAgICAgIGNvbnN0IGV4dCA9IGQzLmV4dGVudChub2RlcywgZCA9PiBkLm0yIC8gZC5tMSk7XG4gICAgICBsaW5lYXJDb2xvclNjYWxlID0gZ2V0U2VxdWVudGlhbFNjaGVtZVJlZ2lzdHJ5KClcbiAgICAgICAgLmdldChsaW5lYXJDb2xvclNjaGVtZSlcbiAgICAgICAgLmNyZWF0ZUxpbmVhclNjYWxlKGV4dCk7XG4gICAgfVxuXG4gICAgYXJjc1xuICAgICAgLnNlbGVjdEFsbCgncGF0aCcpXG4gICAgICAuZGF0YShub2RlcylcbiAgICAgIC5lbnRlcigpXG4gICAgICAuYXBwZW5kKCdzdmc6cGF0aCcpXG4gICAgICAuYXR0cignZGlzcGxheScsIGQgPT4gKGQuZGVwdGggPyBudWxsIDogJ25vbmUnKSlcbiAgICAgIC5hdHRyKCdkJywgYXJjKVxuICAgICAgLmF0dHIoJ2ZpbGwtcnVsZScsICdldmVub2RkJylcbiAgICAgIC5zdHlsZSgnZmlsbCcsIGQgPT5cbiAgICAgICAgY29sb3JCeUNhdGVnb3J5ID8gY2F0ZWdvcmljYWxDb2xvclNjYWxlKGQubmFtZSkgOiBsaW5lYXJDb2xvclNjYWxlKGQubTIgLyBkLm0xKSxcbiAgICAgIClcbiAgICAgIC5zdHlsZSgnb3BhY2l0eScsIDEpXG4gICAgICAub24oJ21vdXNlZW50ZXInLCBtb3VzZWVudGVyKTtcblxuICAgIC8vIEdldCB0b3RhbCBzaXplIG9mIHRoZSB0cmVlID0gdmFsdWUgb2Ygcm9vdCBub2RlIGZyb20gcGFydGl0aW9uLlxuICAgIHRvdGFsU2l6ZSA9IHJvb3QudmFsdWU7XG4gIH1cbiAgY3JlYXRlQnJlYWRjcnVtYnMoZGF0YVswXSk7XG4gIGNyZWF0ZVZpc3VhbGl6YXRpb24oZGF0YSk7XG59XG5cblN1bmJ1cnN0LmRpc3BsYXlOYW1lID0gJ1N1bmJ1cnN0JztcblN1bmJ1cnN0LnByb3BUeXBlcyA9IHByb3BUeXBlcztcblxuZXhwb3J0IGRlZmF1bHQgU3VuYnVyc3Q7XG4iLCIvKipcbiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRhdGlvbiAoQVNGKSB1bmRlciBvbmVcbiAqIG9yIG1vcmUgY29udHJpYnV0b3IgbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZVxuICogZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3JtYXRpb25cbiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGVcbiAqIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGVcbiAqIFwiTGljZW5zZVwiKTsgeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZVxuICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLFxuICogc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW5cbiAqIFwiQVMgSVNcIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZXG4gKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZvciB0aGVcbiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnNcbiAqIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5pbXBvcnQgeyByZWFjdGlmeSB9IGZyb20gJ0BzdXBlcnNldC11aS9jb3JlJztcbmltcG9ydCBDb21wb25lbnQgZnJvbSAnLi9TdW5idXJzdCc7XG5cbmV4cG9ydCBkZWZhdWx0IHJlYWN0aWZ5KENvbXBvbmVudCk7XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBOzs7Ozs7QUFPQTtBQUtBO0FBa0JBOzs7OztBQzlCQTs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFrQkE7QUFjQTtBQUNBO0FBT0E7QUFZQTtBQUNBO0FBa0JBO0FBTUE7QUF3QkE7QUF5REE7QUFBQTtBQXNCQTtBQUVBO0FBeEJBO0FBb0RBO0FBSUE7QUFhQTtBQVVBO0FBQ0E7QUFXQTtBQTRCQTtBQVdBO0FBUUE7QUFHQTtBQW9CQTtBQUlBO0FBZUE7QUEyQ0E7QUFHQTtBQVVBO0FBRUE7QUFLQTtBQUdBO0FBYUE7QUF3QkE7QUFDQTtBQUdBO0FBRUE7QUF1QkE7O0FDdGRBOzs7Ozs7Ozs7Ozs7Ozs7OztBQWtCQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///2514\n')}}]);