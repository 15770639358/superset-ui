(window.webpackJsonp=window.webpackJsonp||[]).push([[36],{1117:function(module,exports,__webpack_require__){var api=__webpack_require__(172),content=__webpack_require__(1118);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1},exported=(api(content,options),content.locals?content.locals:{});module.exports=exported},1118:function(module,exports,__webpack_require__){(exports=__webpack_require__(173)(!1)).push([module.i,"/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\n.superset-legacy-chart-paired_ttest .scrollbar-container {\n  overflow: auto;\n}\n\n.paired-ttest-table .scrollbar-content {\n  padding-left: 5px;\n  padding-right: 5px;\n  margin-bottom: 0;\n}\n\n.paired-ttest-table table {\n  margin-bottom: 0;\n}\n\n.paired-ttest-table h1 {\n  margin-left: 5px;\n}\n\n.reactable-data tr,\n.reactable-header-sortable {\n  transition: ease-in-out 0.1s;\n}\n\n.reactable-data tr:hover {\n  background-color: #e0e0e0;\n}\n\n.reactable-data tr .false {\n  color: #f44336;\n}\n\n.reactable-data tr .true {\n  color: #4caf50;\n}\n\n.reactable-data tr .control {\n  color: #2196f3;\n}\n\n.reactable-data tr .invalid {\n  color: #ff9800;\n}\n\n.reactable-data .control td {\n  background-color: #eeeeee;\n}\n\n.reactable-header-sortable:hover,\n.reactable-header-sortable:focus,\n.reactable-header-sort-asc,\n.reactable-header-sort-desc {\n  background-color: #e0e0e0;\n  position: relative;\n}\n\n.reactable-header-sort-asc:after {\n  content: '\\25bc';\n  position: absolute;\n  right: 10px;\n}\n\n.reactable-header-sort-desc:after {\n  content: '\\25b2';\n  position: absolute;\n  right: 10px;\n}\n",""]),module.exports=exports},1261:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var prop_types=__webpack_require__(22),prop_types_default=__webpack_require__.n(prop_types),react=__webpack_require__(0),react_default=__webpack_require__.n(react),distributions=(__webpack_require__(1119),__webpack_require__(68),__webpack_require__(25),__webpack_require__(1122)),distributions_default=__webpack_require__.n(distributions),reactable=__webpack_require__(1129);const dataPropType=prop_types_default.a.arrayOf(prop_types_default.a.shape({group:prop_types_default.a.arrayOf(prop_types_default.a.string),values:prop_types_default.a.arrayOf(prop_types_default.a.shape({x:prop_types_default.a.number,y:prop_types_default.a.number}))})),propTypes={alpha:prop_types_default.a.number,data:dataPropType.isRequired,groups:prop_types_default.a.arrayOf(prop_types_default.a.string).isRequired,liftValPrec:prop_types_default.a.number,metric:prop_types_default.a.string.isRequired,pValPrec:prop_types_default.a.number};class TTestTable_TTestTable extends react_default.a.Component{constructor(props){super(props),this.state={control:0,liftValues:[],pValues:[]}}componentDidMount(){const{control:control}=this.state;this.computeTTest(control)}getLiftStatus(row){const{control:control,liftValues:liftValues}=this.state;if(row===control)return"control";const liftVal=liftValues[row];return Number.isNaN(liftVal)||!Number.isFinite(liftVal)?"invalid":0<=liftVal?"true":"false"}getPValueStatus(row){const{control:control,pValues:pValues}=this.state;if(row===control)return"control";const pVal=pValues[row];return Number.isNaN(pVal)||!Number.isFinite(pVal)?"invalid":""}getSignificance(row){const{control:control,pValues:pValues}=this.state,{alpha:alpha}=this.props;return row===control?"control":pValues[row]<=alpha}computeLift(values,control){const{liftValPrec:liftValPrec}=this.props;let sumValues=0,sumControl=0;return values.forEach((value,i)=>{sumValues+=value.y,sumControl+=control[i].y}),((sumValues-sumControl)/sumControl*100).toFixed(liftValPrec)}computePValue(values,control){const{pValPrec:pValPrec}=this.props;let diffSum=0,diffSqSum=0,finiteCount=0;values.forEach((value,i)=>{const diff=control[i].y-value.y;isFinite(diff)&&(finiteCount++,diffSum+=diff,diffSqSum+=diff*diff)});const tvalue=-Math.abs(diffSum*Math.sqrt((finiteCount-1)/(finiteCount*diffSqSum-diffSum*diffSum)));try{return(2*new distributions_default.a.Studentt(finiteCount-1).cdf(tvalue)).toFixed(pValPrec)}catch(error){return NaN}}computeTTest(control){const{data:data}=this.props,pValues=[],liftValues=[];if(data){for(let i=0;i<data.length;i++)i===control?(pValues.push("control"),liftValues.push("control")):(pValues.push(this.computePValue(data[i].values,data[control].values)),liftValues.push(this.computeLift(data[i].values,data[control].values)));this.setState({control:control,liftValues:liftValues,pValues:pValues})}}render(){const{data:data,metric:metric,groups:groups}=this.props,{control:control,liftValues:liftValues,pValues:pValues}=this.state,columns=groups.map((group,i)=>react_default.a.createElement(reactable.Th,{key:i,column:group},group)),numGroups=groups.length;columns.push(react_default.a.createElement(reactable.Th,{key:numGroups+1,column:"pValue"},"p-value")),columns.push(react_default.a.createElement(reactable.Th,{key:numGroups+2,column:"liftValue"},"Lift %")),columns.push(react_default.a.createElement(reactable.Th,{key:numGroups+3,column:"significant"},"Significant"));const rows=data.map((entry,i)=>{const values=groups.map((group,j)=>react_default.a.createElement(reactable.Td,{key:j,column:group,data:entry.group[j]}));return values.push(react_default.a.createElement(reactable.Td,{key:numGroups+1,className:this.getPValueStatus(i),column:"pValue",data:pValues[i]})),values.push(react_default.a.createElement(reactable.Td,{key:numGroups+2,className:this.getLiftStatus(i),column:"liftValue",data:liftValues[i]})),values.push(react_default.a.createElement(reactable.Td,{key:numGroups+3,className:this.getSignificance(i).toString(),column:"significant",data:this.getSignificance(i)})),react_default.a.createElement(reactable.Tr,{key:i,className:i===control?"control":"",onClick:this.computeTTest.bind(this,i)},values)}),sortConfig=groups.concat([{column:"pValue",sortFunction:(a,b)=>"control"===a?-1:"control"===b||a>b?1:-1},{column:"liftValue",sortFunction:(a,b)=>"control"===a?-1:"control"===b?1:parseFloat(a)>parseFloat(b)?-1:1},{column:"significant",sortFunction:(a,b)=>"control"===a?-1:"control"===b?1:a>b?-1:1}]);return react_default.a.createElement("div",null,react_default.a.createElement("h3",null,metric),react_default.a.createElement(reactable.Table,{className:"table",id:"table_".concat(metric),sortable:sortConfig},react_default.a.createElement(reactable.Thead,null,columns),rows))}}TTestTable_TTestTable.displayName="TTestTable",TTestTable_TTestTable.propTypes=propTypes,TTestTable_TTestTable.defaultProps={alpha:.05,liftValPrec:4,pValPrec:6},TTestTable_TTestTable.__docgenInfo={description:"",methods:[{name:"getLiftStatus",docblock:null,modifiers:[],params:[{name:"row",type:null}],returns:null},{name:"getPValueStatus",docblock:null,modifiers:[],params:[{name:"row",type:null}],returns:null},{name:"getSignificance",docblock:null,modifiers:[],params:[{name:"row",type:null}],returns:null},{name:"computeLift",docblock:null,modifiers:[],params:[{name:"values",type:null},{name:"control",type:null}],returns:null},{name:"computePValue",docblock:null,modifiers:[],params:[{name:"values",type:null},{name:"control",type:null}],returns:null},{name:"computeTTest",docblock:null,modifiers:[],params:[{name:"control",type:null}],returns:null}],displayName:"TTestTable",props:{alpha:{defaultValue:{value:"0.05",computed:!1},type:{name:"number"},required:!1,description:""},liftValPrec:{defaultValue:{value:"4",computed:!1},type:{name:"number"},required:!1,description:""},pValPrec:{defaultValue:{value:"6",computed:!1},type:{name:"number"},required:!1,description:""},data:{type:{name:"custom",raw:"dataPropType.isRequired"},required:!1,description:""},groups:{type:{name:"arrayOf",value:{name:"string"}},required:!0,description:""},metric:{type:{name:"string"},required:!0,description:""}}};var src_TTestTable=TTestTable_TTestTable;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../../plugins/legacy-plugin-chart-paired-t-test/src/TTestTable.jsx"]={name:"TTestTable",docgenInfo:TTestTable_TTestTable.__docgenInfo,path:"../../plugins/legacy-plugin-chart-paired-t-test/src/TTestTable.jsx"});__webpack_require__(1117);const PairedTTest_propTypes={alpha:prop_types_default.a.number,className:prop_types_default.a.string,data:prop_types_default.a.objectOf(dataPropType).isRequired,groups:prop_types_default.a.arrayOf(prop_types_default.a.string).isRequired,liftValPrec:prop_types_default.a.number,metrics:prop_types_default.a.arrayOf(prop_types_default.a.string).isRequired,pValPrec:prop_types_default.a.number};class PairedTTest_PairedTTest extends react_default.a.PureComponent{render(){const{className:className,metrics:metrics,groups:groups,data:data,alpha:alpha,pValPrec:pValPrec,liftValPrec:liftValPrec}=this.props;return react_default.a.createElement("div",{className:"superset-legacy-chart-paired-t-test ".concat(className)},react_default.a.createElement("div",{className:"paired-ttest-table scrollbar-container"},react_default.a.createElement("div",{className:"scrollbar-content"},metrics.map((metric,i)=>react_default.a.createElement(src_TTestTable,{key:i,metric:metric,groups:groups,data:data[metric],alpha:alpha,pValPrec:Math.min(pValPrec,32),liftValPrec:Math.min(liftValPrec,32)})))))}}PairedTTest_PairedTTest.displayName="PairedTTest",PairedTTest_PairedTTest.propTypes=PairedTTest_propTypes,PairedTTest_PairedTTest.defaultProps={alpha:.05,className:"",liftValPrec:4,pValPrec:6},PairedTTest_PairedTTest.__docgenInfo={description:"",methods:[],displayName:"PairedTTest",props:{alpha:{defaultValue:{value:"0.05",computed:!1},type:{name:"number"},required:!1,description:""},className:{defaultValue:{value:"''",computed:!1},type:{name:"string"},required:!1,description:""},liftValPrec:{defaultValue:{value:"4",computed:!1},type:{name:"number"},required:!1,description:""},pValPrec:{defaultValue:{value:"6",computed:!1},type:{name:"number"},required:!1,description:""},data:{type:{name:"objectOf",value:{name:"custom",raw:"dataPropType"}},required:!0,description:""},groups:{type:{name:"arrayOf",value:{name:"string"}},required:!0,description:""},metrics:{type:{name:"arrayOf",value:{name:"string"}},required:!0,description:""}}};__webpack_exports__.default=PairedTTest_PairedTTest;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../../plugins/legacy-plugin-chart-paired-t-test/src/PairedTTest.jsx"]={name:"PairedTTest",docgenInfo:PairedTTest_PairedTTest.__docgenInfo,path:"../../plugins/legacy-plugin-chart-paired-t-test/src/PairedTTest.jsx"})}}]);
//# sourceMappingURL=36.d886fa82eba8c89a9a58.bundle.js.map