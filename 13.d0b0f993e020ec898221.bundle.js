(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{803:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return implicit})),__webpack_require__.d(__webpack_exports__,"a",(function(){return ordinal}));var _init_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(239);const implicit=Symbol("implicit");function ordinal(){var index=new Map,domain=[],range=[],unknown=implicit;function scale(d){var key=d+"",i=index.get(key);if(!i){if(unknown!==implicit)return unknown;index.set(key,i=domain.push(d))}return range[(i-1)%range.length]}return scale.domain=function(_){if(!arguments.length)return domain.slice();domain=[],index=new Map;for(const value of _){const key=value+"";index.has(key)||index.set(key,domain.push(value))}return scale},scale.range=function(_){return arguments.length?(range=Array.from(_),scale):range.slice()},scale.unknown=function(_){return arguments.length?(unknown=_,scale):unknown},scale.copy=function(){return ordinal(domain,range).unknown(unknown)},_init_js__WEBPACK_IMPORTED_MODULE_0__.b.apply(scale,arguments),scale}},820:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return src_nest})),__webpack_require__.d(__webpack_exports__,"a",(function(){return src_map}));function Map(){}function map(object,f){var map=new Map;if(object instanceof Map)object.each((function(value,key){map.set(key,value)}));else if(Array.isArray(object)){var o,i=-1,n=object.length;if(null==f)for(;++i<n;)map.set(i,object[i]);else for(;++i<n;)map.set(f(o=object[i],i,object),o)}else if(object)for(var key in object)map.set(key,object[key]);return map}Map.prototype=map.prototype={constructor:Map,has:function(key){return"$"+key in this},get:function(key){return this["$"+key]},set:function(key,value){return this["$"+key]=value,this},remove:function(key){var property="$"+key;return property in this&&delete this[property]},clear:function(){for(var property in this)"$"===property[0]&&delete this[property]},keys:function(){var keys=[];for(var property in this)"$"===property[0]&&keys.push(property.slice(1));return keys},values:function(){var values=[];for(var property in this)"$"===property[0]&&values.push(this[property]);return values},entries:function(){var entries=[];for(var property in this)"$"===property[0]&&entries.push({key:property.slice(1),value:this[property]});return entries},size:function(){var size=0;for(var property in this)"$"===property[0]&&++size;return size},empty:function(){for(var property in this)if("$"===property[0])return!1;return!0},each:function(f){for(var property in this)"$"===property[0]&&f(this[property],property.slice(1),this)}};var src_map=map,src_nest=function(){var sortValues,rollup,nest,keys=[],sortKeys=[];function apply(array,depth,createResult,setResult){if(depth>=keys.length)return null!=sortValues&&array.sort(sortValues),null!=rollup?rollup(array):array;for(var keyValue,value,values,i=-1,n=array.length,key=keys[depth++],valuesByKey=src_map(),result=createResult();++i<n;)(values=valuesByKey.get(keyValue=key(value=array[i])+""))?values.push(value):valuesByKey.set(keyValue,[value]);return valuesByKey.each((function(values,key){setResult(result,key,apply(values,depth,createResult,setResult))})),result}return nest={object:function(array){return apply(array,0,createObject,setObject)},map:function(array){return apply(array,0,createMap,setMap)},entries:function(array){return function entries(map,depth){if(++depth>keys.length)return map;var array,sortKey=sortKeys[depth-1];return null!=rollup&&depth>=keys.length?array=map.entries():(array=[],map.each((function(v,k){array.push({key:k,values:entries(v,depth)})}))),null!=sortKey?array.sort((function(a,b){return sortKey(a.key,b.key)})):array}(apply(array,0,createMap,setMap),0)},key:function(d){return keys.push(d),nest},sortKeys:function(order){return sortKeys[keys.length-1]=order,nest},sortValues:function(order){return sortValues=order,nest},rollup:function(f){return rollup=f,nest}}};function createObject(){return{}}function setObject(object,key,value){object[key]=value}function createMap(){return src_map()}function setMap(map,key,value){map.set(key,value)}function Set(){}var proto=src_map.prototype;function set(object,f){var set=new Set;if(object instanceof Set)object.each((function(value){set.add(value)}));else if(object){var i=-1,n=object.length;if(null==f)for(;++i<n;)set.add(object[i]);else for(;++i<n;)set.add(f(object[i],i,object))}return set}Set.prototype=set.prototype={constructor:Set,has:proto.has,add:function(value){return this["$"+(value+="")]=value,this},remove:proto.remove,clear:proto.clear,values:proto.keys,size:proto.size,empty:proto.empty,each:proto.each}},933:function(module,exports,__webpack_require__){var api=__webpack_require__(168),content=__webpack_require__(934);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1},exported=(api(content,options),content.locals?content.locals:{});module.exports=exported},934:function(module,exports,__webpack_require__){(exports=__webpack_require__(169)(!1)).push([module.i,'/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * "License"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\n.superset-legacy-chart-sankey .node rect {\n  cursor: move;\n  fill-opacity: 0.9;\n  shape-rendering: crispEdges;\n}\n\n.superset-legacy-chart-sankey .node text {\n  pointer-events: none;\n  text-shadow: 0 1px 0 #fff;\n}\n\n.superset-legacy-chart-sankey .link {\n  fill: none;\n  stroke: #000;\n  stroke-opacity: 0.2;\n}\n\n.superset-legacy-chart-sankey .link:hover {\n  stroke-opacity: 0.5;\n}\n\n.superset-legacy-chart-sankey-tooltip {\n  position: absolute;\n  width: auto;\n  background: #ddd;\n  padding: 10px;\n  font-size: 12px;\n  font-weight: 200;\n  color: #333;\n  border: 1px solid #fff;\n  text-align: center;\n  pointer-events: none;\n}\n',""]),module.exports=exports},997:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var reactify=__webpack_require__(827),d3=__webpack_require__(807),d3_default=__webpack_require__.n(d3),prop_types=__webpack_require__(20),prop_types_default=__webpack_require__.n(prop_types),ascending=function(a,b){return a<b?-1:a>b?1:a>=b?0:NaN};var compare;1===(compare=ascending).length&&(compare=function ascendingComparator(f){return function(d,x){return ascending(f(d),x)}}(compare));var array_array=Array.prototype;array_array.slice,array_array.map,Math.sqrt(50),Math.sqrt(10),Math.sqrt(2);var src_min=function(values,valueof){var value,min,n=values.length,i=-1;if(null==valueof){for(;++i<n;)if(null!=(value=values[i])&&value>=value)for(min=value;++i<n;)null!=(value=values[i])&&min>value&&(min=value)}else for(;++i<n;)if(null!=(value=valueof(values[i],i,values))&&value>=value)for(min=value;++i<n;)null!=(value=valueof(values[i],i,values))&&min>value&&(min=value);return min},src_sum=function(values,valueof){var value,n=values.length,i=-1,sum=0;if(null==valueof)for(;++i<n;)(value=+values[i])&&(sum+=value);else for(;++i<n;)(value=+valueof(values[i],i,values))&&(sum+=value);return sum};var src=__webpack_require__(820),src_number=__webpack_require__(114),src_sankey=function(){var sankey={},nodeWidth=24,nodePadding=8,size=[1,1],nodes=[],links=[];function computeLinkDepths(){function ascendingSourceDepth(a,b){return a.source.y-b.source.y}function ascendingTargetDepth(a,b){return a.target.y-b.target.y}nodes.forEach((function(node){node.sourceLinks.sort(ascendingTargetDepth),node.targetLinks.sort(ascendingSourceDepth)})),nodes.forEach((function(node){var sy=0,ty=0;node.sourceLinks.forEach((function(link){link.sy=sy,sy+=link.dy})),node.targetLinks.forEach((function(link){link.ty=ty,ty+=link.dy}))}))}function center(node){return node.y+node.dy/2}function value(link){return link.value}return sankey.nodeWidth=function(_){return arguments.length?(nodeWidth=+_,sankey):nodeWidth},sankey.nodePadding=function(_){return arguments.length?(nodePadding=+_,sankey):nodePadding},sankey.nodes=function(_){return arguments.length?(nodes=_,sankey):nodes},sankey.links=function(_){return arguments.length?(links=_,sankey):links},sankey.size=function(_){return arguments.length?(size=_,sankey):size},sankey.layout=function(iterations){return function computeNodeLinks(){nodes.forEach((function(node){node.sourceLinks=[],node.targetLinks=[]})),links.forEach((function(link){var source=link.source,target=link.target;"number"==typeof source&&(source=link.source=nodes[link.source]),"number"==typeof target&&(target=link.target=nodes[link.target]),source.sourceLinks.push(link),target.targetLinks.push(link)}))}(),function computeNodeValues(){nodes.forEach((function(node){node.value=Math.max(src_sum(node.sourceLinks,value),src_sum(node.targetLinks,value))}))}(),function computeNodeBreadths(){var nextNodes,remainingNodes=nodes,x=0;for(;remainingNodes.length;)nextNodes=[],remainingNodes.forEach((function(node){node.x=x,node.dx=nodeWidth,node.sourceLinks.forEach((function(link){nextNodes.indexOf(link.target)<0&&nextNodes.push(link.target)}))})),remainingNodes=nextNodes,++x;(function moveSinksRight(x){nodes.forEach((function(node){node.sourceLinks.length||(node.x=x-1)}))})(x),function scaleNodeBreadths(kx){nodes.forEach((function(node){node.x*=kx}))}((size[0]-nodeWidth)/(x-1))}(),function computeNodeDepths(iterations){var nodesByBreadth=Object(src.b)().key((function(d){return d.x})).sortKeys(ascending).entries(nodes).map((function(d){return d.values}));(function initializeNodeDepth(){var ky=src_min(nodesByBreadth,(function(nodes){return(size[1]-(nodes.length-1)*nodePadding)/src_sum(nodes,value)}));nodesByBreadth.forEach((function(nodes){nodes.forEach((function(node,i){node.y=i,node.dy=node.value*ky}))})),links.forEach((function(link){link.dy=link.value*ky}))})(),resolveCollisions();for(var alpha=1;iterations>0;--iterations)relaxRightToLeft(alpha*=.99),resolveCollisions(),relaxLeftToRight(alpha),resolveCollisions();function relaxLeftToRight(alpha){function weightedSource(link){return center(link.source)*link.value}nodesByBreadth.forEach((function(nodes){nodes.forEach((function(node){if(node.targetLinks.length){var y=src_sum(node.targetLinks,weightedSource)/src_sum(node.targetLinks,value);node.y+=(y-center(node))*alpha}}))}))}function relaxRightToLeft(alpha){function weightedTarget(link){return center(link.target)*link.value}nodesByBreadth.slice().reverse().forEach((function(nodes){nodes.forEach((function(node){if(node.sourceLinks.length){var y=src_sum(node.sourceLinks,weightedTarget)/src_sum(node.sourceLinks,value);node.y+=(y-center(node))*alpha}}))}))}function resolveCollisions(){nodesByBreadth.forEach((function(nodes){var node,dy,i,y0=0,n=nodes.length;for(nodes.sort(ascendingDepth),i=0;i<n;++i)(dy=y0-(node=nodes[i]).y)>0&&(node.y+=dy),y0=node.y+node.dy+nodePadding;if((dy=y0-nodePadding-size[1])>0)for(y0=node.y-=dy,i=n-2;i>=0;--i)(dy=(node=nodes[i]).y+node.dy+nodePadding-y0)>0&&(node.y-=dy),y0=node.y}))}function ascendingDepth(a,b){return a.y-b.y}}(iterations),computeLinkDepths(),sankey},sankey.relayout=function(){return computeLinkDepths(),sankey},sankey.link=function(){var curvature=.5;function link(d){var x0=d.source.x+d.source.dx,x1=d.target.x,xi=Object(src_number.a)(x0,x1),x2=xi(curvature),x3=xi(1-curvature),y0=d.source.y+d.sy+d.dy/2,y1=d.target.y+d.ty+d.dy/2;return"M"+x0+","+y0+"C"+x2+","+y0+" "+x3+","+y1+" "+x1+","+y1}return link.curvature=function(_){return arguments.length?(curvature=+_,link):curvature},link},sankey},superset_ui_color_src=__webpack_require__(775),NumberFormatterRegistrySingleton=__webpack_require__(391),NumberFormats=__webpack_require__(73);__webpack_require__(933);function _extends(){return(_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target}).apply(this,arguments)}const propTypes={data:prop_types_default.a.arrayOf(prop_types_default.a.shape({source:prop_types_default.a.string,target:prop_types_default.a.string,value:prop_types_default.a.number})),width:prop_types_default.a.number,height:prop_types_default.a.number,colorScheme:prop_types_default.a.string},formatNumber=Object(NumberFormatterRegistrySingleton.c)(NumberFormats.a.FLOAT);function Sankey_Sankey(element,props){const{data:data,width:width,height:height,colorScheme:colorScheme}=props,div=d3_default.a.select(element);div.classed("superset-legacy-chart-sankey",!0);const margin_top=5,margin_right=5,margin_bottom=5,margin_left=5,innerWidth=width-margin_left-margin_right,innerHeight=height-margin_top-margin_bottom;div.selectAll("*").remove();const svg=div.append("svg").attr("width",innerWidth+margin_left+margin_right).attr("height",innerHeight+margin_top+margin_bottom).append("g").attr("transform","translate("+margin_left+","+margin_top+")"),tooltip=div.append("div").attr("class","sankey-tooltip").style("opacity",0),colorFn=superset_ui_color_src.CategoricalColorNamespace.getScale(colorScheme),sankey=src_sankey().nodeWidth(15).nodePadding(10).size([innerWidth,innerHeight]),path=sankey.link();let nodes={};const links=data.map(row=>{const link=_extends({},row);return link.source=nodes[link.source]||(nodes[link.source]={name:link.source}),link.target=nodes[link.target]||(nodes[link.target]={name:link.target}),link.value=Number(link.value),link});function onmouseover(d){tooltip.html(()=>function getTooltipHtml(d){let html;if(d.sourceLinks)html=d.name+" Value: <span class='emph'>"+formatNumber(d.value)+"</span>";else{const val=formatNumber(d.value),sourcePercent=d3_default.a.round(d.value/d.source.value*100,1),targetPercent=d3_default.a.round(d.value/d.target.value*100,1);html=["<div class=''>Path Value: <span class='emph'>",val,"</span></div>","<div class='percents'>","<span class='emph'>",Number.isFinite(sourcePercent)?sourcePercent:"100","%</span> of ",d.source.name,"<br/>","<span class='emph'>"+(Number.isFinite(targetPercent)?targetPercent:"--")+"%</span> of ",d.target.name,"</div>"].join("")}return html}(d)).transition().duration(200).style("left",d3_default.a.event.offsetX+10+"px").style("top",d3_default.a.event.offsetY+10+"px").style("opacity",.95)}function onmouseout(){tooltip.transition().duration(100).style("opacity",0)}nodes=d3_default.a.values(nodes),sankey.nodes(nodes).links(links).layout(32);const link=svg.append("g").selectAll(".link").data(links).enter().append("path").attr("class","link").attr("d",path).style("stroke-width",d=>Math.max(1,d.dy)).sort((a,b)=>b.dy-a.dy).on("mouseover",onmouseover).on("mouseout",onmouseout);const node=svg.append("g").selectAll(".node").data(nodes).enter().append("g").attr("class","node").attr("transform",d=>"translate("+d.x+","+d.y+")").call(d3_default.a.behavior.drag().origin(d=>d).on("dragstart",(function dragStart(){this.parentNode.append(this)})).on("drag",(function dragmove(d){d3_default.a.select(this).attr("transform","translate("+d.x+","+(d.y=Math.max(0,Math.min(height-d.dy,d3_default.a.event.y)))+")"),sankey.relayout(),link.attr("d",path)})));node.append("rect").attr("height",d=>d.dy>5?d.dy:5).attr("width",sankey.nodeWidth()).style("fill",d=>{const name=d.name||"N/A";return d.color=colorFn(name.replace(/ .*/,"")),d.color}).style("stroke",d=>d3_default.a.rgb(d.color).darker(2)).on("mouseover",onmouseover).on("mouseout",onmouseout),node.append("text").attr("x",-6).attr("y",d=>d.dy/2).attr("dy",".35em").attr("text-anchor","end").attr("transform",null).text(d=>d.name).filter(d=>d.x<innerWidth/2).attr("x",6+sankey.nodeWidth()).attr("text-anchor","start")}Sankey_Sankey.displayName="Sankey",Sankey_Sankey.propTypes=propTypes;var esm_Sankey=Sankey_Sankey;__webpack_exports__.default=Object(reactify.a)(esm_Sankey)}}]);
//# sourceMappingURL=13.d0b0f993e020ec898221.bundle.js.map