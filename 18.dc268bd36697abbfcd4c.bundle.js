(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{1177:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return reactify}));var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);function reactify(renderFn,callbacks){class ReactifiedComponent extends react__WEBPACK_IMPORTED_MODULE_0___default.a.Component{constructor(props){super(props),this.setContainerRef=this.setContainerRef.bind(this)}componentDidMount(){this.execute()}componentDidUpdate(){this.execute()}componentWillUnmount(){this.container=void 0,(null==callbacks?void 0:callbacks.componentWillUnmount)&&callbacks.componentWillUnmount.bind(this)()}setContainerRef(ref){this.container=ref}execute(){this.container&&renderFn(this.container,this.props)}render(){const{id:id,className:className}=this.props;return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div",{ref:this.setContainerRef,id:id,className:className})}}const ReactifiedClass=ReactifiedComponent;return renderFn.displayName&&(ReactifiedClass.displayName=renderFn.displayName),renderFn.propTypes&&(ReactifiedClass.propTypes=Object.assign(Object.assign({},ReactifiedClass.propTypes),renderFn.propTypes)),renderFn.defaultProps&&(ReactifiedClass.defaultProps=renderFn.defaultProps),ReactifiedComponent}},1551:function(module,exports,__webpack_require__){var api=__webpack_require__(272),content=__webpack_require__(1552);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1},exported=(api(content,options),content.locals?content.locals:{});module.exports=exported},1552:function(module,exports,__webpack_require__){(exports=__webpack_require__(273)(!1)).push([module.i,'/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * "License"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\n.superset-legacy-chart-country-map svg {\n  background-color: #feffff;\n}\n\n.superset-legacy-chart-country-map {\n  position: relative;\n}\n\n.superset-legacy-chart-country-map .background {\n  fill: rgba(255, 255, 255, 0);\n  pointer-events: all;\n}\n\n.superset-legacy-chart-country-map .map-layer {\n  fill: #fff;\n  stroke: #aaa;\n}\n\n.superset-legacy-chart-country-map .effect-layer {\n  pointer-events: none;\n}\n\n.superset-legacy-chart-country-map .text-layer {\n  color: #333333;\n  text-anchor: middle;\n  pointer-events: none;\n}\n\n.superset-legacy-chart-country-map text.result-text {\n  font-weight: 300;\n  font-size: 24px;\n}\n\n.superset-legacy-chart-country-map text.big-text {\n  font-weight: 700;\n  font-size: 16px;\n}\n\n.superset-legacy-chart-country-map path.region {\n  cursor: pointer;\n  stroke: #eee;\n}\n',""]),module.exports=exports},1553:function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"647f3b061407d2df992b141838c6a9fd.geojson"},1554:function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"5f64d14062abb5f5fd6610972976ebe6.geojson"},1555:function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"5ba53f6ca41eea9fcd804bb85b15b717.geojson"},1556:function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"86469739648332fa1144cb8cb2127c10.geojson"},1557:function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"e2b4b67c1386e8a5955cd5adc8072937.geojson"},1558:function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"a8835fa1f5787fe6c859bbf27451669c.geojson"},1559:function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"e5a566e2a4a20c76b6ceb68898b4551c.geojson"},1560:function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"c4f01c1b263f64ebf76fd32988955ee5.geojson"},1561:function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"fbe4c49c9d7f8096ee1e8d6e15f7d89b.geojson"},1562:function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"eac4e606a790dc58734d64abe051c0ce.geojson"},1563:function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"f3c7f8f357bd44946bd2bd448859bda4.geojson"},1564:function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"33560d2fbb7709aa4678a7d6b3e58de2.geojson"},1565:function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"6d76a3e09e096cb8b2847229809ede46.geojson"},1566:function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"92586e10bd0fc50d383f065848f9ff30.geojson"},1567:function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"bbf6ca5c90a4692792cb7fdfdad73104.geojson"},1568:function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"0135d056b222ed13c7c12cd018051192.geojson"},1569:function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"bb3889bfa65fcf72a4eca68e7ab91e64.geojson"},1570:function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"a05665706019af9fc61b0dc71b4e706f.geojson"},1571:function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"f643464ab125c1e94588d58ac77d2704.geojson"},1572:function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"9f521e1094332bf3de8bbcc9ce2170a0.geojson"},1573:function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"f0de53f3380e55031f5ed7e0986c7b67.geojson"},1574:function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"75b84c13b90b14e8d6f512f522ec3897.geojson"},1575:function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"402430a4e9f8931d5362e650c9ab391f.geojson"},1576:function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"fe50f1df71b69257315717808fb60e86.geojson"},1577:function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"420625849885a90999dd7f0eea575435.geojson"},1578:function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"d837f5941b13844653f61455735424f7.geojson"},1579:function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"1680a595633a783cd68d7f6509bc5326.geojson"},1580:function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"692564493e0a03962af1d1e73bf8b590.geojson"},2131:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var reactify=__webpack_require__(1177),d3=(__webpack_require__(117),__webpack_require__(40),__webpack_require__(92)),d3_default=__webpack_require__.n(d3),prop_types=__webpack_require__(4),prop_types_default=__webpack_require__.n(prop_types),extent=__webpack_require__(259),SequentialSchemeRegistrySingleton=__webpack_require__(358),NumberFormatterRegistrySingleton=__webpack_require__(91),belgium_geojson=__webpack_require__(1553),belgium_geojson_default=__webpack_require__.n(belgium_geojson),brazil_geojson=__webpack_require__(1554),brazil_geojson_default=__webpack_require__.n(brazil_geojson),bulgaria_geojson=__webpack_require__(1555),bulgaria_geojson_default=__webpack_require__.n(bulgaria_geojson),canada_geojson=__webpack_require__(1556),canada_geojson_default=__webpack_require__.n(canada_geojson),china_geojson=__webpack_require__(1557),china_geojson_default=__webpack_require__.n(china_geojson),egypt_geojson=__webpack_require__(1558),egypt_geojson_default=__webpack_require__.n(egypt_geojson),france_geojson=__webpack_require__(1559),france_geojson_default=__webpack_require__.n(france_geojson),germany_geojson=__webpack_require__(1560),germany_geojson_default=__webpack_require__.n(germany_geojson),india_geojson=__webpack_require__(1561),india_geojson_default=__webpack_require__.n(india_geojson),iran_geojson=__webpack_require__(1562),iran_geojson_default=__webpack_require__.n(iran_geojson),italy_geojson=__webpack_require__(1563),italy_geojson_default=__webpack_require__.n(italy_geojson),japan_geojson=__webpack_require__(1564),japan_geojson_default=__webpack_require__.n(japan_geojson),korea_geojson=__webpack_require__(1565),korea_geojson_default=__webpack_require__.n(korea_geojson),liechtenstein_geojson=__webpack_require__(1566),liechtenstein_geojson_default=__webpack_require__.n(liechtenstein_geojson),morocco_geojson=__webpack_require__(1567),morocco_geojson_default=__webpack_require__.n(morocco_geojson),myanmar_geojson=__webpack_require__(1568),myanmar_geojson_default=__webpack_require__.n(myanmar_geojson),netherlands_geojson=__webpack_require__(1569),netherlands_geojson_default=__webpack_require__.n(netherlands_geojson),portugal_geojson=__webpack_require__(1570),portugal_geojson_default=__webpack_require__.n(portugal_geojson),russia_geojson=__webpack_require__(1571),russia_geojson_default=__webpack_require__.n(russia_geojson),singapore_geojson=__webpack_require__(1572),singapore_geojson_default=__webpack_require__.n(singapore_geojson),spain_geojson=__webpack_require__(1573),spain_geojson_default=__webpack_require__.n(spain_geojson),switzerland_geojson=__webpack_require__(1574),switzerland_geojson_default=__webpack_require__.n(switzerland_geojson),thailand_geojson=__webpack_require__(1575),thailand_geojson_default=__webpack_require__.n(thailand_geojson),timorleste_geojson=__webpack_require__(1576),timorleste_geojson_default=__webpack_require__.n(timorleste_geojson),uk_geojson=__webpack_require__(1577),uk_geojson_default=__webpack_require__.n(uk_geojson),ukraine_geojson=__webpack_require__(1578),ukraine_geojson_default=__webpack_require__.n(ukraine_geojson),usa_geojson=__webpack_require__(1579),usa_geojson_default=__webpack_require__.n(usa_geojson),zambia_geojson=__webpack_require__(1580),zambia_geojson_default=__webpack_require__.n(zambia_geojson);var src_countries={belgium:belgium_geojson_default.a,brazil:brazil_geojson_default.a,bulgaria:bulgaria_geojson_default.a,canada:canada_geojson_default.a,china:china_geojson_default.a,egypt:egypt_geojson_default.a,france:france_geojson_default.a,germany:germany_geojson_default.a,india:india_geojson_default.a,iran:iran_geojson_default.a,italy:italy_geojson_default.a,japan:japan_geojson_default.a,korea:korea_geojson_default.a,liechtenstein:liechtenstein_geojson_default.a,morocco:morocco_geojson_default.a,myanmar:myanmar_geojson_default.a,netherlands:netherlands_geojson_default.a,portugal:portugal_geojson_default.a,russia:russia_geojson_default.a,singapore:singapore_geojson_default.a,spain:spain_geojson_default.a,switzerland:switzerland_geojson_default.a,thailand:thailand_geojson_default.a,timorleste:timorleste_geojson_default.a,uk:uk_geojson_default.a,ukraine:ukraine_geojson_default.a,usa:usa_geojson_default.a,zambia:zambia_geojson_default.a};__webpack_require__(1551);const propTypes={data:prop_types_default.a.arrayOf(prop_types_default.a.shape({country_id:prop_types_default.a.string,metric:prop_types_default.a.number})),width:prop_types_default.a.number,height:prop_types_default.a.number,country:prop_types_default.a.string,linearColorScheme:prop_types_default.a.string,mapBaseUrl:prop_types_default.a.string,numberFormat:prop_types_default.a.string},maps={};function CountryMap_CountryMap(element,props){const{data:data,width:width,height:height,country:country,linearColorScheme:linearColorScheme,numberFormat:numberFormat}=props,container=element,format=Object(NumberFormatterRegistrySingleton.c)(numberFormat),colorScale=Object(SequentialSchemeRegistrySingleton.a)().get(linearColorScheme).createLinearScale(Object(extent.a)(data,v=>v.metric)),colorMap={};data.forEach(d=>{colorMap[d.country_id]=colorScale(d.metric)});const colorFn=d=>colorMap[d.properties.ISO]||"none",path=d3_default.a.geo.path(),div=d3_default.a.select(container);div.classed("superset-legacy-chart-country-map",!0),div.selectAll("*").remove(),container.style.height="".concat(height,"px"),container.style.width="".concat(width,"px");const svg=div.append("svg:svg").attr("width",width).attr("height",height).attr("preserveAspectRatio","xMidYMid meet"),backgroundRect=svg.append("rect").attr("class","background").attr("width",width).attr("height",height),g=svg.append("g"),mapLayer=g.append("g").classed("map-layer",!0),textLayer=g.append("g").classed("text-layer",!0).attr("transform","translate(".concat(width/2,", 45)")),bigText=textLayer.append("text").classed("big-text",!0),resultText=textLayer.append("text").classed("result-text",!0).attr("dy","1em");let centered;const clicked=function(d){const hasCenter=d&&centered!==d;let x,y,k;const halfWidth=width/2,halfHeight=height/2;if(hasCenter){const centroid=path.centroid(d);[x,y]=centroid,k=4,centered=d}else x=halfWidth,y=halfHeight,k=1,centered=null;g.transition().duration(750).attr("transform","translate(".concat(halfWidth,",").concat(halfHeight,")scale(").concat(k,")translate(").concat(-x,",").concat(-y,")")),textLayer.style("opacity",0).attr("transform","translate(0,0)translate(".concat(x,",").concat(hasCenter?y-5:45,")")).transition().duration(750).style("opacity",1),bigText.transition().duration(750).style("font-size",hasCenter?6:16),resultText.transition().duration(750).style("font-size",hasCenter?16:24)};backgroundRect.on("click",clicked);const mouseenter=function(d){let c=colorFn(d);"none"!==c&&(c=d3_default.a.rgb(c).darker().toString()),d3_default.a.select(this).style("fill",c),function(feature){let name="";feature&&feature.properties&&(name=feature.properties.ID_2?feature.properties.NAME_2:feature.properties.NAME_1),bigText.text(name)}(d);const result=data.filter(region=>region.country_id===d.properties.ISO);var region;0<(region=result).length&&resultText.text(format(region[0].metric))},mouseout=function(){d3_default.a.select(this).style("fill",colorFn),bigText.text(""),resultText.text("")};function drawMap(mapData){const{features:features}=mapData,center=d3_default.a.geo.centroid(mapData),projection=d3_default.a.geo.mercator().scale(100).center(center).translate([width/2,height/2]);path.projection(projection);const bounds=path.bounds(mapData),hscale=100*width/(bounds[1][0]-bounds[0][0]),vscale=100*height/(bounds[1][1]-bounds[0][1]),newScale=hscale<vscale?hscale:vscale;projection.scale(newScale);const newBounds=path.bounds(mapData);projection.translate([width-(newBounds[0][0]+newBounds[1][0])/2,height-(newBounds[0][1]+newBounds[1][1])/2]),mapLayer.selectAll("path").data(features).enter().append("path").attr("d",path).attr("class","region").attr("vector-effect","non-scaling-stroke").style("fill",colorFn).on("mouseenter",mouseenter).on("mouseout",mouseout).on("click",clicked)}const countryKey=country.toLowerCase(),map=maps[countryKey];if(map)drawMap(map);else{const url=src_countries[countryKey];d3_default.a.json(url,(error,mapData)=>{error||(maps[countryKey]=mapData,drawMap(mapData))})}}CountryMap_CountryMap.displayName="CountryMap",CountryMap_CountryMap.propTypes=propTypes;var src_CountryMap=CountryMap_CountryMap;__webpack_exports__.default=Object(reactify.a)(src_CountryMap)}}]);
//# sourceMappingURL=18.dc268bd36697abbfcd4c.bundle.js.map