(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{1085:function(module,exports,__webpack_require__){var d3=__webpack_require__(871);d3.legend=__webpack_require__(1086),module.exports=d3},1086:function(module,exports,__webpack_require__){module.exports={color:__webpack_require__(1087),size:__webpack_require__(1088),symbol:__webpack_require__(1089)}},1087:function(module,exports,__webpack_require__){var helper=__webpack_require__(950);module.exports=function(){var path,scale=d3.scale.linear(),shape="rect",shapeWidth=15,shapeHeight=15,shapeRadius=10,shapePadding=2,cells=[5],labels=[],classPrefix="",useClass=!1,title="",labelFormat=d3.format(".01f"),labelOffset=10,labelAlign="middle",labelDelimiter="to",orient="vertical",ascending=!1,legendDispatcher=d3.dispatch("cellover","cellout","cellclick");function legend(svg){var type=helper.d3_calcType(scale,ascending,cells,labels,labelFormat,labelDelimiter),legendG=svg.selectAll("g").data([scale]);legendG.enter().append("g").attr("class",classPrefix+"legendCells");var cell=legendG.selectAll("."+classPrefix+"cell").data(type.data),cellEnter=cell.enter().append("g",".cell").attr("class",classPrefix+"cell").style("opacity",1e-6),shapes=(cellEnter.append(shape).attr("class",classPrefix+"swatch"),cell.select("g."+classPrefix+"cell "+shape));helper.d3_addEvents(cellEnter,legendDispatcher),cell.exit().transition().style("opacity",0).remove(),helper.d3_drawShapes(shape,shapes,shapeHeight,shapeWidth,shapeRadius,path),helper.d3_addText(legendG,cellEnter,type.labels,classPrefix);var text=cell.select("text"),shapeSize=shapes[0].map((function(d){return d.getBBox()}));useClass?shapes.attr("class",(function(d){return classPrefix+"swatch "+type.feature(d)})):"line"==shape?shapes.style("stroke",type.feature):shapes.style("fill",type.feature);var cellTrans,textTrans,textAlign="start"==labelAlign?0:"middle"==labelAlign?.5:1;"vertical"===orient?(cellTrans=function(d,i){return"translate(0, "+i*(shapeSize[i].height+shapePadding)+")"},textTrans=function(d,i){return"translate("+(shapeSize[i].width+shapeSize[i].x+labelOffset)+","+(shapeSize[i].y+shapeSize[i].height/2+5)+")"}):"horizontal"===orient&&(cellTrans=function(d,i){return"translate("+i*(shapeSize[i].width+shapePadding)+",0)"},textTrans=function(d,i){return"translate("+(shapeSize[i].width*textAlign+shapeSize[i].x)+","+(shapeSize[i].height+shapeSize[i].y+labelOffset+8)+")"}),helper.d3_placement(orient,cell,cellTrans,text,textTrans,labelAlign),helper.d3_title(svg,legendG,title,classPrefix),cell.transition().style("opacity",1)}return legend.scale=function(_){return arguments.length?(scale=_,legend):scale},legend.cells=function(_){return arguments.length?((_.length>1||_>=2)&&(cells=_),legend):cells},legend.shape=function(_,d){return arguments.length?(("rect"==_||"circle"==_||"line"==_||"path"==_&&"string"==typeof d)&&(shape=_,path=d),legend):shape},legend.shapeWidth=function(_){return arguments.length?(shapeWidth=+_,legend):shapeWidth},legend.shapeHeight=function(_){return arguments.length?(shapeHeight=+_,legend):shapeHeight},legend.shapeRadius=function(_){return arguments.length?(shapeRadius=+_,legend):shapeRadius},legend.shapePadding=function(_){return arguments.length?(shapePadding=+_,legend):shapePadding},legend.labels=function(_){return arguments.length?(labels=_,legend):labels},legend.labelAlign=function(_){return arguments.length?("start"!=_&&"end"!=_&&"middle"!=_||(labelAlign=_),legend):labelAlign},legend.labelFormat=function(_){return arguments.length?(labelFormat=_,legend):labelFormat},legend.labelOffset=function(_){return arguments.length?(labelOffset=+_,legend):labelOffset},legend.labelDelimiter=function(_){return arguments.length?(labelDelimiter=_,legend):labelDelimiter},legend.useClass=function(_){return arguments.length?(!0!==_&&!1!==_||(useClass=_),legend):useClass},legend.orient=function(_){return arguments.length?("horizontal"!=(_=_.toLowerCase())&&"vertical"!=_||(orient=_),legend):orient},legend.ascending=function(_){return arguments.length?(ascending=!!_,legend):ascending},legend.classPrefix=function(_){return arguments.length?(classPrefix=_,legend):classPrefix},legend.title=function(_){return arguments.length?(title=_,legend):title},d3.rebind(legend,legendDispatcher,"on"),legend}},1088:function(module,exports,__webpack_require__){var helper=__webpack_require__(950);module.exports=function(){var path,scale=d3.scale.linear(),shape="rect",shapeWidth=15,shapePadding=2,cells=[5],labels=[],classPrefix="",title="",labelFormat=d3.format(".01f"),labelOffset=10,labelAlign="middle",labelDelimiter="to",orient="vertical",ascending=!1,legendDispatcher=d3.dispatch("cellover","cellout","cellclick");function legend(svg){var type=helper.d3_calcType(scale,ascending,cells,labels,labelFormat,labelDelimiter),legendG=svg.selectAll("g").data([scale]);legendG.enter().append("g").attr("class",classPrefix+"legendCells");var cell=legendG.selectAll("."+classPrefix+"cell").data(type.data),cellEnter=cell.enter().append("g",".cell").attr("class",classPrefix+"cell").style("opacity",1e-6),shapes=(cellEnter.append(shape).attr("class",classPrefix+"swatch"),cell.select("g."+classPrefix+"cell "+shape));helper.d3_addEvents(cellEnter,legendDispatcher),cell.exit().transition().style("opacity",0).remove(),"line"===shape?(helper.d3_drawShapes(shape,shapes,0,shapeWidth),shapes.attr("stroke-width",type.feature)):helper.d3_drawShapes(shape,shapes,type.feature,type.feature,type.feature,path),helper.d3_addText(legendG,cellEnter,type.labels,classPrefix);var cellTrans,textTrans,text=cell.select("text"),shapeSize=shapes[0].map((function(d,i){var bbox=d.getBBox(),stroke=scale(type.data[i]);return"line"===shape&&"horizontal"===orient?bbox.height=bbox.height+stroke:"line"===shape&&"vertical"===orient&&(bbox.width=bbox.width),bbox})),maxH=d3.max(shapeSize,(function(d){return d.height+d.y})),maxW=d3.max(shapeSize,(function(d){return d.width+d.x})),textAlign="start"==labelAlign?0:"middle"==labelAlign?.5:1;"vertical"===orient?(cellTrans=function(d,i){return"translate(0, "+(d3.sum(shapeSize.slice(0,i+1),(function(d){return d.height}))+i*shapePadding)+")"},textTrans=function(d,i){return"translate("+(maxW+labelOffset)+","+(shapeSize[i].y+shapeSize[i].height/2+5)+")"}):"horizontal"===orient&&(cellTrans=function(d,i){return"translate("+(d3.sum(shapeSize.slice(0,i+1),(function(d){return d.width}))+i*shapePadding)+",0)"},textTrans=function(d,i){return"translate("+(shapeSize[i].width*textAlign+shapeSize[i].x)+","+(maxH+labelOffset)+")"}),helper.d3_placement(orient,cell,cellTrans,text,textTrans,labelAlign),helper.d3_title(svg,legendG,title,classPrefix),cell.transition().style("opacity",1)}return legend.scale=function(_){return arguments.length?(scale=_,legend):scale},legend.cells=function(_){return arguments.length?((_.length>1||_>=2)&&(cells=_),legend):cells},legend.shape=function(_,d){return arguments.length?("rect"!=_&&"circle"!=_&&"line"!=_||(shape=_,path=d),legend):shape},legend.shapeWidth=function(_){return arguments.length?(shapeWidth=+_,legend):shapeWidth},legend.shapePadding=function(_){return arguments.length?(shapePadding=+_,legend):shapePadding},legend.labels=function(_){return arguments.length?(labels=_,legend):labels},legend.labelAlign=function(_){return arguments.length?("start"!=_&&"end"!=_&&"middle"!=_||(labelAlign=_),legend):labelAlign},legend.labelFormat=function(_){return arguments.length?(labelFormat=_,legend):labelFormat},legend.labelOffset=function(_){return arguments.length?(labelOffset=+_,legend):labelOffset},legend.labelDelimiter=function(_){return arguments.length?(labelDelimiter=_,legend):labelDelimiter},legend.orient=function(_){return arguments.length?("horizontal"!=(_=_.toLowerCase())&&"vertical"!=_||(orient=_),legend):orient},legend.ascending=function(_){return arguments.length?(ascending=!!_,legend):ascending},legend.classPrefix=function(_){return arguments.length?(classPrefix=_,legend):classPrefix},legend.title=function(_){return arguments.length?(title=_,legend):title},d3.rebind(legend,legendDispatcher,"on"),legend}},1089:function(module,exports,__webpack_require__){var helper=__webpack_require__(950);module.exports=function(){var scale=d3.scale.linear(),shapePadding=5,cells=[5],labels=[],classPrefix="",title="",labelFormat=d3.format(".01f"),labelAlign="middle",labelOffset=10,labelDelimiter="to",orient="vertical",ascending=!1,legendDispatcher=d3.dispatch("cellover","cellout","cellclick");function legend(svg){var type=helper.d3_calcType(scale,ascending,cells,labels,labelFormat,labelDelimiter),legendG=svg.selectAll("g").data([scale]);legendG.enter().append("g").attr("class",classPrefix+"legendCells");var cell=legendG.selectAll("."+classPrefix+"cell").data(type.data),cellEnter=cell.enter().append("g",".cell").attr("class",classPrefix+"cell").style("opacity",1e-6),shapes=(cellEnter.append("path").attr("class",classPrefix+"swatch"),cell.select("g."+classPrefix+"cell path"));helper.d3_addEvents(cellEnter,legendDispatcher),cell.exit().transition().style("opacity",0).remove(),helper.d3_drawShapes("path",shapes,15,15,10,type.feature),helper.d3_addText(legendG,cellEnter,type.labels,classPrefix);var cellTrans,textTrans,text=cell.select("text"),shapeSize=shapes[0].map((function(d){return d.getBBox()})),maxH=d3.max(shapeSize,(function(d){return d.height})),maxW=d3.max(shapeSize,(function(d){return d.width})),textAlign="start"==labelAlign?0:"middle"==labelAlign?.5:1;"vertical"===orient?(cellTrans=function(d,i){return"translate(0, "+i*(maxH+shapePadding)+")"},textTrans=function(d,i){return"translate("+(maxW+labelOffset)+","+(shapeSize[i].y+shapeSize[i].height/2+5)+")"}):"horizontal"===orient&&(cellTrans=function(d,i){return"translate("+i*(maxW+shapePadding)+",0)"},textTrans=function(d,i){return"translate("+(shapeSize[i].width*textAlign+shapeSize[i].x)+","+(maxH+labelOffset)+")"}),helper.d3_placement(orient,cell,cellTrans,text,textTrans,labelAlign),helper.d3_title(svg,legendG,title,classPrefix),cell.transition().style("opacity",1)}return legend.scale=function(_){return arguments.length?(scale=_,legend):scale},legend.cells=function(_){return arguments.length?((_.length>1||_>=2)&&(cells=_),legend):cells},legend.shapePadding=function(_){return arguments.length?(shapePadding=+_,legend):shapePadding},legend.labels=function(_){return arguments.length?(labels=_,legend):labels},legend.labelAlign=function(_){return arguments.length?("start"!=_&&"end"!=_&&"middle"!=_||(labelAlign=_),legend):labelAlign},legend.labelFormat=function(_){return arguments.length?(labelFormat=_,legend):labelFormat},legend.labelOffset=function(_){return arguments.length?(labelOffset=+_,legend):labelOffset},legend.labelDelimiter=function(_){return arguments.length?(labelDelimiter=_,legend):labelDelimiter},legend.orient=function(_){return arguments.length?("horizontal"!=(_=_.toLowerCase())&&"vertical"!=_||(orient=_),legend):orient},legend.ascending=function(_){return arguments.length?(ascending=!!_,legend):ascending},legend.classPrefix=function(_){return arguments.length?(classPrefix=_,legend):classPrefix},legend.title=function(_){return arguments.length?(title=_,legend):title},d3.rebind(legend,legendDispatcher,"on"),legend}},1090:function(module,exports,__webpack_require__){var api=__webpack_require__(172),content=__webpack_require__(1091);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1},exported=(api(content,options),content.locals?content.locals:{});module.exports=exported},1091:function(module,exports,__webpack_require__){(exports=__webpack_require__(173)(!1)).push([module.i,"/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n/* from d3-tip */\n.d3-tip {\n  line-height: 1;\n  padding: 12px;\n  background: rgba(0, 0, 0, 0.8);\n  color: #fff;\n  border-radius: 2px;\n  pointer-events: none;\n  z-index: 1000;\n}\n\n/* Creates a small triangle extender for the tooltip */\n.d3-tip:after {\n  box-sizing: border-box;\n  display: inline;\n  font-size: 10px;\n  width: 100%;\n  line-height: 1;\n  color: rgba(0, 0, 0, 0.8);\n  position: absolute;\n  pointer-events: none;\n}\n\n/* Northward tooltips */\n.d3-tip.n:after {\n  content: '\\25BC';\n  margin: -1px 0 0 0;\n  top: 100%;\n  left: 0;\n  text-align: center;\n}\n\n/* Eastward tooltips */\n.d3-tip.e:after {\n  content: '\\25C0';\n  margin: -4px 0 0 0;\n  top: 50%;\n  left: -8px;\n}\n\n/* Southward tooltips */\n.d3-tip.s:after {\n  content: '\\25B2';\n  margin: 0 0 1px 0;\n  top: -8px;\n  left: 0;\n  text-align: center;\n}\n\n/* Westward tooltips */\n.d3-tip.w:after {\n  content: '\\25B6';\n  margin: -4px 0 0 -1px;\n  top: 50%;\n  left: 100%;\n}\n",""]),module.exports=exports},1092:function(module,exports,__webpack_require__){var api=__webpack_require__(172),content=__webpack_require__(1093);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1},exported=(api(content,options),content.locals?content.locals:{});module.exports=exported},1093:function(module,exports,__webpack_require__){(exports=__webpack_require__(173)(!1)).push([module.i,'/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * "License"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\n.superset-legacy-chart-heatmap {\n  position: relative;\n  top: 0;\n  left: 0;\n  height: 100%;\n}\n\n.superset-legacy-chart-heatmap .axis text {\n  font: 12px sans-serif;\n  text-rendering: optimizeLegibility;\n  fill: #555;\n}\n\n.superset-legacy-chart-heatmap .background-rect {\n  stroke: #ddd;\n  fill-opacity: 0;\n  pointer-events: all;\n}\n\n.superset-legacy-chart-heatmap .axis path,\n.superset-legacy-chart-heatmap .axis line {\n  fill: none;\n  stroke: #ddd;\n  shape-rendering: crispEdges;\n}\n\n.superset-legacy-chart-heatmap canvas,\n.superset-legacy-chart-heatmap img {\n  image-rendering: optimizeSpeed; /* Older versions of FF          */ /* FF 6.0+                       */ /* Safari                        */\n  image-rendering: -o-crisp-edges; /* OS X & Windows Opera (12.02+) */\n  image-rendering: pixelated; /* Awesome future-browsers       */\n  -ms-interpolation-mode: nearest-neighbor; /* IE                            */\n}\n\n.superset-legacy-chart-heatmap .legendCells text {\n  font-size: 10px;\n  font-weight: normal;\n  opacity: 0;\n}\n\n.superset-legacy-chart-heatmap .legendCells .cell:first-child text {\n  opacity: 1;\n}\n.superset-legacy-chart-heatmap .legendCells .cell:last-child text {\n  opacity: 1;\n}\n\n.dashboard .superset-legacy-chart-heatmap .axis text {\n  font-size: 10px;\n  opacity: 0.75;\n}\n',""]),module.exports=exports},1258:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var reactify=__webpack_require__(872),d3=(__webpack_require__(906),__webpack_require__(68),__webpack_require__(871)),d3_default=__webpack_require__.n(d3),prop_types=__webpack_require__(22),prop_types_default=__webpack_require__.n(prop_types),d3_tip=(__webpack_require__(1085),__webpack_require__(983)),SequentialSchemeRegistrySingleton=__webpack_require__(841),NumberFormatterRegistrySingleton=__webpack_require__(438),NumberFormats=__webpack_require__(74);__webpack_require__(1090),__webpack_require__(1092);const propTypes={data:prop_types_default.a.shape({records:prop_types_default.a.arrayOf(prop_types_default.a.shape({x:prop_types_default.a.string,y:prop_types_default.a.string,v:prop_types_default.a.number,perc:prop_types_default.a.number,rank:prop_types_default.a.number})),extents:prop_types_default.a.arrayOf(prop_types_default.a.number)}),width:prop_types_default.a.number,height:prop_types_default.a.number,bottomMargin:prop_types_default.a.oneOfType([prop_types_default.a.string,prop_types_default.a.number]),colorScheme:prop_types_default.a.string,columnX:prop_types_default.a.string,columnY:prop_types_default.a.string,leftMargin:prop_types_default.a.oneOfType([prop_types_default.a.string,prop_types_default.a.number]),metric:prop_types_default.a.oneOfType([prop_types_default.a.string,prop_types_default.a.object]),normalized:prop_types_default.a.bool,numberFormat:prop_types_default.a.string,showLegend:prop_types_default.a.bool,showPercentage:prop_types_default.a.bool,showValues:prop_types_default.a.bool,sortXAxis:prop_types_default.a.string,sortYAxis:prop_types_default.a.string,xScaleInterval:prop_types_default.a.number,yScaleInterval:prop_types_default.a.number,yAxisBounds:prop_types_default.a.arrayOf(prop_types_default.a.number)};function cmp(a,b){return a>b?1:-1}function Heatmap_Heatmap(element,props){const{data:data,width:width,height:height,bottomMargin:bottomMargin,canvasImageRendering:canvasImageRendering,colorScheme:colorScheme,columnX:columnX,columnY:columnY,leftMargin:leftMargin,metric:metric,normalized:normalized,numberFormat:numberFormat,showLegend:showLegend,showPercentage:showPercentage,showValues:showValues,sortXAxis:sortXAxis,sortYAxis:sortYAxis,xScaleInterval:xScaleInterval,yScaleInterval:yScaleInterval,yAxisBounds:yAxisBounds}=props,{records:records,extents:extents}=data,margin={top:10,right:10,bottom:35,left:35},valueFormatter=Object(NumberFormatterRegistrySingleton.c)(numberFormat);function ordScale(k,rangeBands,sortMethod){let domain={};const actualKeys={};records.forEach(d=>{domain[d[k]]=(domain[d[k]]||0)+d.v,actualKeys[d[k]]=d[k]});const keys=Object.keys(actualKeys).map(s=>actualKeys[s]);return"alpha_asc"===sortMethod?domain=keys.sort(cmp):"alpha_desc"===sortMethod?domain=keys.sort(cmp).reverse():"value_desc"===sortMethod?domain=Object.keys(domain).sort((a,b)=>domain[a]>domain[b]?-1:1):"value_asc"===sortMethod&&(domain=Object.keys(domain).sort((a,b)=>domain[b]>domain[a]?-1:1)),"y"===k&&rangeBands&&domain.reverse(),rangeBands?d3_default.a.scale.ordinal().domain(domain).rangeBands(rangeBands):d3_default.a.scale.ordinal().domain(domain).range(d3_default.a.range(domain.length))}element.innerHTML="";const matrix={};!function(){let longestX=1,longestY=1;records.forEach(datum=>{longestX=Math.max(longestX,datum.x&&datum.x.toString().length||1),longestY=Math.max(longestY,datum.y&&datum.y.toString().length||1)}),margin.left="auto"===leftMargin?Math.ceil(Math.max(margin.left,6*longestY)):leftMargin,showLegend&&(margin.right+=40),margin.bottom="auto"===bottomMargin?Math.ceil(Math.max(margin.bottom,4.5*longestX)):bottomMargin}();const hmWidth=width-(margin.left+margin.right),hmHeight=height-(margin.bottom+margin.top),fp=Object(NumberFormatterRegistrySingleton.c)(NumberFormats.a.PERCENT),xScale=ordScale("x",null,sortXAxis),yScale=ordScale("y",null,sortYAxis),xRbScale=ordScale("x",[0,hmWidth],sortXAxis),yRbScale=ordScale("y",[hmHeight,0],sortYAxis),heatmapDim=[xRbScale.domain().length,yRbScale.domain().length],minBound=yAxisBounds[0]||0,maxBound=yAxisBounds[1]||1,colorScale=Object(SequentialSchemeRegistrySingleton.a)().get(colorScheme).createLinearScale([minBound,maxBound]),scale=[d3_default.a.scale.linear().domain([0,heatmapDim[0]]).range([0,hmWidth]),d3_default.a.scale.linear().domain([0,heatmapDim[1]]).range([0,hmHeight])],container=d3_default.a.select(element);container.classed("superset-legacy-chart-heatmap",!0);const canvas=container.append("canvas").attr("width",heatmapDim[0]).attr("height",heatmapDim[1]).style("width","".concat(hmWidth,"px")).style("height","".concat(hmHeight,"px")).style("image-rendering",canvasImageRendering).style("left","".concat(margin.left,"px")).style("top","".concat(margin.top,"px")).style("position","absolute"),svg=container.append("svg").attr("width",width).attr("height",height).style("position","relative");if(showValues){svg.selectAll("rect").data(records).enter().append("g").attr("transform","translate(".concat(margin.left,", ").concat(margin.top,")")).append("text").attr("transform",d=>"translate(".concat(xRbScale(d.x),", ").concat(yRbScale(d.y),")")).attr("y",yRbScale.rangeBand()/2).attr("x",xRbScale.rangeBand()/2).attr("text-anchor","middle").attr("dy",".35em").text(d=>valueFormatter(d.v)).attr("font-size","".concat(Math.min(yRbScale.rangeBand(),xRbScale.rangeBand())/3,"px")).attr("fill",d=>d.v>=extents[1]/2?"white":"black")}if(showLegend){const colorLegend=d3_default.a.legend.color().labelFormat(valueFormatter).scale(colorScale).shapePadding(0).cells(10).shapeWidth(10).shapeHeight(10).labelOffset(3);svg.append("g").attr("transform","translate(".concat(width-40,", ").concat(margin.top,")")).call(colorLegend)}const tip=Object(d3_tip.a)().attr("class","d3-tip").offset((function(){const k=d3_default.a.mouse(this),x=k[0]-hmWidth/2;return[k[1]-20,x]})).html((function(){let s="";const k=d3_default.a.mouse(this),m=Math.floor(scale[0].invert(k[0])),n=Math.floor(scale[1].invert(k[1])),metricLabel="object"==typeof metric?metric.label:metric;if(m in matrix&&n in matrix[m]){const obj=matrix[m][n];s+="<div><b>".concat(columnX,": </b>").concat(obj.x,"<div>"),s+="<div><b>".concat(columnY,": </b>").concat(obj.y,"<div>"),s+="<div><b>".concat(metricLabel,": </b>").concat(valueFormatter(obj.v),"<div>"),showPercentage&&(s+="<div><b>%: </b>".concat(fp(normalized?obj.rank:obj.perc),"<div>")),tip.style("display",null)}else tip.style("display","none");return s}));svg.append("g").attr("transform","translate(".concat(margin.left,", ").concat(margin.top,")")).append("rect").classed("background-rect",!0).on("mousemove",tip.show).on("mouseout",tip.hide).attr("width",hmWidth).attr("height",hmHeight).call(tip);const xAxis=d3_default.a.svg.axis().scale(xRbScale).outerTickSize(0).tickValues(xRbScale.domain().filter((d,i)=>!(i%xScaleInterval))).orient("bottom"),yAxis=d3_default.a.svg.axis().scale(yRbScale).outerTickSize(0).tickValues(yRbScale.domain().filter((d,i)=>!(i%yScaleInterval))).orient("left");svg.append("g").attr("class","x axis").attr("transform","translate(".concat(margin.left,",").concat(margin.top+hmHeight,")")).call(xAxis).selectAll("text").attr("x",-4).attr("y",10).attr("dy","0.3em").style("text-anchor","end").attr("transform","rotate(-45)"),svg.append("g").attr("class","y axis").attr("transform","translate(".concat(margin.left,",").concat(margin.top,")")).call(yAxis);const context=canvas.node().getContext("2d");context.imageSmoothingEnabled=!1,function(){const imageObj=new Image,image=context.createImageData(heatmapDim[0],heatmapDim[1]),pixs={};records.forEach(d=>{const c=d3_default.a.rgb(colorScale(normalized?d.rank:d.perc)),x=xScale(d.x),y=yScale(d.y);pixs[x+y*xScale.domain().length]=c,void 0===matrix[x]&&(matrix[x]={}),void 0===matrix[x][y]&&(matrix[x][y]=d)});let p=-1;for(let i=0;i<heatmapDim[0]*heatmapDim[1];i++){let c=pixs[i],alpha=255;void 0===c&&(c=d3_default.a.rgb("#F00"),alpha=0),image.data[++p]=c.r,image.data[++p]=c.g,image.data[++p]=c.b,image.data[++p]=alpha}context.putImageData(image,0,0),imageObj.src=canvas.node().toDataURL()}()}Heatmap_Heatmap.displayName="Heatmap",Heatmap_Heatmap.propTypes=propTypes;var src_Heatmap=Heatmap_Heatmap;__webpack_exports__.default=Object(reactify.a)(src_Heatmap)},872:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return reactify}));var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);function reactify(renderFn,callbacks){class ReactifiedComponent extends react__WEBPACK_IMPORTED_MODULE_0___default.a.Component{constructor(props){super(props),this.setContainerRef=this.setContainerRef.bind(this)}componentDidMount(){this.execute()}componentDidUpdate(){this.execute()}componentWillUnmount(){this.container=void 0,(null==callbacks?void 0:callbacks.componentWillUnmount)&&callbacks.componentWillUnmount.bind(this)()}setContainerRef(ref){this.container=ref}execute(){this.container&&renderFn(this.container,this.props)}render(){const{id:id,className:className}=this.props;return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div",{ref:this.setContainerRef,id:id,className:className})}}const ReactifiedClass=ReactifiedComponent;return renderFn.displayName&&(ReactifiedClass.displayName=renderFn.displayName),renderFn.propTypes&&(ReactifiedClass.propTypes=Object.assign(Object.assign({},ReactifiedClass.propTypes),renderFn.propTypes)),renderFn.defaultProps&&(ReactifiedClass.defaultProps=renderFn.defaultProps),ReactifiedComponent}},950:function(module,exports){module.exports={d3_identity:function(d){return d},d3_mergeLabels:function(gen,labels){if(0===labels.length)return gen;gen=gen||[];for(var i=labels.length;i<gen.length;i++)labels.push(gen[i]);return labels},d3_linearLegend:function(scale,cells,labelFormat){var data=[];if(cells.length>1)data=cells;else for(var domain=scale.domain(),increment=(domain[domain.length-1]-domain[0])/(cells-1),i=0;i<cells;i++)data.push(domain[0]+i*increment);var labels=data.map(labelFormat);return{data:data,labels:labels,feature:function(d){return scale(d)}}},d3_quantLegend:function(scale,labelFormat,labelDelimiter){var labels=scale.range().map((function(d){var invert=scale.invertExtent(d);labelFormat(invert[0]),labelFormat(invert[1]);return labelFormat(invert[0])+" "+labelDelimiter+" "+labelFormat(invert[1])}));return{data:scale.range(),labels:labels,feature:this.d3_identity}},d3_ordinalLegend:function(scale){return{data:scale.domain(),labels:scale.domain(),feature:function(d){return scale(d)}}},d3_drawShapes:function(shape,shapes,shapeHeight,shapeWidth,shapeRadius,path){"rect"===shape?shapes.attr("height",shapeHeight).attr("width",shapeWidth):"circle"===shape?shapes.attr("r",shapeRadius):"line"===shape?shapes.attr("x1",0).attr("x2",shapeWidth).attr("y1",0).attr("y2",0):"path"===shape&&shapes.attr("d",path)},d3_addText:function(svg,enter,labels,classPrefix){enter.append("text").attr("class",classPrefix+"label"),svg.selectAll("g."+classPrefix+"cell text."+classPrefix+"label").data(labels).text(this.d3_identity)},d3_calcType:function(scale,ascending,cells,labels,labelFormat,labelDelimiter){var type=scale.ticks?this.d3_linearLegend(scale,cells,labelFormat):scale.invertExtent?this.d3_quantLegend(scale,labelFormat,labelDelimiter):this.d3_ordinalLegend(scale);return type.labels=this.d3_mergeLabels(type.labels,labels),ascending&&(type.labels=this.d3_reverse(type.labels),type.data=this.d3_reverse(type.data)),type},d3_reverse:function(arr){for(var mirror=[],i=0,l=arr.length;i<l;i++)mirror[i]=arr[l-i-1];return mirror},d3_placement:function(orient,cell,cellTrans,text,textTrans,labelAlign){cell.attr("transform",cellTrans),text.attr("transform",textTrans),"horizontal"===orient&&text.style("text-anchor",labelAlign)},d3_addEvents:function(cells,dispatcher){var _=this;cells.on("mouseover.legend",(function(d){_.d3_cellOver(dispatcher,d,this)})).on("mouseout.legend",(function(d){_.d3_cellOut(dispatcher,d,this)})).on("click.legend",(function(d){_.d3_cellClick(dispatcher,d,this)}))},d3_cellOver:function(cellDispatcher,d,obj){cellDispatcher.cellover.call(obj,d)},d3_cellOut:function(cellDispatcher,d,obj){cellDispatcher.cellout.call(obj,d)},d3_cellClick:function(cellDispatcher,d,obj){cellDispatcher.cellclick.call(obj,d)},d3_title:function(svg,cellsSvg,title,classPrefix){if(""!==title){svg.selectAll("text."+classPrefix+"legendTitle").data([title]).enter().append("text").attr("class",classPrefix+"legendTitle"),svg.selectAll("text."+classPrefix+"legendTitle").text(title);var yOffset=svg.select("."+classPrefix+"legendTitle").map((function(d){return d[0].getBBox().height}))[0],xOffset=-cellsSvg.map((function(d){return d[0].getBBox().x}))[0];cellsSvg.attr("transform","translate("+xOffset+","+(yOffset+10)+")")}}}}}]);
//# sourceMappingURL=17.d886fa82eba8c89a9a58.bundle.js.map