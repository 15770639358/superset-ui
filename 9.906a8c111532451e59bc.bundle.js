(window.webpackJsonp=window.webpackJsonp||[]).push([[9,15],{773:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"CategoricalColorNamespace",(function(){return CategoricalColorNamespace_namespaceObject})),__webpack_require__.d(__webpack_exports__,"CategoricalColorScale",(function(){return src_CategoricalColorScale})),__webpack_require__.d(__webpack_exports__,"CategoricalScheme",(function(){return CategoricalScheme.a})),__webpack_require__.d(__webpack_exports__,"getCategoricalSchemeRegistry",(function(){return CategoricalSchemeRegistrySingleton.a})),__webpack_require__.d(__webpack_exports__,"getSequentialSchemeRegistry",(function(){return SequentialSchemeRegistrySingleton.a})),__webpack_require__.d(__webpack_exports__,"SequentialScheme",(function(){return SequentialScheme.a})),__webpack_require__.d(__webpack_exports__,"BRAND_COLOR",(function(){return BRAND_COLOR}));var CategoricalColorNamespace_namespaceObject={};__webpack_require__.r(CategoricalColorNamespace_namespaceObject),__webpack_require__.d(CategoricalColorNamespace_namespaceObject,"default",(function(){return CategoricalColorNamespace_CategoricalColorNamespace})),__webpack_require__.d(CategoricalColorNamespace_namespaceObject,"DEFAULT_NAMESPACE",(function(){return DEFAULT_NAMESPACE})),__webpack_require__.d(CategoricalColorNamespace_namespaceObject,"getNamespace",(function(){return getNamespace})),__webpack_require__.d(CategoricalColorNamespace_namespaceObject,"getColor",(function(){return getColor})),__webpack_require__.d(CategoricalColorNamespace_namespaceObject,"getScale",(function(){return getScale}));var ExtensibleFunction=__webpack_require__(385),ordinal=__webpack_require__(803);function stringifyAndTrim(value){return String(value).trim()}class CategoricalColorScale_CategoricalColorScale extends ExtensibleFunction.a{constructor(colors,parentForcedColors){super(value=>this.getColor(value)),this.colors=colors,this.scale=Object(ordinal.a)(),this.scale.range(colors),this.parentForcedColors=parentForcedColors,this.forcedColors={}}getColor(value){const cleanedValue=stringifyAndTrim(value),parentColor=this.parentForcedColors&&this.parentForcedColors[cleanedValue];if(parentColor)return parentColor;const forcedColor=this.forcedColors[cleanedValue];return forcedColor||this.scale(cleanedValue)}setColor(value,forcedColor){return this.forcedColors[stringifyAndTrim(value)]=forcedColor,this}getColorMap(){const colorMap={};return this.scale.domain().forEach(value=>{colorMap[value.toString()]=this.scale(value)}),Object.assign(Object.assign(Object.assign({},colorMap),this.forcedColors),this.parentForcedColors)}copy(){const copy=new CategoricalColorScale_CategoricalColorScale(this.scale.range(),this.parentForcedColors);return copy.forcedColors=Object.assign({},this.forcedColors),copy.domain(this.domain()),copy.unknown(this.unknown()),copy}domain(newDomain){return void 0===newDomain?this.scale.domain():(this.scale.domain(newDomain),this)}range(newRange){return void 0===newRange?this.scale.range():(this.colors=newRange,this.scale.range(newRange),this)}unknown(value){return void 0===value?this.scale.unknown():(this.scale.unknown(value),this)}}var src_CategoricalColorScale=CategoricalColorScale_CategoricalColorScale,CategoricalSchemeRegistrySingleton=__webpack_require__(772);class CategoricalColorNamespace_CategoricalColorNamespace{constructor(name){this.name=name,this.scales={},this.forcedItems={}}getScale(schemeId){var _a,_b;const id=null!==(_a=null!=schemeId?schemeId:Object(CategoricalSchemeRegistrySingleton.a)().getDefaultKey())&&void 0!==_a?_a:"",scale=this.scales[id];if(scale)return scale;const scheme=Object(CategoricalSchemeRegistrySingleton.a)().get(id),newScale=new src_CategoricalColorScale(null!==(_b=null==scheme?void 0:scheme.colors)&&void 0!==_b?_b:[],this.forcedItems);return this.scales[id]=newScale,newScale}setColor(value,forcedColor){return this.forcedItems[stringifyAndTrim(value)]=forcedColor,this}}const namespaces={},DEFAULT_NAMESPACE="GLOBAL";function getNamespace(name=DEFAULT_NAMESPACE){const instance=namespaces[name];if(instance)return instance;const newInstance=new CategoricalColorNamespace_CategoricalColorNamespace(name);return namespaces[name]=newInstance,newInstance}function getColor(value,schemeId,namespace){return getNamespace(namespace).getScale(schemeId).getColor(value)}function getScale(scheme,namespace){return getNamespace(namespace).getScale(scheme)}var CategoricalScheme=__webpack_require__(53),SequentialSchemeRegistrySingleton=__webpack_require__(774),SequentialScheme=__webpack_require__(124);const BRAND_COLOR="#00A699"},803:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return implicit})),__webpack_require__.d(__webpack_exports__,"a",(function(){return ordinal}));var _init_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(239);const implicit=Symbol("implicit");function ordinal(){var index=new Map,domain=[],range=[],unknown=implicit;function scale(d){var key=d+"",i=index.get(key);if(!i){if(unknown!==implicit)return unknown;index.set(key,i=domain.push(d))}return range[(i-1)%range.length]}return scale.domain=function(_){if(!arguments.length)return domain.slice();domain=[],index=new Map;for(const value of _){const key=value+"";index.has(key)||index.set(key,domain.push(value))}return scale},scale.range=function(_){return arguments.length?(range=Array.from(_),scale):range.slice()},scale.unknown=function(_){return arguments.length?(unknown=_,scale):unknown},scale.copy=function(){return ordinal(domain,range).unknown(unknown)},_init_js__WEBPACK_IMPORTED_MODULE_0__.b.apply(scale,arguments),scale}},838:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return reactify}));var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);function reactify(renderFn,callbacks){class ReactifiedComponent extends react__WEBPACK_IMPORTED_MODULE_0___default.a.Component{constructor(props){super(props),this.setContainerRef=this.setContainerRef.bind(this)}componentDidMount(){this.execute()}componentDidUpdate(){this.execute()}componentWillUnmount(){this.container=void 0,(null==callbacks?void 0:callbacks.componentWillUnmount)&&callbacks.componentWillUnmount.bind(this)()}setContainerRef(ref){this.container=ref}execute(){this.container&&renderFn(this.container,this.props)}render(){const{id:id,className:className}=this.props;return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div",{ref:this.setContainerRef,id:id,className:className})}}const ReactifiedClass=ReactifiedComponent;return renderFn.displayName&&(ReactifiedClass.displayName=renderFn.displayName),renderFn.propTypes&&(ReactifiedClass.propTypes=Object.assign(Object.assign({},ReactifiedClass.propTypes),renderFn.propTypes)),renderFn.defaultProps&&(ReactifiedClass.defaultProps=renderFn.defaultProps),ReactifiedComponent}},931:function(module,exports,__webpack_require__){var api=__webpack_require__(168),content=__webpack_require__(932);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1},exported=(api(content,options),content.locals?content.locals:{});module.exports=exported},932:function(module,exports,__webpack_require__){(exports=__webpack_require__(169)(!1)).push([module.i,'/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * "License"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\n.superset-legacy-chart-sunburst text {\n  text-rendering: optimizeLegibility;\n}\n.superset-legacy-chart-sunburst path {\n  stroke: #ddd;\n  stroke-width: 0.5px;\n}\n.superset-legacy-chart-sunburst .center-label {\n  text-anchor: middle;\n  fill: #333;\n  pointer-events: none;\n}\n.superset-legacy-chart-sunburst .path-abs-percent {\n  font-size: 3em;\n  font-weight: 700;\n}\n.superset-legacy-chart-sunburst .path-cond-percent {\n  font-size: 2em;\n}\n.superset-legacy-chart-sunburst .path-metrics {\n  color: #777;\n}\n.superset-legacy-chart-sunburst .path-ratio {\n  color: #777;\n}\n\n.superset-legacy-chart-sunburst .breadcrumbs text {\n  font-weight: 600;\n  font-size: 1.2em;\n  text-anchor: middle;\n  fill: #333;\n}\n\n/* dashboard specific */\n/*\n.dashboard .superset-legacy-chart-sunburst text {\n  font-size: 1em;\n}\n.dashboard .superset-legacy-chart-sunburst .path-abs-percent {\n  font-size: 2em;\n  font-weight: 700;\n}\n.dashboard .superset-legacy-chart-sunburst .path-cond-percent {\n  font-size: 1.5em;\n}\n.dashboard .superset-legacy-chart-sunburst .path-metrics {\n  font-size: 1em;\n}\n.dashboard .superset-legacy-chart-sunburst .path-ratio {\n  font-size: 1em;\n}\n*/\n',""]),module.exports=exports},995:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var reactify=__webpack_require__(838),d3=__webpack_require__(810),d3_default=__webpack_require__.n(d3),prop_types=__webpack_require__(19),prop_types_default=__webpack_require__.n(prop_types),src=__webpack_require__(773),NumberFormatterRegistrySingleton=__webpack_require__(390),NumberFormats=__webpack_require__(73);function wrapSvgText(text,width,adjustedY){text.each((function each(){const d3Text=d3_default.a.select(this),words=d3Text.text().split(/\s+/);let line=[],lineNumber=0;const x=d3Text.attr("x"),y=d3Text.attr("y"),dy=parseFloat(d3Text.attr("dy"));let tspan=d3Text.text(null).append("tspan").attr("x",x).attr("y",y).attr("dy",dy+"em"),didWrap=!1;words.forEach(word=>{line.push(word),tspan.text(line.join(" ")),tspan.node().getComputedTextLength()>width&&(line.pop(),tspan.text(line.join(" ")),line=[word],tspan=d3Text.append("tspan").attr("x",x).attr("y",y).attr("dy",1*++lineNumber+dy+"em").text(word),didWrap=!0)}),didWrap||void 0===adjustedY||tspan.attr("y",adjustedY)}))}__webpack_require__(931);const propTypes={data:prop_types_default.a.arrayOf(prop_types_default.a.array),width:prop_types_default.a.number,height:prop_types_default.a.number,colorScheme:prop_types_default.a.string,numberFormat:prop_types_default.a.string,metrics:prop_types_default.a.arrayOf(prop_types_default.a.oneOfType([prop_types_default.a.string,prop_types_default.a.object]))};function metricLabel(metric){return"string"==typeof metric||metric instanceof String?metric:metric.label}function Sunburst_Sunburst(element,props){const container=d3_default.a.select(element);container.classed("superset-legacy-chart-sunburst",!0);const{data:data,width:width,height:height,colorScheme:colorScheme,metrics:metrics,numberFormat:numberFormat}=props,margin_top=10,margin_left=5,containerWidth=width,containerHeight=height,breadcrumbHeight=.085*containerHeight,visWidth=containerWidth-margin_left-5,visHeight=containerHeight-margin_top-10-breadcrumbHeight,radius=Math.min(visWidth,visHeight)/2;let maxBreadcrumbs,breadcrumbDims,totalSize,colorScale,breadcrumbs,vis,arcs,gMiddleText,colorByCategory=!0;const colorFn=src.CategoricalColorNamespace.getScale(colorScheme),partition=d3_default.a.layout.partition().size([2*Math.PI,radius*radius]).value(d=>d.m1),arc=d3_default.a.svg.arc().startAngle(d=>d.x).endAngle(d=>d.x+d.dx).innerRadius(d=>Math.sqrt(d.y)).outerRadius(d=>Math.sqrt(d.y+d.dy)),formatNum=Object(NumberFormatterRegistrySingleton.c)(numberFormat||NumberFormats.a.SI_3_DIGIT),formatPerc=Object(NumberFormatterRegistrySingleton.c)(NumberFormats.a.PERCENT_3_POINT);container.select("svg").remove();const svg=container.append("svg:svg").attr("width",containerWidth).attr("height",containerHeight);function breadcrumbPoints(d,i){const points=[];return points.push("0,0"),points.push(breadcrumbDims.width+",0"),points.push(breadcrumbDims.width+breadcrumbDims.tipTailWidth+","+breadcrumbDims.height/2),points.push(breadcrumbDims.width+","+breadcrumbDims.height),points.push("0,"+breadcrumbDims.height),i>0&&points.push(breadcrumbDims.tipTailWidth+","+breadcrumbDims.height/2),points.join(" ")}function mouseenter(d){const sequenceArray=function getAncestors(node){const path=[];let current=node;for(;current.parent;)path.unshift(current),current=current.parent;return path}(d),parentOfD=sequenceArray[sequenceArray.length-2]||null,absolutePercentage=(d.m1/totalSize).toPrecision(3),conditionalPercentage=parentOfD?(d.m1/parentOfD.m1).toPrecision(3):null,absolutePercString=formatPerc(absolutePercentage),conditionalPercString=parentOfD?formatPerc(conditionalPercentage):"",yOffsets=["-25","7","35","60"];let offsetIndex=0;const metricsMatch=Math.abs(d.m1-d.m2)<1e-5;gMiddleText.selectAll("*").remove(),gMiddleText.append("text").attr("class","path-abs-percent").attr("y",yOffsets[offsetIndex++]).text(absolutePercString+" of total"),conditionalPercString&&gMiddleText.append("text").attr("class","path-cond-percent").attr("y",yOffsets[offsetIndex++]).text(conditionalPercString+" of parent"),gMiddleText.append("text").attr("class","path-metrics").attr("y",yOffsets[offsetIndex++]).text(metricLabel(metrics[0])+": "+formatNum(d.m1)+(metricsMatch?"":", "+metricLabel(metrics[1])+": "+formatNum(d.m2))),gMiddleText.append("text").attr("class","path-ratio").attr("y",yOffsets[offsetIndex++]).text(metricsMatch?"":metricLabel(metrics[1])+"/"+metricLabel(metrics[0])+": "+formatPerc(d.m2/d.m1)),arcs.selectAll("path").style("stroke-width",null).style("stroke",null).style("opacity",.3),arcs.selectAll("path").filter(node=>sequenceArray.includes(node)).style("opacity",1).style("stroke","#aaa"),function updateBreadcrumbs(sequenceArray,percentageString){const g=breadcrumbs.selectAll("g").data(sequenceArray,d=>d.name+d.depth),entering=g.enter().append("svg:g");entering.append("svg:polygon").attr("points",breadcrumbPoints).style("fill",d=>colorByCategory?colorFn(d.name):colorScale(d.m2/d.m1)),entering.append("svg:text").attr("x",(breadcrumbDims.width+breadcrumbDims.tipTailWidth)/2).attr("y",breadcrumbDims.height/4).attr("dy","0.85em").style("fill",d=>d3_default.a.hsl(colorByCategory?colorFn(d.name):colorScale(d.m2/d.m1)).l<.5?"white":"black").attr("class","step-label").text(d=>d.name.replace(/_/g," ")).call(wrapSvgText,breadcrumbDims.width,breadcrumbDims.height/2),g.attr("transform",(d,i)=>"translate("+i*(breadcrumbDims.width+breadcrumbDims.spacing)+", 0)"),g.exit().remove(),breadcrumbs.select(".end-label").attr("x",(sequenceArray.length+.5)*(breadcrumbDims.width+breadcrumbDims.spacing)).attr("y",breadcrumbDims.height/2).attr("dy","0.35em").text(percentageString),breadcrumbs.style("visibility",null)}(sequenceArray,absolutePercString)}function mouseleave(){breadcrumbs.style("visibility","hidden"),gMiddleText.selectAll("*").remove(),arcs.selectAll("path").on("mouseenter",null),arcs.selectAll("path").transition().duration(200).style("opacity",1).style("stroke",null).style("stroke-width",null).each("end",(function end(){d3_default.a.select(this).on("mouseenter",mouseenter)}))}!function createBreadcrumbs(firstRowData){maxBreadcrumbs=firstRowData.length-2+1,breadcrumbDims={width:visWidth/maxBreadcrumbs,height:.8*breadcrumbHeight,spacing:3,tipTailWidth:10},breadcrumbs=svg.append("svg:g").attr("class","breadcrumbs").attr("transform","translate("+margin_left+","+margin_top+")"),breadcrumbs.append("svg:text").attr("class","end-label")}(data[0]),function createVisualization(rows){const root=function buildHierarchy(rows){const root={name:"root",children:[]};return rows.forEach(row=>{const m1=Number(row[row.length-2]),m2=Number(row[row.length-1]),levels=row.slice(0,-2);if(Number.isNaN(m1))return;let currentNode=root;for(let level=0;level<levels.length;level++){const children=currentNode.children||[],nodeName=levels[level].toString();let childNode;level>=levels.length-1||0===levels[level+1]?0!==nodeName&&(childNode={name:nodeName,m1:m1,m2:m2},children.push(childNode)):(childNode=children.find(child=>child.name===nodeName&&child.level===level),childNode||(childNode={name:nodeName,children:[],level:level},children.push(childNode)),currentNode=childNode)}}),function recurse(node){if(node.children){let sums,m1=0,m2=0;for(let i=0;i<node.children.length;i++)sums=recurse(node.children[i]),m1+=sums[0],m2+=sums[1];node.m1=m1,node.m2=m2}return[node.m1,node.m2]}(root),root}(rows);vis=svg.append("svg:g").attr("class","sunburst-vis").attr("transform","translate("+(margin_left+visWidth/2)+","+(margin_top+breadcrumbHeight+visHeight/2)+")").on("mouseleave",mouseleave),arcs=vis.append("svg:g").attr("id","arcs"),gMiddleText=vis.append("svg:g").attr("class","center-label"),arcs.append("svg:circle").attr("r",radius).style("opacity",0);const nodes=partition.nodes(root).filter(d=>d.dx>.005);let ext;metrics[0]!==metrics[1]&&metrics[1]&&(colorByCategory=!1,ext=d3_default.a.extent(nodes,d=>d.m2/d.m1),colorScale=d3_default.a.scale.linear().domain([ext[0],ext[0]+(ext[1]-ext[0])/2,ext[1]]).range(["#00D1C1","white","#FFB400"])),arcs.selectAll("path").data(nodes).enter().append("svg:path").attr("display",d=>d.depth?null:"none").attr("d",arc).attr("fill-rule","evenodd").style("fill",d=>colorByCategory?colorFn(d.name):colorScale(d.m2/d.m1)).style("opacity",1).on("mouseenter",mouseenter),totalSize=root.value}(data)}Sunburst_Sunburst.displayName="Sunburst",Sunburst_Sunburst.propTypes=propTypes;var esm_Sunburst=Sunburst_Sunburst;__webpack_exports__.default=Object(reactify.a)(esm_Sunburst)}}]);
//# sourceMappingURL=9.906a8c111532451e59bc.bundle.js.map